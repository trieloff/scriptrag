[1m============================= test session starts ==============================[0m
platform linux -- Python 3.11.13, pytest-8.4.1, pluggy-1.6.0 -- /root/repo/.venv/bin/python
cachedir: .pytest_cache
hypothesis profile 'default'
benchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /root/repo
configfile: pytest.ini
testpaths: tests
plugins: cov-6.2.1, hypothesis-6.136.6, timeout-2.4.0, asyncio-1.1.0, anyio-4.9.0, xdist-3.8.0, mock-3.14.1, sugar-1.0.0, benchmark-5.1.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
[1mcollecting ... [0mcollected 643 items

tests/database/test_knowledge_graph_builder.py::test_knowledge_graph_builder_init 2025-07-30 08:06:14 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/database/test_knowledge_graph_builder.py::test_build_from_script_basic 2025-07-30 08:06:14 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:14 [info     ] Building knowledge graph for script: Test Script
2025-07-30 08:06:14 [info     ] Knowledge graph built successfully: 1 nodes, 0 edges
[32mPASSED[0m
tests/database/test_knowledge_graph_builder.py::test_create_character_node 2025-07-30 08:06:14 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:14 [debug    ] Created character node: JOHN
[32mPASSED[0m
tests/database/test_knowledge_graph_builder.py::test_create_scene_node 2025-07-30 08:06:14 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:14 [debug    ] Created scene node: INT. COFFEE SHOP - DAY
[32mPASSED[0m
tests/database/test_knowledge_graph_builder.py::test_process_scene_elements 2025-07-30 08:06:14 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/database/test_knowledge_graph_builder.py::test_extract_character_interactions 2025-07-30 08:06:14 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/database/test_knowledge_graph_builder.py::test_enrich_with_llm 2025-07-30 08:06:14 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/database/test_knowledge_graph_builder.py::test_build_temporal_graph 2025-07-30 08:06:14 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:14 [info     ] Created 2 temporal relationships
[32mPASSED[0m
tests/database/test_knowledge_graph_builder.py::test_build_logical_dependencies 2025-07-30 08:06:14 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:14 [info     ] Created 1 logical dependency relationships
[32mPASSED[0m
tests/database/test_knowledge_graph_builder.py::test_analyze_temporal_order 2025-07-30 08:06:14 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/database/test_knowledge_graph_builder.py::test_get_or_create_location_node 2025-07-30 08:06:14 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/database/test_knowledge_graph_builder.py::test_extract_character_mentions 2025-07-30 08:06:14 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/database/test_knowledge_graph_builder.py::test_build_from_fountain_file 2025-07-30 08:06:14 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/test_api.py::test_root_endpoint 2025-07-30 08:06:14 [info     ] Migration sequence is valid
2025-07-30 08:06:14 [info     ] Applying 5 pending migrations
2025-07-30 08:06:14 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:14 [info     ] Applying initial schema migration
2025-07-30 08:06:14 [info     ] Initial schema migration completed
2025-07-30 08:06:14 [info     ] Successfully applied migration 1
2025-07-30 08:06:14 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:14 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:14 [info     ] Successfully applied migration 2
2025-07-30 08:06:14 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:14 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:14 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:14 [info     ] Successfully applied migration 3
2025-07-30 08:06:14 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:14 [info     ] Applying scene dependencies migration
2025-07-30 08:06:14 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:14 [info     ] Successfully applied migration 4
2025-07-30 08:06:14 [info     ] Applying Migration 0:
2025-07-30 08:06:14 [info     ] Applying Script Bible migration
2025-07-30 08:06:14 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:14 [info     ] Successfully applied migration 5
2025-07-30 08:06:14 [info     ] Database migration completed successfully
2025-07-30 08:06:14 [info     ] Starting ScriptRAG API
2025-07-30 08:06:14 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:06:14 [info     ] Migration sequence is valid
2025-07-30 08:06:14 [info     ] Database is already at latest version
2025-07-30 08:06:14 [debug    ] Creating new database connection to /tmp/tmp35zku6l9.db
2025-07-30 08:06:14 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:14 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmp35zku6l9.db
[32mPASSED[0m2025-07-30 08:06:15 [info     ] Shutting down ScriptRAG API

tests/test_api.py::test_health_endpoint 2025-07-30 08:06:15 [info     ] Migration sequence is valid
2025-07-30 08:06:15 [info     ] Applying 5 pending migrations
2025-07-30 08:06:15 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:15 [info     ] Applying initial schema migration
2025-07-30 08:06:15 [info     ] Initial schema migration completed
2025-07-30 08:06:15 [info     ] Successfully applied migration 1
2025-07-30 08:06:15 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:15 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:15 [info     ] Successfully applied migration 2
2025-07-30 08:06:15 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:15 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:15 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:15 [info     ] Successfully applied migration 3
2025-07-30 08:06:15 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:15 [info     ] Applying scene dependencies migration
2025-07-30 08:06:15 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:15 [info     ] Successfully applied migration 4
2025-07-30 08:06:15 [info     ] Applying Migration 0:
2025-07-30 08:06:15 [info     ] Applying Script Bible migration
2025-07-30 08:06:15 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:15 [info     ] Successfully applied migration 5
2025-07-30 08:06:15 [info     ] Database migration completed successfully
2025-07-30 08:06:15 [info     ] Starting ScriptRAG API
2025-07-30 08:06:15 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:06:15 [info     ] Migration sequence is valid
2025-07-30 08:06:15 [info     ] Database is already at latest version
2025-07-30 08:06:15 [debug    ] Creating new database connection to /tmp/tmp17mjy1ze.db
2025-07-30 08:06:15 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:15 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmp17mjy1ze.db
[32mPASSED[0m2025-07-30 08:06:15 [info     ] Shutting down ScriptRAG API

tests/test_api.py::test_list_scripts_empty 2025-07-30 08:06:16 [info     ] Migration sequence is valid
2025-07-30 08:06:16 [info     ] Applying 5 pending migrations
2025-07-30 08:06:16 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:16 [info     ] Applying initial schema migration
2025-07-30 08:06:16 [info     ] Initial schema migration completed
2025-07-30 08:06:16 [info     ] Successfully applied migration 1
2025-07-30 08:06:16 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:16 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:16 [info     ] Successfully applied migration 2
2025-07-30 08:06:16 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:16 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:16 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:16 [info     ] Successfully applied migration 3
2025-07-30 08:06:16 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:16 [info     ] Applying scene dependencies migration
2025-07-30 08:06:16 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:16 [info     ] Successfully applied migration 4
2025-07-30 08:06:16 [info     ] Applying Migration 0:
2025-07-30 08:06:16 [info     ] Applying Script Bible migration
2025-07-30 08:06:16 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:16 [info     ] Successfully applied migration 5
2025-07-30 08:06:16 [info     ] Database migration completed successfully
2025-07-30 08:06:16 [info     ] Starting ScriptRAG API
2025-07-30 08:06:16 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:06:16 [info     ] Migration sequence is valid
2025-07-30 08:06:16 [info     ] Database is already at latest version
2025-07-30 08:06:16 [debug    ] Creating new database connection to /tmp/tmpd3u26rrc.db
2025-07-30 08:06:16 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:16 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmpd3u26rrc.db
[32mPASSED[0m2025-07-30 08:06:16 [info     ] Shutting down ScriptRAG API

tests/test_api.py::test_script_not_found 2025-07-30 08:06:16 [info     ] Migration sequence is valid
2025-07-30 08:06:16 [info     ] Applying 5 pending migrations
2025-07-30 08:06:16 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:16 [info     ] Applying initial schema migration
2025-07-30 08:06:16 [info     ] Initial schema migration completed
2025-07-30 08:06:16 [info     ] Successfully applied migration 1
2025-07-30 08:06:16 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:16 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:16 [info     ] Successfully applied migration 2
2025-07-30 08:06:16 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:16 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:16 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:16 [info     ] Successfully applied migration 3
2025-07-30 08:06:16 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:16 [info     ] Applying scene dependencies migration
2025-07-30 08:06:17 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:17 [info     ] Successfully applied migration 4
2025-07-30 08:06:17 [info     ] Applying Migration 0:
2025-07-30 08:06:17 [info     ] Applying Script Bible migration
2025-07-30 08:06:17 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:17 [info     ] Successfully applied migration 5
2025-07-30 08:06:17 [info     ] Database migration completed successfully
2025-07-30 08:06:17 [info     ] Starting ScriptRAG API
2025-07-30 08:06:17 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:06:17 [info     ] Migration sequence is valid
2025-07-30 08:06:17 [info     ] Database is already at latest version
2025-07-30 08:06:17 [debug    ] Creating new database connection to /tmp/tmpkvx481n9.db
2025-07-30 08:06:17 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:17 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmpkvx481n9.db
[32mPASSED[0m2025-07-30 08:06:17 [info     ] Shutting down ScriptRAG API

tests/test_api.py::test_upload_script 2025-07-30 08:06:17 [info     ] Migration sequence is valid
2025-07-30 08:06:17 [info     ] Applying 5 pending migrations
2025-07-30 08:06:17 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:17 [info     ] Applying initial schema migration
2025-07-30 08:06:17 [info     ] Initial schema migration completed
2025-07-30 08:06:17 [info     ] Successfully applied migration 1
2025-07-30 08:06:17 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:17 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:17 [info     ] Successfully applied migration 2
2025-07-30 08:06:17 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:17 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:17 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:17 [info     ] Successfully applied migration 3
2025-07-30 08:06:17 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:17 [info     ] Applying scene dependencies migration
2025-07-30 08:06:17 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:17 [info     ] Successfully applied migration 4
2025-07-30 08:06:17 [info     ] Applying Migration 0:
2025-07-30 08:06:17 [info     ] Applying Script Bible migration
2025-07-30 08:06:17 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:17 [info     ] Successfully applied migration 5
2025-07-30 08:06:17 [info     ] Database migration completed successfully
2025-07-30 08:06:17 [info     ] Starting ScriptRAG API
2025-07-30 08:06:17 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:06:17 [info     ] Migration sequence is valid
2025-07-30 08:06:17 [info     ] Database is already at latest version
2025-07-30 08:06:17 [debug    ] Creating new database connection to /tmp/tmp5kioy5ak.db
2025-07-30 08:06:17 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:17 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmp5kioy5ak.db
2025-07-30 08:06:17 [debug    ] Transaction committed successfully
2025-07-30 08:06:17 [debug    ] Transaction committed successfully
2025-07-30 08:06:17 [debug    ] Added node 551413cb-8df4-497c-a3a3-676ecc8c6b9f of type script
2025-07-30 08:06:17 [info     ] Created script graph node 551413cb-8df4-497c-a3a3-676ecc8c6b9f for 'Test Script'
2025-07-30 08:06:17 [debug    ] Transaction committed successfully
2025-07-30 08:06:17 [debug    ] Added node 7e4825a3-8141-4537-9e5c-ec676fcc2943 of type scene
2025-07-30 08:06:17 [debug    ] Transaction committed successfully
2025-07-30 08:06:17 [debug    ] Added edge 4075be66-2bcb-4972-b47e-452ccaf22390: 551413cb-8df4-497c-a3a3-676ecc8c6b9f -HAS_SCENE-> 7e4825a3-8141-4537-9e5c-ec676fcc2943
2025-07-30 08:06:17 [debug    ] Created scene node 1
2025-07-30 08:06:17 [info     ] Stored script                  script_id=44f2c67f-d07f-4c1d-b4c5-a0fc801c71d9 title='Test Script'
[32mPASSED[0m2025-07-30 08:06:17 [info     ] Shutting down ScriptRAG API

tests/test_api.py::test_scene_search_invalid_params 2025-07-30 08:06:18 [info     ] Migration sequence is valid
2025-07-30 08:06:18 [info     ] Applying 5 pending migrations
2025-07-30 08:06:18 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:18 [info     ] Applying initial schema migration
2025-07-30 08:06:18 [info     ] Initial schema migration completed
2025-07-30 08:06:18 [info     ] Successfully applied migration 1
2025-07-30 08:06:18 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:18 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:18 [info     ] Successfully applied migration 2
2025-07-30 08:06:18 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:18 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:18 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:18 [info     ] Successfully applied migration 3
2025-07-30 08:06:18 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:18 [info     ] Applying scene dependencies migration
2025-07-30 08:06:18 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:18 [info     ] Successfully applied migration 4
2025-07-30 08:06:18 [info     ] Applying Migration 0:
2025-07-30 08:06:18 [info     ] Applying Script Bible migration
2025-07-30 08:06:18 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:18 [info     ] Successfully applied migration 5
2025-07-30 08:06:18 [info     ] Database migration completed successfully
2025-07-30 08:06:18 [info     ] Starting ScriptRAG API
2025-07-30 08:06:18 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:06:18 [info     ] Migration sequence is valid
2025-07-30 08:06:18 [info     ] Database is already at latest version
2025-07-30 08:06:18 [debug    ] Creating new database connection to /tmp/tmp1vfyprze.db
2025-07-30 08:06:18 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:18 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmp1vfyprze.db
[32mPASSED[0m2025-07-30 08:06:18 [info     ] Shutting down ScriptRAG API

tests/test_api.py::test_semantic_search_missing_query 2025-07-30 08:06:19 [info     ] Migration sequence is valid
2025-07-30 08:06:19 [info     ] Applying 5 pending migrations
2025-07-30 08:06:19 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:19 [info     ] Applying initial schema migration
2025-07-30 08:06:19 [info     ] Initial schema migration completed
2025-07-30 08:06:19 [info     ] Successfully applied migration 1
2025-07-30 08:06:19 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:19 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:19 [info     ] Successfully applied migration 2
2025-07-30 08:06:19 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:19 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:19 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:19 [info     ] Successfully applied migration 3
2025-07-30 08:06:19 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:19 [info     ] Applying scene dependencies migration
2025-07-30 08:06:19 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:19 [info     ] Successfully applied migration 4
2025-07-30 08:06:19 [info     ] Applying Migration 0:
2025-07-30 08:06:19 [info     ] Applying Script Bible migration
2025-07-30 08:06:19 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:19 [info     ] Successfully applied migration 5
2025-07-30 08:06:19 [info     ] Database migration completed successfully
2025-07-30 08:06:19 [info     ] Starting ScriptRAG API
2025-07-30 08:06:19 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:06:19 [info     ] Migration sequence is valid
2025-07-30 08:06:19 [info     ] Database is already at latest version
2025-07-30 08:06:19 [debug    ] Creating new database connection to /tmp/tmpwmtxwcod.db
2025-07-30 08:06:19 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:19 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmpwmtxwcod.db
[32mPASSED[0m2025-07-30 08:06:19 [info     ] Shutting down ScriptRAG API

tests/test_api.py::test_openapi_schema 2025-07-30 08:06:19 [info     ] Migration sequence is valid
2025-07-30 08:06:19 [info     ] Applying 5 pending migrations
2025-07-30 08:06:19 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:19 [info     ] Applying initial schema migration
2025-07-30 08:06:19 [info     ] Initial schema migration completed
2025-07-30 08:06:19 [info     ] Successfully applied migration 1
2025-07-30 08:06:19 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:19 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:19 [info     ] Successfully applied migration 2
2025-07-30 08:06:19 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:19 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:19 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:19 [info     ] Successfully applied migration 3
2025-07-30 08:06:19 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:19 [info     ] Applying scene dependencies migration
2025-07-30 08:06:19 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:19 [info     ] Successfully applied migration 4
2025-07-30 08:06:19 [info     ] Applying Migration 0:
2025-07-30 08:06:19 [info     ] Applying Script Bible migration
2025-07-30 08:06:20 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:20 [info     ] Successfully applied migration 5
2025-07-30 08:06:20 [info     ] Database migration completed successfully
2025-07-30 08:06:20 [info     ] Starting ScriptRAG API
2025-07-30 08:06:20 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:06:20 [info     ] Migration sequence is valid
2025-07-30 08:06:20 [info     ] Database is already at latest version
2025-07-30 08:06:20 [debug    ] Creating new database connection to /tmp/tmptln5gjpa.db
2025-07-30 08:06:20 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:20 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmptln5gjpa.db
[32mPASSED[0m2025-07-30 08:06:20 [info     ] Shutting down ScriptRAG API

tests/test_api.py::test_docs_available 2025-07-30 08:06:20 [info     ] Migration sequence is valid
2025-07-30 08:06:20 [info     ] Applying 5 pending migrations
2025-07-30 08:06:20 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:20 [info     ] Applying initial schema migration
2025-07-30 08:06:20 [info     ] Initial schema migration completed
2025-07-30 08:06:20 [info     ] Successfully applied migration 1
2025-07-30 08:06:20 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:20 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:20 [info     ] Successfully applied migration 2
2025-07-30 08:06:20 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:20 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:20 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:20 [info     ] Successfully applied migration 3
2025-07-30 08:06:20 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:20 [info     ] Applying scene dependencies migration
2025-07-30 08:06:20 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:20 [info     ] Successfully applied migration 4
2025-07-30 08:06:20 [info     ] Applying Migration 0:
2025-07-30 08:06:20 [info     ] Applying Script Bible migration
2025-07-30 08:06:20 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:20 [info     ] Successfully applied migration 5
2025-07-30 08:06:20 [info     ] Database migration completed successfully
2025-07-30 08:06:21 [info     ] Starting ScriptRAG API
2025-07-30 08:06:21 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:06:21 [info     ] Migration sequence is valid
2025-07-30 08:06:21 [info     ] Database is already at latest version
2025-07-30 08:06:21 [debug    ] Creating new database connection to /tmp/tmp19ttw_ss.db
2025-07-30 08:06:21 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:21 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmp19ttw_ss.db
[32mPASSED[0m2025-07-30 08:06:21 [info     ] Shutting down ScriptRAG API

tests/test_api_db_operations.py::TestDatabaseOperationsInitialization::test_initialize_success 2025-07-30 08:06:21 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:06:21 [info     ] Database operations initialized db_url=sqlite+aiosqlite:///test.db
[32mPASSED[0m
tests/test_api_db_operations.py::TestDatabaseOperationsInitialization::test_close_connection [32mPASSED[0m
tests/test_api_db_operations.py::TestScriptOperations::test_store_script_success 2025-07-30 08:06:21 [info     ] Stored script                  script_id=a87a0232-f889-46ec-8e19-2f9145f45005 title='Test Script'
[32mPASSED[0m
tests/test_api_db_operations.py::TestScriptOperations::test_store_script_no_connection [32mPASSED[0m
tests/test_api_db_operations.py::TestScriptOperations::test_get_script_success [32mPASSED[0m
tests/test_api_db_operations.py::TestScriptOperations::test_get_script_not_found [32mPASSED[0m
tests/test_api_db_operations.py::TestScriptOperations::test_get_script_invalid_json_metadata [32mPASSED[0m
tests/test_api_db_operations.py::TestScriptOperations::test_list_scripts_success 2025-07-30 08:06:21 [warning  ] list_scripts returning placeholder values placeholder_fields=['character_count', 'has_embeddings'] script_count=2
[32mPASSED[0m
tests/test_api_db_operations.py::TestScriptOperations::test_list_scripts_empty [32mPASSED[0m
tests/test_api_db_operations.py::TestScriptOperations::test_delete_script_success 2025-07-30 08:06:21 [info     ] Deleted script                 script_id=bf621953-e1d6-4c6a-8465-b082260354a7
[32mPASSED[0m
tests/test_api_db_operations.py::TestEmbeddingOperations::test_generate_embeddings_success [32mPASSED[0m
tests/test_api_db_operations.py::TestEmbeddingOperations::test_generate_embeddings_no_pipeline [32mPASSED[0m
tests/test_api_db_operations.py::TestHelperMethods::test_extract_characters [32mPASSED[0m
tests/test_api_db_operations.py::TestHelperMethods::test_extract_characters_empty [32mPASSED[0m
tests/test_api_db_operations.py::TestHelperMethods::test_extract_characters_no_dialogue [32mPASSED[0m
tests/test_api_db_operations.py::TestHelperMethods::test_extract_characters_with_parentheticals [32mPASSED[0m
tests/test_api_db_operations.py::TestSceneOperations::test_get_scene_success [32mPASSED[0m
tests/test_api_db_operations.py::TestSceneOperations::test_create_scene_success [32mPASSED[0m
tests/test_api_db_operations.py::TestSceneOperations::test_update_scene_success [32mPASSED[0m
tests/test_api_db_operations.py::TestSceneOperations::test_delete_scene_success [32mPASSED[0m
tests/test_api_db_operations.py::TestSceneOperations::test_shift_scene_numbers_success [32mPASSED[0m
tests/test_api_embeddings.py::TestEmbeddingGenerationEndpoint::test_generate_embeddings_success [32mPASSED[0m
tests/test_api_embeddings.py::TestEmbeddingGenerationEndpoint::test_generate_embeddings_with_regenerate [32mPASSED[0m
tests/test_api_embeddings.py::TestEmbeddingGenerationEndpoint::test_generate_embeddings_script_not_found [32mPASSED[0m
tests/test_api_embeddings.py::TestEmbeddingGenerationEndpoint::test_generate_embeddings_processing_error 2025-07-30 08:06:21 [error    ] Failed to generate embeddings  error='Embedding model unavailable' script_id=b8dada30-4cd2-483e-8ec0-a2e8a8cf0814
[32mPASSED[0m
tests/test_api_embeddings.py::TestEmbeddingGenerationEndpoint::test_generate_embeddings_default_regenerate [32mPASSED[0m
tests/test_api_embeddings.py::TestEmbeddingStatusEndpoint::test_get_embedding_status_complete [32mPASSED[0m
tests/test_api_embeddings.py::TestEmbeddingStatusEndpoint::test_get_embedding_status_partial [32mPASSED[0m
tests/test_api_embeddings.py::TestEmbeddingStatusEndpoint::test_get_embedding_status_no_scenes [32mPASSED[0m
tests/test_api_embeddings.py::TestEmbeddingStatusEndpoint::test_get_embedding_status_script_not_found [32mPASSED[0m
tests/test_api_embeddings.py::TestEmbeddingStatusEndpoint::test_get_embedding_status_database_error 2025-07-30 08:06:22 [error    ] Failed to get embedding status error='Database connection lost' script_id=b7709077-764b-43a9-8904-5751fc247258
[32mPASSED[0m
tests/test_api_embeddings.py::TestEmbeddingStatusEndpoint::test_get_embedding_status_no_embeddings [32mPASSED[0m
tests/test_api_graphs.py::TestCharacterGraphEndpoint::test_get_character_graph_success [32mPASSED[0m
tests/test_api_graphs.py::TestCharacterGraphEndpoint::test_get_character_graph_empty_result [32mPASSED[0m
tests/test_api_graphs.py::TestCharacterGraphEndpoint::test_get_character_graph_database_error 2025-07-30 08:06:22 [error    ] Failed to get character graph  character=JOHN error='Database connection failed'
[32mPASSED[0m
tests/test_api_graphs.py::TestCharacterGraphEndpoint::test_get_character_graph_validation_error [32mPASSED[0m
tests/test_api_graphs.py::TestTimelineGraphEndpoint::test_get_timeline_graph_success [32mPASSED[0m
tests/test_api_graphs.py::TestTimelineGraphEndpoint::test_get_timeline_graph_script_not_found [32mPASSED[0m
tests/test_api_graphs.py::TestTimelineGraphEndpoint::test_get_timeline_graph_different_groupings [32mPASSED[0m
tests/test_api_graphs.py::TestLocationGraphEndpoint::test_get_location_graph_success [32mPASSED[0m
tests/test_api_graphs.py::TestLocationGraphEndpoint::test_get_location_graph_script_not_found [32mPASSED[0m
tests/test_api_graphs.py::TestLocationGraphEndpoint::test_get_location_graph_empty_script [32mPASSED[0m
tests/test_api_graphs.py::TestLocationGraphEndpoint::test_get_location_graph_database_error 2025-07-30 08:06:23 [error    ] Failed to get location graph   error='Database error' script_id=3df590a3-bf65-4864-a8e3-5a3898a951e2
[32mPASSED[0m
tests/test_api_graphs.py::TestGraphNodeTypeConversion::test_node_type_conversion [32mPASSED[0m
tests/test_api_scene_operations_phase_5_2.py::TestEnhancedSceneAPIEndpoints::test_enhanced_update_scene_success [32mPASSED[0m
tests/test_api_scene_operations_phase_5_2.py::TestEnhancedSceneAPIEndpoints::test_enhanced_update_scene_not_found [32mPASSED[0m
tests/test_api_scene_operations_phase_5_2.py::TestEnhancedSceneAPIEndpoints::test_enhanced_update_scene_failure [32mPASSED[0m
tests/test_api_scene_operations_phase_5_2.py::TestEnhancedSceneAPIEndpoints::test_enhanced_delete_scene_success [32mPASSED[0m
tests/test_api_scene_operations_phase_5_2.py::TestEnhancedSceneAPIEndpoints::test_enhanced_delete_scene_not_found [32mPASSED[0m
tests/test_api_scene_operations_phase_5_2.py::TestEnhancedSceneAPIEndpoints::test_enhanced_delete_scene_failure [32mPASSED[0m
tests/test_api_scene_operations_phase_5_2.py::TestEnhancedSceneAPIEndpoints::test_inject_scene_at_position_success [32mPASSED[0m
tests/test_api_scene_operations_phase_5_2.py::TestEnhancedSceneAPIEndpoints::test_inject_scene_reference_not_found [32mPASSED[0m
tests/test_api_scene_operations_phase_5_2.py::TestEnhancedSceneAPIEndpoints::test_inject_scene_failure [32mPASSED[0m
tests/test_api_scene_operations_phase_5_2.py::TestEnhancedSceneAPIEndpoints::test_validate_story_continuity_success [32mPASSED[0m
tests/test_api_scene_operations_phase_5_2.py::TestEnhancedSceneAPIEndpoints::test_validate_story_continuity_script_not_found [32mPASSED[0m
tests/test_api_scene_operations_phase_5_2.py::TestEnhancedSceneAPIEndpoints::test_update_scene_metadata_success [32mPASSED[0m
tests/test_api_scene_operations_phase_5_2.py::TestEnhancedSceneAPIEndpoints::test_update_scene_metadata_not_found [32mPASSED[0m
tests/test_api_scene_operations_phase_5_2.py::TestEnhancedSceneAPIEndpoints::test_update_scene_metadata_failure [32mPASSED[0m
tests/test_api_scene_operations_phase_5_2.py::TestSceneOperationsAPIIntegration::test_api_endpoint_registration [32mPASSED[0m
tests/test_api_scene_operations_phase_5_2.py::TestSceneOperationsAPIIntegration::test_scene_update_request_schema [32mPASSED[0m
tests/test_api_scene_operations_phase_5_2.py::TestSceneOperationsAPIIntegration::test_optional_fields_in_update_request [32mPASSED[0m
tests/test_api_scene_operations_phase_5_2.py::TestSceneOperationsAPIIntegration::test_error_handling_consistency 2025-07-30 08:06:24 [error    ] Failed to update scene         error='Database error' scene_id=scene_001
2025-07-30 08:06:24 [error    ] Failed to delete scene         error='Database error' scene_id=scene_001
2025-07-30 08:06:24 [error    ] Failed to inject scene at position error='Database error' position=1 scene_id=scene_001
[32mPASSED[0m
tests/test_api_scene_ordering.py::TestSceneOrderingEndpoints::test_reorder_scenes 2025-07-30 08:06:24 [info     ] Migration sequence is valid
2025-07-30 08:06:24 [info     ] Applying 5 pending migrations
2025-07-30 08:06:24 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:24 [info     ] Applying initial schema migration
2025-07-30 08:06:24 [info     ] Initial schema migration completed
2025-07-30 08:06:24 [info     ] Successfully applied migration 1
2025-07-30 08:06:24 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:24 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:24 [info     ] Successfully applied migration 2
2025-07-30 08:06:24 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:24 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:24 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:24 [info     ] Successfully applied migration 3
2025-07-30 08:06:24 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:24 [info     ] Applying scene dependencies migration
2025-07-30 08:06:24 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:24 [info     ] Successfully applied migration 4
2025-07-30 08:06:24 [info     ] Applying Migration 0:
2025-07-30 08:06:24 [info     ] Applying Script Bible migration
2025-07-30 08:06:24 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:24 [info     ] Successfully applied migration 5
2025-07-30 08:06:24 [info     ] Database migration completed successfully
2025-07-30 08:06:24 [info     ] Starting ScriptRAG API
2025-07-30 08:06:24 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:06:24 [info     ] Migration sequence is valid
2025-07-30 08:06:24 [info     ] Database is already at latest version
2025-07-30 08:06:24 [debug    ] Creating new database connection to /tmp/tmphhcxo6_q.db
2025-07-30 08:06:24 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:24 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmphhcxo6_q.db
2025-07-30 08:06:24 [debug    ] Transaction committed successfully
2025-07-30 08:06:24 [debug    ] Transaction committed successfully
2025-07-30 08:06:24 [debug    ] Added node a1e62c48-b8fe-4644-b9d3-78a85aa456b0 of type script
2025-07-30 08:06:24 [info     ] Created script graph node a1e62c48-b8fe-4644-b9d3-78a85aa456b0 for 'Test Script'
2025-07-30 08:06:24 [debug    ] Transaction committed successfully
2025-07-30 08:06:24 [debug    ] Added node c2a0fcf6-ce13-466b-8b19-647259e17fe1 of type scene
2025-07-30 08:06:24 [debug    ] Transaction committed successfully
2025-07-30 08:06:24 [debug    ] Added edge 79dd2dbb-40eb-4274-baab-7553ec93a044: a1e62c48-b8fe-4644-b9d3-78a85aa456b0 -HAS_SCENE-> c2a0fcf6-ce13-466b-8b19-647259e17fe1
2025-07-30 08:06:24 [debug    ] Created scene node 1
2025-07-30 08:06:24 [debug    ] Transaction committed successfully
2025-07-30 08:06:24 [debug    ] Added node 90e2693c-00b7-4fe2-a7fb-3199261bd0ca of type scene
2025-07-30 08:06:24 [debug    ] Transaction committed successfully
2025-07-30 08:06:24 [debug    ] Added edge c8e9518d-8fb3-4de2-838a-d0aae2a72ec7: a1e62c48-b8fe-4644-b9d3-78a85aa456b0 -HAS_SCENE-> 90e2693c-00b7-4fe2-a7fb-3199261bd0ca
2025-07-30 08:06:24 [debug    ] Created scene node 2
2025-07-30 08:06:24 [debug    ] Transaction committed successfully
2025-07-30 08:06:24 [debug    ] Added node 5cd055e7-9d71-4087-a200-e9445478ef5e of type scene
2025-07-30 08:06:24 [debug    ] Transaction committed successfully
2025-07-30 08:06:24 [debug    ] Added edge 1e066e4e-6afa-4b83-acd7-f4bc956b03ea: a1e62c48-b8fe-4644-b9d3-78a85aa456b0 -HAS_SCENE-> 5cd055e7-9d71-4087-a200-e9445478ef5e
2025-07-30 08:06:24 [debug    ] Created scene node 3
2025-07-30 08:06:24 [debug    ] Transaction committed successfully
2025-07-30 08:06:24 [debug    ] Added node 18d1f10d-3a15-4a7b-b8b5-39e01814bffa of type scene
2025-07-30 08:06:24 [debug    ] Transaction committed successfully
2025-07-30 08:06:24 [debug    ] Added edge ffd635b4-bff5-4fdb-a70d-e107bebfc283: a1e62c48-b8fe-4644-b9d3-78a85aa456b0 -HAS_SCENE-> 18d1f10d-3a15-4a7b-b8b5-39e01814bffa
2025-07-30 08:06:24 [debug    ] Created scene node 4
2025-07-30 08:06:24 [debug    ] Transaction committed successfully
2025-07-30 08:06:24 [debug    ] Added node 52fa0760-d474-4698-8fae-e9bc258c9778 of type scene
2025-07-30 08:06:24 [debug    ] Transaction committed successfully
2025-07-30 08:06:24 [debug    ] Added edge ce1c976a-0004-4f9b-bc74-e9b36692f75c: a1e62c48-b8fe-4644-b9d3-78a85aa456b0 -HAS_SCENE-> 52fa0760-d474-4698-8fae-e9bc258c9778
2025-07-30 08:06:24 [debug    ] Created scene node 5
2025-07-30 08:06:24 [info     ] Stored script                  script_id=c3ad622c-5e60-4cfd-ae78-953c16c06f82 title='Test Script'
2025-07-30 08:06:24 [info     ] Updated script order for 5 scenes
2025-07-30 08:06:24 [debug    ] Transaction committed successfully
[32mPASSED[0m2025-07-30 08:06:24 [info     ] Shutting down ScriptRAG API

tests/test_api_scene_ordering.py::TestSceneOrderingEndpoints::test_infer_temporal_order 2025-07-30 08:06:25 [info     ] Migration sequence is valid
2025-07-30 08:06:25 [info     ] Applying 5 pending migrations
2025-07-30 08:06:25 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:25 [info     ] Applying initial schema migration
2025-07-30 08:06:25 [info     ] Initial schema migration completed
2025-07-30 08:06:25 [info     ] Successfully applied migration 1
2025-07-30 08:06:25 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:25 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:25 [info     ] Successfully applied migration 2
2025-07-30 08:06:25 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:25 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:25 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:25 [info     ] Successfully applied migration 3
2025-07-30 08:06:25 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:25 [info     ] Applying scene dependencies migration
2025-07-30 08:06:25 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:25 [info     ] Successfully applied migration 4
2025-07-30 08:06:25 [info     ] Applying Migration 0:
2025-07-30 08:06:25 [info     ] Applying Script Bible migration
2025-07-30 08:06:25 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:25 [info     ] Successfully applied migration 5
2025-07-30 08:06:25 [info     ] Database migration completed successfully
2025-07-30 08:06:25 [info     ] Starting ScriptRAG API
2025-07-30 08:06:25 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:06:25 [info     ] Migration sequence is valid
2025-07-30 08:06:25 [info     ] Database is already at latest version
2025-07-30 08:06:25 [debug    ] Creating new database connection to /tmp/tmprtcsv5ew.db
2025-07-30 08:06:25 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:25 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmprtcsv5ew.db
2025-07-30 08:06:25 [debug    ] Transaction committed successfully
2025-07-30 08:06:25 [debug    ] Transaction committed successfully
2025-07-30 08:06:25 [debug    ] Added node 4102388f-d88f-4505-9fa2-b68d5bc23a56 of type script
2025-07-30 08:06:25 [info     ] Created script graph node 4102388f-d88f-4505-9fa2-b68d5bc23a56 for 'Test Script'
2025-07-30 08:06:25 [debug    ] Transaction committed successfully
2025-07-30 08:06:25 [debug    ] Added node e85e026a-5209-4f78-a974-caa9dd85a165 of type scene
2025-07-30 08:06:25 [debug    ] Transaction committed successfully
2025-07-30 08:06:25 [debug    ] Added edge 2cb550ca-1411-4980-b2a5-e5aaff2463ce: 4102388f-d88f-4505-9fa2-b68d5bc23a56 -HAS_SCENE-> e85e026a-5209-4f78-a974-caa9dd85a165
2025-07-30 08:06:25 [debug    ] Created scene node 1
2025-07-30 08:06:25 [debug    ] Transaction committed successfully
2025-07-30 08:06:25 [debug    ] Added node 1ea97f5c-577d-4725-a182-31806de79052 of type scene
2025-07-30 08:06:25 [debug    ] Transaction committed successfully
2025-07-30 08:06:25 [debug    ] Added edge e42c63fd-0ce3-49e7-96f7-e953cd78fea3: 4102388f-d88f-4505-9fa2-b68d5bc23a56 -HAS_SCENE-> 1ea97f5c-577d-4725-a182-31806de79052
2025-07-30 08:06:25 [debug    ] Created scene node 2
2025-07-30 08:06:25 [debug    ] Transaction committed successfully
2025-07-30 08:06:25 [debug    ] Added node fe61ce38-b700-4bbd-a928-e0bc8a389108 of type scene
2025-07-30 08:06:25 [debug    ] Transaction committed successfully
2025-07-30 08:06:25 [debug    ] Added edge fbdf538c-a26c-4ec8-aa69-55d5796180ed: 4102388f-d88f-4505-9fa2-b68d5bc23a56 -HAS_SCENE-> fe61ce38-b700-4bbd-a928-e0bc8a389108
2025-07-30 08:06:25 [debug    ] Created scene node 3
2025-07-30 08:06:25 [debug    ] Transaction committed successfully
2025-07-30 08:06:25 [debug    ] Added node f73aa17f-dd71-4bfd-a818-d5e5d7798eb8 of type scene
2025-07-30 08:06:25 [debug    ] Transaction committed successfully
2025-07-30 08:06:25 [debug    ] Added edge d74daada-2dd6-4d97-bc58-04275da77dd8: 4102388f-d88f-4505-9fa2-b68d5bc23a56 -HAS_SCENE-> f73aa17f-dd71-4bfd-a818-d5e5d7798eb8
2025-07-30 08:06:25 [debug    ] Created scene node 4
2025-07-30 08:06:25 [debug    ] Transaction committed successfully
2025-07-30 08:06:25 [debug    ] Added node 7fd8be3f-684f-4db8-ae22-b3f7b4d1f161 of type scene
2025-07-30 08:06:25 [debug    ] Transaction committed successfully
2025-07-30 08:06:25 [debug    ] Added edge ec747989-39ef-460a-b37b-cf6240b35efc: 4102388f-d88f-4505-9fa2-b68d5bc23a56 -HAS_SCENE-> 7fd8be3f-684f-4db8-ae22-b3f7b4d1f161
2025-07-30 08:06:25 [debug    ] Created scene node 5
2025-07-30 08:06:25 [info     ] Stored script                  script_id=8295a241-e831-47c9-84e5-aa7ecf4a8ea1 title='Test Script'
2025-07-30 08:06:25 [debug    ] Transaction committed successfully
2025-07-30 08:06:25 [info     ] Inferred temporal order for 5 scenes
[32mPASSED[0m2025-07-30 08:06:25 [info     ] Shutting down ScriptRAG API

tests/test_api_scene_ordering.py::TestSceneOrderingEndpoints::test_analyze_dependencies 2025-07-30 08:06:25 [info     ] Migration sequence is valid
2025-07-30 08:06:25 [info     ] Applying 5 pending migrations
2025-07-30 08:06:25 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:25 [info     ] Applying initial schema migration
2025-07-30 08:06:25 [info     ] Initial schema migration completed
2025-07-30 08:06:25 [info     ] Successfully applied migration 1
2025-07-30 08:06:25 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:25 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:25 [info     ] Successfully applied migration 2
2025-07-30 08:06:25 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:25 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:26 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:26 [info     ] Successfully applied migration 3
2025-07-30 08:06:26 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:26 [info     ] Applying scene dependencies migration
2025-07-30 08:06:26 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:26 [info     ] Successfully applied migration 4
2025-07-30 08:06:26 [info     ] Applying Migration 0:
2025-07-30 08:06:26 [info     ] Applying Script Bible migration
2025-07-30 08:06:26 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:26 [info     ] Successfully applied migration 5
2025-07-30 08:06:26 [info     ] Database migration completed successfully
2025-07-30 08:06:26 [info     ] Starting ScriptRAG API
2025-07-30 08:06:26 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:06:26 [info     ] Migration sequence is valid
2025-07-30 08:06:26 [info     ] Database is already at latest version
2025-07-30 08:06:26 [debug    ] Creating new database connection to /tmp/tmp5xjuvg3m.db
2025-07-30 08:06:26 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:26 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmp5xjuvg3m.db
2025-07-30 08:06:26 [debug    ] Transaction committed successfully
2025-07-30 08:06:26 [debug    ] Transaction committed successfully
2025-07-30 08:06:26 [debug    ] Added node 43cd10ce-9728-4535-aaac-0dbbea39eb3f of type script
2025-07-30 08:06:26 [info     ] Created script graph node 43cd10ce-9728-4535-aaac-0dbbea39eb3f for 'Test Script'
2025-07-30 08:06:26 [debug    ] Transaction committed successfully
2025-07-30 08:06:26 [debug    ] Added node cccacda4-7e7c-4916-8e8f-59b387ea4752 of type scene
2025-07-30 08:06:26 [debug    ] Transaction committed successfully
2025-07-30 08:06:26 [debug    ] Added edge 2a5c5ecf-fe53-4fd3-b9eb-49a356a7534c: 43cd10ce-9728-4535-aaac-0dbbea39eb3f -HAS_SCENE-> cccacda4-7e7c-4916-8e8f-59b387ea4752
2025-07-30 08:06:26 [debug    ] Created scene node 1
2025-07-30 08:06:26 [debug    ] Transaction committed successfully
2025-07-30 08:06:26 [debug    ] Added node e2f0eb23-8b50-4ad0-b20a-3189f7474170 of type scene
2025-07-30 08:06:26 [debug    ] Transaction committed successfully
2025-07-30 08:06:26 [debug    ] Added edge 4cea60c3-744a-4ccd-8e09-86c4c78a9ec7: 43cd10ce-9728-4535-aaac-0dbbea39eb3f -HAS_SCENE-> e2f0eb23-8b50-4ad0-b20a-3189f7474170
2025-07-30 08:06:26 [debug    ] Created scene node 2
2025-07-30 08:06:26 [debug    ] Transaction committed successfully
2025-07-30 08:06:26 [debug    ] Added node 70bedcc9-31b3-4005-b290-6b3574bd7a26 of type scene
2025-07-30 08:06:26 [debug    ] Transaction committed successfully
2025-07-30 08:06:26 [debug    ] Added edge f89918fc-bc77-4e0d-a809-1d8bc81643c7: 43cd10ce-9728-4535-aaac-0dbbea39eb3f -HAS_SCENE-> 70bedcc9-31b3-4005-b290-6b3574bd7a26
2025-07-30 08:06:26 [debug    ] Created scene node 3
2025-07-30 08:06:26 [debug    ] Transaction committed successfully
2025-07-30 08:06:26 [debug    ] Added node bbee197d-e35a-49dc-9033-de19894eeaa8 of type scene
2025-07-30 08:06:26 [debug    ] Transaction committed successfully
2025-07-30 08:06:26 [debug    ] Added edge 62f22195-0034-4f29-a5e6-92c6e177f084: 43cd10ce-9728-4535-aaac-0dbbea39eb3f -HAS_SCENE-> bbee197d-e35a-49dc-9033-de19894eeaa8
2025-07-30 08:06:26 [debug    ] Created scene node 4
2025-07-30 08:06:26 [debug    ] Transaction committed successfully
2025-07-30 08:06:26 [debug    ] Added node 6cabc1da-f286-42a2-bb6f-3992d1892266 of type scene
2025-07-30 08:06:26 [debug    ] Transaction committed successfully
2025-07-30 08:06:26 [debug    ] Added edge 5e0efb7c-845d-447f-bfdb-7c187dd8abe4: 43cd10ce-9728-4535-aaac-0dbbea39eb3f -HAS_SCENE-> 6cabc1da-f286-42a2-bb6f-3992d1892266
2025-07-30 08:06:26 [debug    ] Created scene node 5
2025-07-30 08:06:26 [info     ] Stored script                  script_id=c4c4b173-7161-454a-968f-8ace56280bfd title='Test Script'
2025-07-30 08:06:26 [debug    ] Transaction committed successfully
2025-07-30 08:06:26 [info     ] Analyzed and created 1 scene dependencies
[32mPASSED[0m2025-07-30 08:06:26 [info     ] Shutting down ScriptRAG API

tests/test_api_scene_ordering.py::TestSceneOrderingEndpoints::test_get_scene_dependencies 2025-07-30 08:06:26 [info     ] Migration sequence is valid
2025-07-30 08:06:26 [info     ] Applying 5 pending migrations
2025-07-30 08:06:26 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:26 [info     ] Applying initial schema migration
2025-07-30 08:06:26 [info     ] Initial schema migration completed
2025-07-30 08:06:26 [info     ] Successfully applied migration 1
2025-07-30 08:06:26 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:26 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:26 [info     ] Successfully applied migration 2
2025-07-30 08:06:26 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:26 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:26 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:26 [info     ] Successfully applied migration 3
2025-07-30 08:06:26 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:26 [info     ] Applying scene dependencies migration
2025-07-30 08:06:26 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:26 [info     ] Successfully applied migration 4
2025-07-30 08:06:26 [info     ] Applying Migration 0:
2025-07-30 08:06:26 [info     ] Applying Script Bible migration
2025-07-30 08:06:27 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:27 [info     ] Successfully applied migration 5
2025-07-30 08:06:27 [info     ] Database migration completed successfully
2025-07-30 08:06:27 [info     ] Starting ScriptRAG API
2025-07-30 08:06:27 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:06:27 [info     ] Migration sequence is valid
2025-07-30 08:06:27 [info     ] Database is already at latest version
2025-07-30 08:06:27 [debug    ] Creating new database connection to /tmp/tmpam3rdev8.db
2025-07-30 08:06:27 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:27 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmpam3rdev8.db
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added node 0093253e-5a2e-46d4-9d3c-09dbb8f6ded9 of type script
2025-07-30 08:06:27 [info     ] Created script graph node 0093253e-5a2e-46d4-9d3c-09dbb8f6ded9 for 'Test Script'
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added node 8334e9e8-4000-4a12-a21d-bc8923ea5eb7 of type scene
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added edge f10399fb-21ea-444b-b85b-ba61658f9c7b: 0093253e-5a2e-46d4-9d3c-09dbb8f6ded9 -HAS_SCENE-> 8334e9e8-4000-4a12-a21d-bc8923ea5eb7
2025-07-30 08:06:27 [debug    ] Created scene node 1
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added node 081a8a3f-f7b5-4796-8844-b01f3d480f8f of type scene
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added edge 5fd12ac9-8b83-4e2f-bc2c-c65ef394d3d9: 0093253e-5a2e-46d4-9d3c-09dbb8f6ded9 -HAS_SCENE-> 081a8a3f-f7b5-4796-8844-b01f3d480f8f
2025-07-30 08:06:27 [debug    ] Created scene node 2
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added node 5f1f36c1-dabd-4ada-8880-468aceb77ca2 of type scene
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added edge 39d86e82-30ed-41a4-a038-18bda96a7956: 0093253e-5a2e-46d4-9d3c-09dbb8f6ded9 -HAS_SCENE-> 5f1f36c1-dabd-4ada-8880-468aceb77ca2
2025-07-30 08:06:27 [debug    ] Created scene node 3
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added node 5d6b9b92-0348-493f-9efa-fc293b65c6ed of type scene
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added edge d8b993c0-d0d7-45be-b0ed-27bde2ccec59: 0093253e-5a2e-46d4-9d3c-09dbb8f6ded9 -HAS_SCENE-> 5d6b9b92-0348-493f-9efa-fc293b65c6ed
2025-07-30 08:06:27 [debug    ] Created scene node 4
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added node c326fef2-a3c7-4fce-bfdf-0fc82ca8f2b5 of type scene
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added edge 9776a4f5-355e-4b5e-afa5-3e7dfa26f9ca: 0093253e-5a2e-46d4-9d3c-09dbb8f6ded9 -HAS_SCENE-> c326fef2-a3c7-4fce-bfdf-0fc82ca8f2b5
2025-07-30 08:06:27 [debug    ] Created scene node 5
2025-07-30 08:06:27 [info     ] Stored script                  script_id=5b7aabdb-5ac2-4d0b-88eb-4d29740a4c00 title='Test Script'
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [info     ] Analyzed and created 1 scene dependencies
[32mPASSED[0m2025-07-30 08:06:27 [info     ] Shutting down ScriptRAG API

tests/test_api_scene_ordering.py::TestSceneOrderingEndpoints::test_get_scene_dependencies_invalid_direction 2025-07-30 08:06:27 [info     ] Migration sequence is valid
2025-07-30 08:06:27 [info     ] Applying 5 pending migrations
2025-07-30 08:06:27 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:27 [info     ] Applying initial schema migration
2025-07-30 08:06:27 [info     ] Initial schema migration completed
2025-07-30 08:06:27 [info     ] Successfully applied migration 1
2025-07-30 08:06:27 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:27 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:27 [info     ] Successfully applied migration 2
2025-07-30 08:06:27 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:27 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:27 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:27 [info     ] Successfully applied migration 3
2025-07-30 08:06:27 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:27 [info     ] Applying scene dependencies migration
2025-07-30 08:06:27 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:27 [info     ] Successfully applied migration 4
2025-07-30 08:06:27 [info     ] Applying Migration 0:
2025-07-30 08:06:27 [info     ] Applying Script Bible migration
2025-07-30 08:06:27 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:27 [info     ] Successfully applied migration 5
2025-07-30 08:06:27 [info     ] Database migration completed successfully
2025-07-30 08:06:27 [info     ] Starting ScriptRAG API
2025-07-30 08:06:27 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:06:27 [info     ] Migration sequence is valid
2025-07-30 08:06:27 [info     ] Database is already at latest version
2025-07-30 08:06:27 [debug    ] Creating new database connection to /tmp/tmpzx3634_9.db
2025-07-30 08:06:27 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:27 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmpzx3634_9.db
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added node c298ba02-f3e9-4993-b1e5-b3e661dc381d of type script
2025-07-30 08:06:27 [info     ] Created script graph node c298ba02-f3e9-4993-b1e5-b3e661dc381d for 'Test Script'
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added node 35ab4fb2-a148-4da4-8b0a-bddd379be4de of type scene
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added edge 0905eb1a-474b-4955-afe1-3a8cac7488ad: c298ba02-f3e9-4993-b1e5-b3e661dc381d -HAS_SCENE-> 35ab4fb2-a148-4da4-8b0a-bddd379be4de
2025-07-30 08:06:27 [debug    ] Created scene node 1
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added node 52643390-b300-4ecb-aebc-f73e5a0b2597 of type scene
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added edge 953a006c-0795-408b-9769-c38ee5a1e434: c298ba02-f3e9-4993-b1e5-b3e661dc381d -HAS_SCENE-> 52643390-b300-4ecb-aebc-f73e5a0b2597
2025-07-30 08:06:27 [debug    ] Created scene node 2
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added node 6df2d48d-3e38-40e2-8a0e-d402f9f5cc53 of type scene
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added edge e758865b-6d3d-4809-b27e-d2db881598cf: c298ba02-f3e9-4993-b1e5-b3e661dc381d -HAS_SCENE-> 6df2d48d-3e38-40e2-8a0e-d402f9f5cc53
2025-07-30 08:06:27 [debug    ] Created scene node 3
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added node e587238d-7afe-411b-b320-90d3599838bb of type scene
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added edge 351fdb41-6a39-46c9-87db-8a4df5c0d3c3: c298ba02-f3e9-4993-b1e5-b3e661dc381d -HAS_SCENE-> e587238d-7afe-411b-b320-90d3599838bb
2025-07-30 08:06:27 [debug    ] Created scene node 4
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added node ee3293d8-8cc6-44fe-9c61-6e7ca28a9aa9 of type scene
2025-07-30 08:06:27 [debug    ] Transaction committed successfully
2025-07-30 08:06:27 [debug    ] Added edge 1784e7db-dbae-4847-b414-69edeb4ac0fc: c298ba02-f3e9-4993-b1e5-b3e661dc381d -HAS_SCENE-> ee3293d8-8cc6-44fe-9c61-6e7ca28a9aa9
2025-07-30 08:06:27 [debug    ] Created scene node 5
2025-07-30 08:06:27 [info     ] Stored script                  script_id=f17212c5-4b5f-47d1-80ce-acc0b62c9485 title='Test Script'
[32mPASSED[0m2025-07-30 08:06:27 [info     ] Shutting down ScriptRAG API

tests/test_api_scene_ordering.py::TestSceneOrderingEndpoints::test_calculate_logical_order 2025-07-30 08:06:28 [info     ] Migration sequence is valid
2025-07-30 08:06:28 [info     ] Applying 5 pending migrations
2025-07-30 08:06:28 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:28 [info     ] Applying initial schema migration
2025-07-30 08:06:28 [info     ] Initial schema migration completed
2025-07-30 08:06:28 [info     ] Successfully applied migration 1
2025-07-30 08:06:28 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:28 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:28 [info     ] Successfully applied migration 2
2025-07-30 08:06:28 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:28 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:28 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:28 [info     ] Successfully applied migration 3
2025-07-30 08:06:28 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:28 [info     ] Applying scene dependencies migration
2025-07-30 08:06:28 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:28 [info     ] Successfully applied migration 4
2025-07-30 08:06:28 [info     ] Applying Migration 0:
2025-07-30 08:06:28 [info     ] Applying Script Bible migration
2025-07-30 08:06:28 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:28 [info     ] Successfully applied migration 5
2025-07-30 08:06:28 [info     ] Database migration completed successfully
2025-07-30 08:06:28 [info     ] Starting ScriptRAG API
2025-07-30 08:06:28 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:06:28 [info     ] Migration sequence is valid
2025-07-30 08:06:28 [info     ] Database is already at latest version
2025-07-30 08:06:28 [debug    ] Creating new database connection to /tmp/tmptr78qr6d.db
2025-07-30 08:06:28 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:28 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmptr78qr6d.db
2025-07-30 08:06:28 [debug    ] Transaction committed successfully
2025-07-30 08:06:28 [debug    ] Transaction committed successfully
2025-07-30 08:06:28 [debug    ] Added node 1ac8b069-7ff1-4c41-a5e6-533797028256 of type script
2025-07-30 08:06:28 [info     ] Created script graph node 1ac8b069-7ff1-4c41-a5e6-533797028256 for 'Test Script'
2025-07-30 08:06:28 [debug    ] Transaction committed successfully
2025-07-30 08:06:28 [debug    ] Added node b5a3e605-b47a-41ec-83cd-baecc0560f7e of type scene
2025-07-30 08:06:28 [debug    ] Transaction committed successfully
2025-07-30 08:06:28 [debug    ] Added edge ff8aec65-1fa5-47a4-8c86-f41f855758ef: 1ac8b069-7ff1-4c41-a5e6-533797028256 -HAS_SCENE-> b5a3e605-b47a-41ec-83cd-baecc0560f7e
2025-07-30 08:06:28 [debug    ] Created scene node 1
2025-07-30 08:06:28 [debug    ] Transaction committed successfully
2025-07-30 08:06:28 [debug    ] Added node c9e9eda7-6682-4abc-ad68-e29720bbb0fc of type scene
2025-07-30 08:06:28 [debug    ] Transaction committed successfully
2025-07-30 08:06:28 [debug    ] Added edge c46fc6c2-59e4-4291-aa47-7c7423abd186: 1ac8b069-7ff1-4c41-a5e6-533797028256 -HAS_SCENE-> c9e9eda7-6682-4abc-ad68-e29720bbb0fc
2025-07-30 08:06:28 [debug    ] Created scene node 2
2025-07-30 08:06:28 [debug    ] Transaction committed successfully
2025-07-30 08:06:28 [debug    ] Added node e498fe21-18a1-400f-8c20-0022d1eff4a7 of type scene
2025-07-30 08:06:28 [debug    ] Transaction committed successfully
2025-07-30 08:06:28 [debug    ] Added edge 5be637d5-e7ae-4a19-a421-10c927037110: 1ac8b069-7ff1-4c41-a5e6-533797028256 -HAS_SCENE-> e498fe21-18a1-400f-8c20-0022d1eff4a7
2025-07-30 08:06:28 [debug    ] Created scene node 3
2025-07-30 08:06:28 [debug    ] Transaction committed successfully
2025-07-30 08:06:28 [debug    ] Added node c8e19e7d-01a2-4e2a-bab3-133a2dc78b67 of type scene
2025-07-30 08:06:28 [debug    ] Transaction committed successfully
2025-07-30 08:06:28 [debug    ] Added edge 728da40c-455d-4abe-83a4-8885bfa0b95c: 1ac8b069-7ff1-4c41-a5e6-533797028256 -HAS_SCENE-> c8e19e7d-01a2-4e2a-bab3-133a2dc78b67
2025-07-30 08:06:28 [debug    ] Created scene node 4
2025-07-30 08:06:28 [debug    ] Transaction committed successfully
2025-07-30 08:06:28 [debug    ] Added node 485f82a1-edd4-49d0-b1a4-6a773c4a1ffd of type scene
2025-07-30 08:06:28 [debug    ] Transaction committed successfully
2025-07-30 08:06:28 [debug    ] Added edge 717e775c-073c-48ce-b4d4-eec4565c43cc: 1ac8b069-7ff1-4c41-a5e6-533797028256 -HAS_SCENE-> 485f82a1-edd4-49d0-b1a4-6a773c4a1ffd
2025-07-30 08:06:28 [debug    ] Created scene node 5
2025-07-30 08:06:28 [info     ] Stored script                  script_id=3841c923-a90e-4c72-852d-feaf65918ea0 title='Test Script'
2025-07-30 08:06:28 [debug    ] Transaction committed successfully
2025-07-30 08:06:28 [info     ] Analyzed and created 1 scene dependencies
2025-07-30 08:06:28 [debug    ] Transaction committed successfully
[32mPASSED[0m2025-07-30 08:06:28 [info     ] Shutting down ScriptRAG API

tests/test_api_scene_ordering.py::TestSceneOrderingEndpoints::test_validate_ordering 2025-07-30 08:06:29 [info     ] Migration sequence is valid
2025-07-30 08:06:29 [info     ] Applying 5 pending migrations
2025-07-30 08:06:29 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:29 [info     ] Applying initial schema migration
2025-07-30 08:06:29 [info     ] Initial schema migration completed
2025-07-30 08:06:29 [info     ] Successfully applied migration 1
2025-07-30 08:06:29 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:29 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:29 [info     ] Successfully applied migration 2
2025-07-30 08:06:29 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:29 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:29 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:29 [info     ] Successfully applied migration 3
2025-07-30 08:06:29 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:29 [info     ] Applying scene dependencies migration
2025-07-30 08:06:29 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:29 [info     ] Successfully applied migration 4
2025-07-30 08:06:29 [info     ] Applying Migration 0:
2025-07-30 08:06:29 [info     ] Applying Script Bible migration
2025-07-30 08:06:29 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:29 [info     ] Successfully applied migration 5
2025-07-30 08:06:29 [info     ] Database migration completed successfully
2025-07-30 08:06:29 [info     ] Starting ScriptRAG API
2025-07-30 08:06:29 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:06:29 [info     ] Migration sequence is valid
2025-07-30 08:06:29 [info     ] Database is already at latest version
2025-07-30 08:06:29 [debug    ] Creating new database connection to /tmp/tmpy8ci44wl.db
2025-07-30 08:06:29 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:29 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmpy8ci44wl.db
2025-07-30 08:06:29 [debug    ] Transaction committed successfully
2025-07-30 08:06:29 [debug    ] Transaction committed successfully
2025-07-30 08:06:29 [debug    ] Added node 2db41106-1a7c-4696-8777-d5bad414c392 of type script
2025-07-30 08:06:29 [info     ] Created script graph node 2db41106-1a7c-4696-8777-d5bad414c392 for 'Test Script'
2025-07-30 08:06:29 [debug    ] Transaction committed successfully
2025-07-30 08:06:29 [debug    ] Added node b0736228-0520-4d8b-9abe-f3ed5ac72d23 of type scene
2025-07-30 08:06:29 [debug    ] Transaction committed successfully
2025-07-30 08:06:29 [debug    ] Added edge 877b9132-51e1-4922-8c54-19c5b5f0f611: 2db41106-1a7c-4696-8777-d5bad414c392 -HAS_SCENE-> b0736228-0520-4d8b-9abe-f3ed5ac72d23
2025-07-30 08:06:29 [debug    ] Created scene node 1
2025-07-30 08:06:29 [debug    ] Transaction committed successfully
2025-07-30 08:06:29 [debug    ] Added node d814a52c-baf0-4af7-916b-ca3f15ac178d of type scene
2025-07-30 08:06:29 [debug    ] Transaction committed successfully
2025-07-30 08:06:29 [debug    ] Added edge c9bcc7da-d9e7-4c6b-80f6-b331114453e4: 2db41106-1a7c-4696-8777-d5bad414c392 -HAS_SCENE-> d814a52c-baf0-4af7-916b-ca3f15ac178d
2025-07-30 08:06:29 [debug    ] Created scene node 2
2025-07-30 08:06:29 [debug    ] Transaction committed successfully
2025-07-30 08:06:29 [debug    ] Added node ed39c0a0-cce1-4cf2-949b-8c9b7c73c376 of type scene
2025-07-30 08:06:29 [debug    ] Transaction committed successfully
2025-07-30 08:06:29 [debug    ] Added edge b7aec9a0-3f88-47cc-9d3e-b6f18e4eab6a: 2db41106-1a7c-4696-8777-d5bad414c392 -HAS_SCENE-> ed39c0a0-cce1-4cf2-949b-8c9b7c73c376
2025-07-30 08:06:29 [debug    ] Created scene node 3
2025-07-30 08:06:29 [debug    ] Transaction committed successfully
2025-07-30 08:06:29 [debug    ] Added node 5c67f68b-2258-45d5-b939-09929de5382c of type scene
2025-07-30 08:06:29 [debug    ] Transaction committed successfully
2025-07-30 08:06:29 [debug    ] Added edge c3cd74b3-d667-4751-912d-fbeb0f4933bb: 2db41106-1a7c-4696-8777-d5bad414c392 -HAS_SCENE-> 5c67f68b-2258-45d5-b939-09929de5382c
2025-07-30 08:06:29 [debug    ] Created scene node 4
2025-07-30 08:06:29 [debug    ] Transaction committed successfully
2025-07-30 08:06:29 [debug    ] Added node 3eb770ed-df5c-4117-9b1e-26e1e2ca09d2 of type scene
2025-07-30 08:06:29 [debug    ] Transaction committed successfully
2025-07-30 08:06:29 [debug    ] Added edge e3150bca-0528-498a-a5ea-3fe88e802d62: 2db41106-1a7c-4696-8777-d5bad414c392 -HAS_SCENE-> 3eb770ed-df5c-4117-9b1e-26e1e2ca09d2
2025-07-30 08:06:29 [debug    ] Created scene node 5
2025-07-30 08:06:29 [info     ] Stored script                  script_id=cd77d753-42a6-4991-b016-0f1772b7a2a9 title='Test Script'
[32mPASSED[0m2025-07-30 08:06:29 [info     ] Shutting down ScriptRAG API

tests/test_api_scene_ordering.py::TestSceneOrderingEndpoints::test_ordering_nonexistent_script 2025-07-30 08:06:29 [info     ] Migration sequence is valid
2025-07-30 08:06:29 [info     ] Applying 5 pending migrations
2025-07-30 08:06:29 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:29 [info     ] Applying initial schema migration
2025-07-30 08:06:30 [info     ] Initial schema migration completed
2025-07-30 08:06:30 [info     ] Successfully applied migration 1
2025-07-30 08:06:30 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:30 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:30 [info     ] Successfully applied migration 2
2025-07-30 08:06:30 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:30 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:30 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:30 [info     ] Successfully applied migration 3
2025-07-30 08:06:30 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:30 [info     ] Applying scene dependencies migration
2025-07-30 08:06:30 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:30 [info     ] Successfully applied migration 4
2025-07-30 08:06:30 [info     ] Applying Migration 0:
2025-07-30 08:06:30 [info     ] Applying Script Bible migration
2025-07-30 08:06:30 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:30 [info     ] Successfully applied migration 5
2025-07-30 08:06:30 [info     ] Database migration completed successfully
2025-07-30 08:06:30 [info     ] Starting ScriptRAG API
2025-07-30 08:06:30 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:06:30 [info     ] Migration sequence is valid
2025-07-30 08:06:30 [info     ] Database is already at latest version
2025-07-30 08:06:30 [debug    ] Creating new database connection to /tmp/tmpfsl7434t.db
2025-07-30 08:06:30 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:30 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmpfsl7434t.db
[32mPASSED[0m2025-07-30 08:06:30 [info     ] Shutting down ScriptRAG API

tests/test_api_scene_ordering.py::TestSceneOrderingEndpoints::test_ordering_invalid_order_type 2025-07-30 08:06:30 [info     ] Migration sequence is valid
2025-07-30 08:06:30 [info     ] Applying 5 pending migrations
2025-07-30 08:06:30 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:30 [info     ] Applying initial schema migration
2025-07-30 08:06:30 [info     ] Initial schema migration completed
2025-07-30 08:06:30 [info     ] Successfully applied migration 1
2025-07-30 08:06:30 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:30 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:30 [info     ] Successfully applied migration 2
2025-07-30 08:06:30 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:30 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:30 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:30 [info     ] Successfully applied migration 3
2025-07-30 08:06:30 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:30 [info     ] Applying scene dependencies migration
2025-07-30 08:06:30 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:30 [info     ] Successfully applied migration 4
2025-07-30 08:06:30 [info     ] Applying Migration 0:
2025-07-30 08:06:30 [info     ] Applying Script Bible migration
2025-07-30 08:06:30 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:30 [info     ] Successfully applied migration 5
2025-07-30 08:06:30 [info     ] Database migration completed successfully
2025-07-30 08:06:31 [info     ] Starting ScriptRAG API
2025-07-30 08:06:31 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:06:31 [info     ] Migration sequence is valid
2025-07-30 08:06:31 [info     ] Database is already at latest version
2025-07-30 08:06:31 [debug    ] Creating new database connection to /tmp/tmptgcm9xq1.db
2025-07-30 08:06:31 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:31 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmptgcm9xq1.db
2025-07-30 08:06:31 [debug    ] Transaction committed successfully
2025-07-30 08:06:31 [debug    ] Transaction committed successfully
2025-07-30 08:06:31 [debug    ] Added node 21b83367-c337-4437-ae2d-160408d4a5dd of type script
2025-07-30 08:06:31 [info     ] Created script graph node 21b83367-c337-4437-ae2d-160408d4a5dd for 'Test Script'
2025-07-30 08:06:31 [debug    ] Transaction committed successfully
2025-07-30 08:06:31 [debug    ] Added node 3cf0782a-ffca-4306-808d-64a3f12ddf27 of type scene
2025-07-30 08:06:31 [debug    ] Transaction committed successfully
2025-07-30 08:06:31 [debug    ] Added edge 596daa89-51a3-4824-a45b-ede363b609bb: 21b83367-c337-4437-ae2d-160408d4a5dd -HAS_SCENE-> 3cf0782a-ffca-4306-808d-64a3f12ddf27
2025-07-30 08:06:31 [debug    ] Created scene node 1
2025-07-30 08:06:31 [debug    ] Transaction committed successfully
2025-07-30 08:06:31 [debug    ] Added node b78b6203-42d5-4b29-9966-7f8761e927ef of type scene
2025-07-30 08:06:31 [debug    ] Transaction committed successfully
2025-07-30 08:06:31 [debug    ] Added edge 89a37e5c-ddce-4b0c-86f7-900ddc9498b8: 21b83367-c337-4437-ae2d-160408d4a5dd -HAS_SCENE-> b78b6203-42d5-4b29-9966-7f8761e927ef
2025-07-30 08:06:31 [debug    ] Created scene node 2
2025-07-30 08:06:31 [debug    ] Transaction committed successfully
2025-07-30 08:06:31 [debug    ] Added node eba4f86c-2e95-4b46-9694-279ef1850e2d of type scene
2025-07-30 08:06:31 [debug    ] Transaction committed successfully
2025-07-30 08:06:31 [debug    ] Added edge 45fa8f7b-8052-4bbc-b614-d4b2f70a4d66: 21b83367-c337-4437-ae2d-160408d4a5dd -HAS_SCENE-> eba4f86c-2e95-4b46-9694-279ef1850e2d
2025-07-30 08:06:31 [debug    ] Created scene node 3
2025-07-30 08:06:31 [debug    ] Transaction committed successfully
2025-07-30 08:06:31 [debug    ] Added node eb8fcbe4-5f18-4025-995d-912a660ccff8 of type scene
2025-07-30 08:06:31 [debug    ] Transaction committed successfully
2025-07-30 08:06:31 [debug    ] Added edge f99b2e8a-4580-4341-bf4d-f727dfeb574c: 21b83367-c337-4437-ae2d-160408d4a5dd -HAS_SCENE-> eb8fcbe4-5f18-4025-995d-912a660ccff8
2025-07-30 08:06:31 [debug    ] Created scene node 4
2025-07-30 08:06:31 [debug    ] Transaction committed successfully
2025-07-30 08:06:31 [debug    ] Added node b9579164-f331-45d3-aaaa-12a384064e6c of type scene
2025-07-30 08:06:31 [debug    ] Transaction committed successfully
2025-07-30 08:06:31 [debug    ] Added edge a0154d9f-cf7e-4ca1-8388-596fd295ef93: 21b83367-c337-4437-ae2d-160408d4a5dd -HAS_SCENE-> b9579164-f331-45d3-aaaa-12a384064e6c
2025-07-30 08:06:31 [debug    ] Created scene node 5
2025-07-30 08:06:31 [info     ] Stored script                  script_id=a32e3399-c018-4f69-a9cd-bf6c053aa21f title='Test Script'
2025-07-30 08:06:31 [error    ] Invalid order type: invalid_type
[32mPASSED[0m2025-07-30 08:06:31 [info     ] Shutting down ScriptRAG API

tests/test_api_scenes.py::TestSceneEndpoints::test_get_scene_success [32mPASSED[0m
tests/test_api_scenes.py::TestSceneEndpoints::test_get_scene_not_found [32mPASSED[0m
tests/test_api_scenes.py::TestSceneEndpoints::test_get_scene_database_error 2025-07-30 08:06:31 [error    ] Failed to get scene            error='Database connection failed' scene_id=0c24bc59-89e2-4313-b9d3-84e71e73af72
[32mPASSED[0m
tests/test_api_scenes.py::TestSceneEndpoints::test_create_scene_success [32mPASSED[0m
tests/test_api_scenes.py::TestSceneEndpoints::test_create_scene_script_not_found [32mPASSED[0m
tests/test_api_scenes.py::TestSceneEndpoints::test_create_scene_database_error 2025-07-30 08:06:31 [error    ] Failed to create scene         error='Database write failed'
[32mPASSED[0m
tests/test_api_scenes.py::TestSceneEndpoints::test_update_scene_success [32mPASSED[0m
tests/test_api_scenes.py::TestSceneEndpoints::test_update_scene_not_found [32mPASSED[0m
tests/test_api_scenes.py::TestSceneEndpoints::test_delete_scene_success [32mPASSED[0m
tests/test_api_scenes.py::TestSceneEndpoints::test_delete_scene_not_found [32mPASSED[0m
tests/test_api_scenes.py::TestSceneEndpoints::test_inject_scene_after_success [32mPASSED[0m
tests/test_api_scenes.py::TestSceneEndpoints::test_inject_scene_after_ref_not_found [32mPASSED[0m
tests/test_api_scenes.py::TestSceneEndpoints::test_inject_scene_after_database_error 2025-07-30 08:06:32 [error    ] Failed to inject scene after   error="'heading'" scene_id=0c55f88d-08c7-4823-9199-c05f251aec7d
[32mPASSED[0m
tests/test_api_scenes.py::TestSceneEndpointValidation::test_create_scene_invalid_data [32mPASSED[0m
tests/test_api_scenes.py::TestSceneEndpointValidation::test_update_scene_partial_data [32mPASSED[0m
tests/test_bulk_import.py::TestBulkImportResult::test_initialization [32mPASSED[0m
tests/test_bulk_import.py::TestBulkImportResult::test_add_success [32mPASSED[0m
tests/test_bulk_import.py::TestBulkImportResult::test_add_failure [32mPASSED[0m
tests/test_bulk_import.py::TestBulkImportResult::test_add_skipped [32mPASSED[0m
tests/test_bulk_import.py::TestBulkImportResult::test_to_dict [32mPASSED[0m
tests/test_bulk_import.py::TestBulkImporter::test_initialization 2025-07-30 08:06:32 [info     ] Creating database schema at /tmp/tmp56i7lico.db
2025-07-30 08:06:33 [info     ] Database schema created successfully
2025-07-30 08:06:33 [debug    ] Creating new database connection to /tmp/tmp56i7lico.db
2025-07-30 08:06:33 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m2025-07-30 08:06:33 [debug    ] Closing database connection

tests/test_bulk_import.py::TestBulkImporter::test_dry_run_preview 2025-07-30 08:06:33 [info     ] Creating database schema at /tmp/tmp6okw0y4m.db
2025-07-30 08:06:33 [info     ] Database schema created successfully
2025-07-30 08:06:33 [debug    ] Creating new database connection to /tmp/tmp6okw0y4m.db
2025-07-30 08:06:33 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:33 [info     ] Validating 3 files before import
2025-07-30 08:06:33 [warning  ] Skipping 3 invalid files
2025-07-30 08:06:33 [info     ] Detecting series patterns in 0 files
2025-07-30 08:06:33 [info     ] DRY RUN: Previewing import operations
2025-07-30 08:06:33 [info     ]
Validation Summary:
2025-07-30 08:06:33 [info     ]   Total files: 3
2025-07-30 08:06:33 [info     ]   Valid files: 0
2025-07-30 08:06:33 [info     ]   Invalid files: 3
2025-07-30 08:06:33 [info     ]   Files with warnings: 0
2025-07-30 08:06:33 [info     ]
  Validation Errors:
2025-07-30 08:06:33 [error    ]     BreakingBad_S01E01_Pilot.fountain:
2025-07-30 08:06:33 [error    ]       - File does not exist
2025-07-30 08:06:33 [error    ]     BreakingBad_S01E02_CatsInTheBag.fountain:
2025-07-30 08:06:33 [error    ]       - File does not exist
2025-07-30 08:06:33 [error    ]     TheWire_S01E01_TheTarget.fountain:
2025-07-30 08:06:33 [error    ]       - File does not exist
2025-07-30 08:06:33 [info     ]
Series Structure Preview:
[32mPASSED[0m2025-07-30 08:06:33 [debug    ] Closing database connection

tests/test_bulk_import.py::TestBulkImporter::test_import_single_standalone_script 2025-07-30 08:06:33 [info     ] Creating database schema at /tmp/tmpi7cnt0cg.db
2025-07-30 08:06:34 [info     ] Database schema created successfully
2025-07-30 08:06:34 [debug    ] Creating new database connection to /tmp/tmpi7cnt0cg.db
2025-07-30 08:06:34 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:34 [info     ] Detecting series patterns in 1 files
2025-07-30 08:06:34 [info     ] Processing series: MyScript (1 files)
2025-07-30 08:06:34 [debug    ] Importing MyScript.fountain
2025-07-30 08:06:34 [debug    ] Transaction committed successfully
[32mPASSED[0m2025-07-30 08:06:34 [debug    ] Closing database connection

tests/test_bulk_import.py::TestBulkImporter::test_import_tv_series_episodes 2025-07-30 08:06:34 [info     ] Creating database schema at /tmp/tmpopkkr0sm.db
2025-07-30 08:06:34 [info     ] Database schema created successfully
2025-07-30 08:06:34 [debug    ] Creating new database connection to /tmp/tmpopkkr0sm.db
2025-07-30 08:06:34 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:34 [info     ] Detecting series patterns in 2 files
2025-07-30 08:06:34 [info     ] Processing series: BreakingBad (2 files)
2025-07-30 08:06:34 [debug    ] Importing BreakingBad_S01E01_Pilot.fountain
2025-07-30 08:06:34 [debug    ] Transaction committed successfully
2025-07-30 08:06:34 [debug    ] Importing BreakingBad_S01E02_CatsInTheBag.fountain
2025-07-30 08:06:34 [debug    ] Transaction committed successfully
[32mPASSED[0m2025-07-30 08:06:34 [debug    ] Closing database connection

tests/test_bulk_import.py::TestBulkImporter::test_skip_existing_files 2025-07-30 08:06:35 [info     ] Creating database schema at /tmp/tmpagjsjgtx.db
2025-07-30 08:06:35 [info     ] Database schema created successfully
2025-07-30 08:06:35 [debug    ] Creating new database connection to /tmp/tmpagjsjgtx.db
2025-07-30 08:06:35 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:35 [info     ] Detecting series patterns in 1 files
2025-07-30 08:06:35 [info     ] Processing series: existing (1 files)
2025-07-30 08:06:35 [debug    ] Importing existing.fountain
2025-07-30 08:06:35 [debug    ] Skipping existing file: existing.fountain
[32mPASSED[0m2025-07-30 08:06:35 [debug    ] Closing database connection

tests/test_bulk_import.py::TestBulkImporter::test_error_handling 2025-07-30 08:06:35 [info     ] Creating database schema at /tmp/tmph33razol.db
2025-07-30 08:06:35 [info     ] Database schema created successfully
2025-07-30 08:06:35 [debug    ] Creating new database connection to /tmp/tmph33razol.db
2025-07-30 08:06:35 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:35 [info     ] Detecting series patterns in 2 files
2025-07-30 08:06:35 [info     ] Processing series: good (1 files)
2025-07-30 08:06:35 [debug    ] Importing good.fountain
2025-07-30 08:06:35 [debug    ] Transaction committed successfully
2025-07-30 08:06:35 [debug    ] Transaction committed successfully
2025-07-30 08:06:35 [debug    ] Added node b1a4c2e0-7802-4ec3-bbbe-b385ec8110c0 of type script
2025-07-30 08:06:35 [info     ] Created script graph node b1a4c2e0-7802-4ec3-bbbe-b385ec8110c0 for 'Good Script'
2025-07-30 08:06:35 [info     ] Processing series: bad (1 files)
2025-07-30 08:06:35 [debug    ] Importing bad.fountain
2025-07-30 08:06:35 [error    ] Failed to import bad.fountain: Parse error
[32mPASSED[0m2025-07-30 08:06:35 [debug    ] Closing database connection

tests/test_bulk_import.py::TestBulkImporter::test_batch_processing 2025-07-30 08:06:36 [info     ] Creating database schema at /tmp/tmppeq_7stf.db
2025-07-30 08:06:36 [info     ] Database schema created successfully
2025-07-30 08:06:36 [debug    ] Creating new database connection to /tmp/tmppeq_7stf.db
2025-07-30 08:06:36 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:36 [info     ] Validating 5 files before import
2025-07-30 08:06:36 [warning  ] Skipping 5 invalid files
2025-07-30 08:06:36 [info     ] Detecting series patterns in 0 files
2025-07-30 08:06:36 [info     ] Processing series: scripts (5 files)
[32mPASSED[0m2025-07-30 08:06:36 [debug    ] Closing database connection

tests/test_bulk_import.py::TestBulkImporter::test_series_name_override 2025-07-30 08:06:36 [info     ] Creating database schema at /tmp/tmpl9xoefgk.db
2025-07-30 08:06:36 [info     ] Database schema created successfully
2025-07-30 08:06:36 [debug    ] Creating new database connection to /tmp/tmpl9xoefgk.db
2025-07-30 08:06:36 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:36 [info     ] Validating 2 files before import
2025-07-30 08:06:36 [warning  ] Skipping 2 invalid files
2025-07-30 08:06:36 [info     ] Detecting series patterns in 0 files
[32mPASSED[0m2025-07-30 08:06:36 [debug    ] Closing database connection

tests/test_bulk_import.py::TestBulkImporter::test_progress_callback 2025-07-30 08:06:37 [info     ] Creating database schema at /tmp/tmpax1egpi7.db
2025-07-30 08:06:37 [info     ] Database schema created successfully
2025-07-30 08:06:37 [debug    ] Creating new database connection to /tmp/tmpax1egpi7.db
2025-07-30 08:06:37 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:37 [info     ] Detecting series patterns in 3 files
2025-07-30 08:06:37 [info     ] Processing series: scripts (3 files)
[32mPASSED[0m2025-07-30 08:06:37 [debug    ] Closing database connection

tests/test_bulk_import.py::TestBulkImporter::test_cache_functionality 2025-07-30 08:06:37 [info     ] Creating database schema at /tmp/tmp5v69qzon.db
2025-07-30 08:06:37 [info     ] Database schema created successfully
2025-07-30 08:06:37 [debug    ] Creating new database connection to /tmp/tmp5v69qzon.db
2025-07-30 08:06:37 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m2025-07-30 08:06:37 [debug    ] Closing database connection

tests/test_bulk_import.py::TestBulkImporter::test_import_with_validation 2025-07-30 08:06:37 [info     ] Creating database schema at /tmp/tmpd33cdsk3.db
2025-07-30 08:06:38 [info     ] Database schema created successfully
2025-07-30 08:06:38 [debug    ] Creating new database connection to /tmp/tmpd33cdsk3.db
2025-07-30 08:06:38 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:38 [info     ] Validating 2 files before import
2025-07-30 08:06:38 [warning  ] Skipping 1 invalid files
2025-07-30 08:06:38 [info     ] Detecting series patterns in 1 files
[32mPASSED[0m2025-07-30 08:06:38 [debug    ] Closing database connection

tests/test_bulk_import.py::TestBulkImporter::test_import_without_validation 2025-07-30 08:06:38 [info     ] Creating database schema at /tmp/tmpzd4qd6lr.db
2025-07-30 08:06:38 [info     ] Database schema created successfully
2025-07-30 08:06:38 [debug    ] Creating new database connection to /tmp/tmpzd4qd6lr.db
2025-07-30 08:06:38 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:38 [info     ] Detecting series patterns in 1 files
[32mPASSED[0m2025-07-30 08:06:38 [debug    ] Closing database connection

tests/test_bulk_import_integration.py::TestBulkImportIntegration::test_import_tv_series_structure 2025-07-30 08:06:38 [info     ] Creating database schema at /tmp/tmppzcfvqr4.db
2025-07-30 08:06:39 [info     ] Database schema created successfully
2025-07-30 08:06:39 [debug    ] Creating new database connection to /tmp/tmppzcfvqr4.db
2025-07-30 08:06:39 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:39 [info     ] Validating 5 files before import
2025-07-30 08:06:39 [info     ] Detecting series patterns in 5 files
2025-07-30 08:06:39 [info     ] Processing series: BreakingBad (5 files)
2025-07-30 08:06:39 [debug    ] Importing /tmp/tmppcwssqv0/Breaking Bad/BreakingBad_S01E01.fountain
2025-07-30 08:06:39 [debug    ] Transaction committed successfully
2025-07-30 08:06:39 [debug    ] Transaction committed successfully
2025-07-30 08:06:39 [debug    ] Added node 7a21b409-3b47-4c98-8d1d-a20f223e1a78 of type script
2025-07-30 08:06:39 [info     ] Created script graph node 7a21b409-3b47-4c98-8d1d-a20f223e1a78 for 'BreakingBad'
2025-07-30 08:06:39 [debug    ] Transaction committed successfully
2025-07-30 08:06:39 [debug    ] Added node b1e7ffb0-68f9-4dd6-bc42-8c0dfb45969b of type season
2025-07-30 08:06:39 [debug    ] Transaction committed successfully
2025-07-30 08:06:39 [debug    ] Added edge 248dd971-eb3a-4394-9400-8170bc2c8811: 7a21b409-3b47-4c98-8d1d-a20f223e1a78 -HAS_SEASON-> b1e7ffb0-68f9-4dd6-bc42-8c0dfb45969b
2025-07-30 08:06:39 [debug    ] Added season 1 to script graph
2025-07-30 08:06:39 [debug    ] Importing /tmp/tmppcwssqv0/Breaking Bad/BreakingBad_S01E02.fountain
2025-07-30 08:06:39 [debug    ] Transaction committed successfully
2025-07-30 08:06:39 [debug    ] Importing /tmp/tmppcwssqv0/Breaking Bad/BreakingBad_S01E03.fountain
2025-07-30 08:06:39 [debug    ] Transaction committed successfully
2025-07-30 08:06:39 [debug    ] Importing /tmp/tmppcwssqv0/Breaking Bad/BreakingBad_S02E01.fountain
2025-07-30 08:06:39 [debug    ] Transaction committed successfully
2025-07-30 08:06:39 [debug    ] Transaction committed successfully
2025-07-30 08:06:39 [debug    ] Added node 06b6de6f-a61e-456d-b085-21cba5ec9dcc of type season
2025-07-30 08:06:39 [debug    ] Transaction committed successfully
2025-07-30 08:06:39 [debug    ] Added edge 046112b5-d24d-49aa-b731-eadfa763b0c1: 7a21b409-3b47-4c98-8d1d-a20f223e1a78 -HAS_SEASON-> 06b6de6f-a61e-456d-b085-21cba5ec9dcc
2025-07-30 08:06:39 [debug    ] Added season 2 to script graph
2025-07-30 08:06:39 [debug    ] Importing /tmp/tmppcwssqv0/Breaking Bad/BreakingBad_S02E02.fountain
2025-07-30 08:06:39 [debug    ] Transaction committed successfully
[32mPASSED[0m2025-07-30 08:06:39 [debug    ] Closing database connection

tests/test_bulk_import_integration.py::TestBulkImportIntegration::test_import_mixed_content 2025-07-30 08:06:39 [info     ] Creating database schema at /tmp/tmpq9bhc2h9.db
2025-07-30 08:06:39 [info     ] Database schema created successfully
2025-07-30 08:06:39 [debug    ] Creating new database connection to /tmp/tmpq9bhc2h9.db
2025-07-30 08:06:39 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:39 [info     ] Validating 4 files before import
2025-07-30 08:06:39 [info     ] Detecting series patterns in 4 files
2025-07-30 08:06:39 [info     ] Processing series: TheWire (2 files)
2025-07-30 08:06:39 [debug    ] Importing /tmp/tmpdb1xwyn_/TheWire_S01E01.fountain
2025-07-30 08:06:39 [debug    ] Transaction committed successfully
2025-07-30 08:06:39 [debug    ] Transaction committed successfully
2025-07-30 08:06:39 [debug    ] Added node f5c2c47e-2af8-4591-872f-6bc629e878fd of type script
2025-07-30 08:06:39 [info     ] Created script graph node f5c2c47e-2af8-4591-872f-6bc629e878fd for 'TheWire'
2025-07-30 08:06:39 [debug    ] Transaction committed successfully
2025-07-30 08:06:39 [debug    ] Added node feab3d1b-a799-4da2-a310-061e81e6ce32 of type season
2025-07-30 08:06:39 [debug    ] Transaction committed successfully
2025-07-30 08:06:39 [debug    ] Added edge 0947460d-231f-4ce5-909f-3cd701fe8d9f: f5c2c47e-2af8-4591-872f-6bc629e878fd -HAS_SEASON-> feab3d1b-a799-4da2-a310-061e81e6ce32
2025-07-30 08:06:39 [debug    ] Added season 1 to script graph
2025-07-30 08:06:39 [debug    ] Importing /tmp/tmpdb1xwyn_/TheWire_S01E02.fountain
2025-07-30 08:06:39 [debug    ] Transaction committed successfully
2025-07-30 08:06:39 [info     ] Processing series: MyFeatureFilm (1 files)
2025-07-30 08:06:39 [debug    ] Importing /tmp/tmpdb1xwyn_/MyFeatureFilm.fountain
2025-07-30 08:06:39 [debug    ] Transaction committed successfully
2025-07-30 08:06:39 [debug    ] Transaction committed successfully
2025-07-30 08:06:39 [debug    ] Added node 3e685b02-8433-402a-8192-7c9165cfb8ce of type script
2025-07-30 08:06:39 [info     ] Created script graph node 3e685b02-8433-402a-8192-7c9165cfb8ce for 'Test Script'
2025-07-30 08:06:39 [info     ] Processing series: AnotherScript (1 files)
2025-07-30 08:06:39 [debug    ] Importing /tmp/tmpdb1xwyn_/AnotherScript.fountain
2025-07-30 08:06:39 [debug    ] Transaction committed successfully
2025-07-30 08:06:39 [debug    ] Transaction committed successfully
2025-07-30 08:06:39 [debug    ] Added node 81f641ef-b7dc-4155-9dd9-7b461251e81f of type script
2025-07-30 08:06:39 [info     ] Created script graph node 81f641ef-b7dc-4155-9dd9-7b461251e81f for 'Test Script'
[32mPASSED[0m2025-07-30 08:06:39 [debug    ] Closing database connection

tests/test_bulk_import_integration.py::TestBulkImportIntegration::test_import_with_directory_structure 2025-07-30 08:06:39 [info     ] Creating database schema at /tmp/tmpnbvgv67d.db
2025-07-30 08:06:40 [info     ] Database schema created successfully
2025-07-30 08:06:40 [debug    ] Creating new database connection to /tmp/tmpnbvgv67d.db
2025-07-30 08:06:40 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:40 [info     ] Validating 4 files before import
2025-07-30 08:06:40 [info     ] Detecting series patterns in 4 files
2025-07-30 08:06:40 [info     ] Processing series: The Sopranos (4 files)
2025-07-30 08:06:40 [debug    ] Importing /tmp/tmpa7q20_9r/The Sopranos/Season 1/Episode 01 - Title.fountain
2025-07-30 08:06:40 [debug    ] Transaction committed successfully
2025-07-30 08:06:40 [debug    ] Transaction committed successfully
2025-07-30 08:06:40 [debug    ] Added node ed8bd897-16ec-410b-821e-f0311cdc0c7a of type script
2025-07-30 08:06:40 [info     ] Created script graph node ed8bd897-16ec-410b-821e-f0311cdc0c7a for 'The Sopranos'
2025-07-30 08:06:40 [debug    ] Importing /tmp/tmpa7q20_9r/The Sopranos/Season 2/Episode 01 - Title.fountain
2025-07-30 08:06:40 [debug    ] Transaction committed successfully
2025-07-30 08:06:40 [debug    ] Importing /tmp/tmpa7q20_9r/The Sopranos/Season 1/Episode 02 - Title.fountain
2025-07-30 08:06:40 [debug    ] Transaction committed successfully
2025-07-30 08:06:40 [debug    ] Importing /tmp/tmpa7q20_9r/The Sopranos/Season 2/Episode 02 - Title.fountain
2025-07-30 08:06:40 [debug    ] Transaction committed successfully
[32mPASSED[0m2025-07-30 08:06:40 [debug    ] Closing database connection

tests/test_bulk_import_integration.py::TestBulkImportIntegration::test_skip_existing_behavior 2025-07-30 08:06:40 [info     ] Creating database schema at /tmp/tmph7e70wgm.db
2025-07-30 08:06:40 [info     ] Database schema created successfully
2025-07-30 08:06:40 [debug    ] Creating new database connection to /tmp/tmph7e70wgm.db
2025-07-30 08:06:40 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:40 [info     ] Validating 1 files before import
2025-07-30 08:06:40 [info     ] Detecting series patterns in 1 files
2025-07-30 08:06:40 [info     ] Processing series: test_script (1 files)
2025-07-30 08:06:40 [debug    ] Importing /tmp/tmpc1u2ykhf/test_script.fountain
2025-07-30 08:06:40 [debug    ] Transaction committed successfully
2025-07-30 08:06:40 [debug    ] Transaction committed successfully
2025-07-30 08:06:40 [debug    ] Added node 5e490caa-1a91-4988-825b-6d408d62d62e of type script
2025-07-30 08:06:40 [info     ] Created script graph node 5e490caa-1a91-4988-825b-6d408d62d62e for 'Test Script'
2025-07-30 08:06:40 [info     ] Validating 1 files before import
2025-07-30 08:06:40 [info     ] Detecting series patterns in 1 files
2025-07-30 08:06:40 [info     ] Processing series: test_script (1 files)
2025-07-30 08:06:40 [debug    ] Importing /tmp/tmpc1u2ykhf/test_script.fountain
2025-07-30 08:06:40 [debug    ] Skipping existing file: /tmp/tmpc1u2ykhf/test_script.fountain
2025-07-30 08:06:40 [info     ] Validating 1 files before import
2025-07-30 08:06:40 [info     ] Detecting series patterns in 1 files
2025-07-30 08:06:40 [info     ] Processing series: test_script (1 files)
2025-07-30 08:06:40 [debug    ] Importing /tmp/tmpc1u2ykhf/test_script.fountain
2025-07-30 08:06:40 [debug    ] Transaction committed successfully
2025-07-30 08:06:40 [debug    ] Transaction committed successfully
2025-07-30 08:06:40 [debug    ] Added node 096eae8b-3f84-4c65-9018-73e25ccde53c of type script
2025-07-30 08:06:40 [info     ] Created script graph node 096eae8b-3f84-4c65-9018-73e25ccde53c for 'Test Script'
[32mPASSED[0m2025-07-30 08:06:40 [debug    ] Closing database connection

tests/test_bulk_import_integration.py::TestBulkImportIntegration::test_custom_pattern_import 2025-07-30 08:06:41 [info     ] Creating database schema at /tmp/tmp0yw7m6rr.db
2025-07-30 08:06:41 [info     ] Database schema created successfully
2025-07-30 08:06:41 [debug    ] Creating new database connection to /tmp/tmp0yw7m6rr.db
2025-07-30 08:06:41 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:41 [info     ] Validating 2 files before import
2025-07-30 08:06:41 [info     ] Detecting series patterns in 2 files
2025-07-30 08:06:41 [info     ] Processing series: MyShow (2 files)
2025-07-30 08:06:41 [debug    ] Importing /tmp/tmp13xzex77/MyShow Episode S01E01.fountain
2025-07-30 08:06:41 [debug    ] Transaction committed successfully
2025-07-30 08:06:41 [debug    ] Transaction committed successfully
2025-07-30 08:06:41 [debug    ] Added node 7df1f3da-b95a-4d80-aea1-5cd4db6e3e12 of type script
2025-07-30 08:06:41 [info     ] Created script graph node 7df1f3da-b95a-4d80-aea1-5cd4db6e3e12 for 'MyShow'
2025-07-30 08:06:41 [debug    ] Transaction committed successfully
2025-07-30 08:06:41 [debug    ] Added node 763a5864-935b-4bf9-a5bd-bd08115dc2a8 of type season
2025-07-30 08:06:41 [debug    ] Transaction committed successfully
2025-07-30 08:06:41 [debug    ] Added edge 4bb6b38f-9f05-4863-87a2-98eaaaf4f189: 7df1f3da-b95a-4d80-aea1-5cd4db6e3e12 -HAS_SEASON-> 763a5864-935b-4bf9-a5bd-bd08115dc2a8
2025-07-30 08:06:41 [debug    ] Added season 1 to script graph
2025-07-30 08:06:41 [debug    ] Importing /tmp/tmp13xzex77/MyShow Episode S01E02.fountain
2025-07-30 08:06:41 [debug    ] Transaction committed successfully
2025-07-30 08:06:41 [debug    ] Closing database connection
[32mPASSED[0m
tests/test_bulk_import_integration.py::TestBulkImportIntegration::test_transaction_rollback_on_error 2025-07-30 08:06:41 [info     ] Creating database schema at /tmp/tmpt9yhbpt8.db
2025-07-30 08:06:41 [info     ] Database schema created successfully
2025-07-30 08:06:41 [debug    ] Creating new database connection to /tmp/tmpt9yhbpt8.db
2025-07-30 08:06:41 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:41 [info     ] Validating 1 files before import
2025-07-30 08:06:41 [warning  ] Skipping 1 invalid files
2025-07-30 08:06:41 [info     ] Detecting series patterns in 0 files
[32mPASSED[0m2025-07-30 08:06:41 [debug    ] Closing database connection

tests/test_bulk_import_integration.py::TestBulkImportIntegration::test_series_name_override_integration 2025-07-30 08:06:41 [info     ] Creating database schema at /tmp/tmp0dkkekzg.db
2025-07-30 08:06:42 [info     ] Database schema created successfully
2025-07-30 08:06:42 [debug    ] Creating new database connection to /tmp/tmp0dkkekzg.db
2025-07-30 08:06:42 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:42 [info     ] Validating 2 files before import
2025-07-30 08:06:42 [info     ] Detecting series patterns in 2 files
2025-07-30 08:06:42 [info     ] Processing series: New Name (2 files)
2025-07-30 08:06:42 [debug    ] Importing /tmp/tmpqak_aqji/OldName_S01E01.fountain
2025-07-30 08:06:42 [debug    ] Transaction committed successfully
2025-07-30 08:06:42 [debug    ] Transaction committed successfully
2025-07-30 08:06:42 [debug    ] Added node 9992d9b7-2804-4f9c-8938-1338e44b20d1 of type script
2025-07-30 08:06:42 [info     ] Created script graph node 9992d9b7-2804-4f9c-8938-1338e44b20d1 for 'New Name'
2025-07-30 08:06:42 [debug    ] Transaction committed successfully
2025-07-30 08:06:42 [debug    ] Added node cae9fd3a-fd27-442f-93c5-b6b5811b95dc of type season
2025-07-30 08:06:42 [debug    ] Transaction committed successfully
2025-07-30 08:06:42 [debug    ] Added edge 3d2211e2-977e-46a8-8c47-1c6097a7c2ae: 9992d9b7-2804-4f9c-8938-1338e44b20d1 -HAS_SEASON-> cae9fd3a-fd27-442f-93c5-b6b5811b95dc
2025-07-30 08:06:42 [debug    ] Added season 1 to script graph
2025-07-30 08:06:42 [debug    ] Importing /tmp/tmpqak_aqji/OldName_S01E02.fountain
2025-07-30 08:06:42 [debug    ] Transaction committed successfully
[32mPASSED[0m2025-07-30 08:06:42 [debug    ] Closing database connection

tests/test_bulk_import_validation.py::TestFileValidationResult::test_initialization [32mPASSED[0m
tests/test_bulk_import_validation.py::TestFileValidationResult::test_add_error [32mPASSED[0m
tests/test_bulk_import_validation.py::TestFileValidationResult::test_add_warning [32mPASSED[0m
tests/test_bulk_import_validation.py::TestValidationIssue::test_initialization [32mPASSED[0m
tests/test_bulk_import_validation.py::TestSeriesValidationResult::test_initialization [32mPASSED[0m
tests/test_bulk_import_validation.py::TestBulkImporterValidation::test_validate_single_file_not_exists [32mPASSED[0m
tests/test_bulk_import_validation.py::TestBulkImporterValidation::test_validate_single_file_invalid_extension [32mPASSED[0m
tests/test_bulk_import_validation.py::TestBulkImporterValidation::test_validate_single_file_valid_fountain [32mPASSED[0m
tests/test_bulk_import_validation.py::TestBulkImporterValidation::test_validate_single_file_large_size [32mPASSED[0m
tests/test_bulk_import_validation.py::TestBulkImporterValidation::test_detect_encoding_utf8 [32mPASSED[0m
tests/test_bulk_import_validation.py::TestBulkImporterValidation::test_detect_encoding_latin1 [32mPASSED[0m
tests/test_bulk_import_validation.py::TestBulkImporterValidation::test_quick_fountain_check_valid [32mPASSED[0m
tests/test_bulk_import_validation.py::TestBulkImporterValidation::test_quick_fountain_check_invalid [32mPASSED[0m
tests/test_bulk_import_validation.py::TestBulkImporterValidation::test_validate_series_detection_custom_pattern [32mPASSED[0m
tests/test_bulk_import_validation.py::TestBulkImporterValidation::test_validate_series_detection_duplicates [32mPASSED[0m
tests/test_bulk_import_validation.py::TestBulkImporterValidation::test_validate_files_integration [32mPASSED[0m
tests/test_bulk_import_validation.py::TestSeriesPatternDetectorValidation::test_validate_pattern_valid [32mPASSED[0m
tests/test_bulk_import_validation.py::TestSeriesPatternDetectorValidation::test_validate_pattern_invalid_regex [32mPASSED[0m
tests/test_bulk_import_validation.py::TestSeriesPatternDetectorValidation::test_validate_pattern_missing_groups [32mPASSED[0m
tests/test_bulk_import_validation.py::TestSeriesPatternDetectorValidation::test_validate_pattern_too_broad [32mPASSED[0m
tests/test_database.py::TestDatabaseSchema::test_schema_creation 2025-07-30 08:06:42 [info     ] Creating database schema at /tmp/tmpt1yw3pff.db
2025-07-30 08:06:42 [info     ] Database schema created successfully
[32mPASSED[0m
tests/test_database.py::TestDatabaseSchema::test_schema_validation 2025-07-30 08:06:43 [info     ] Creating database schema at /tmp/tmpfx7h_nuc.db
2025-07-30 08:06:43 [info     ] Database schema created successfully
[32mPASSED[0m
tests/test_database.py::TestDatabaseSchema::test_migration_check 2025-07-30 08:06:43 [info     ] Creating database schema at /tmp/tmp6c3ck567.db
2025-07-30 08:06:43 [info     ] Database schema created successfully
[32mPASSED[0m
tests/test_database.py::TestDatabaseConnection::test_connection_creation 2025-07-30 08:06:44 [info     ] Creating database schema at /tmp/tmp4sw01tpb.db
2025-07-30 08:06:44 [info     ] Database schema created successfully
2025-07-30 08:06:44 [debug    ] Creating new database connection to /tmp/tmp4sw01tpb.db
[32mPASSED[0m
tests/test_database.py::TestDatabaseConnection::test_transaction_rollback 2025-07-30 08:06:44 [info     ] Migration sequence is valid
2025-07-30 08:06:44 [info     ] Applying 5 pending migrations
2025-07-30 08:06:44 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:44 [info     ] Applying initial schema migration
2025-07-30 08:06:44 [info     ] Initial schema migration completed
2025-07-30 08:06:44 [info     ] Successfully applied migration 1
2025-07-30 08:06:44 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:44 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:44 [info     ] Successfully applied migration 2
2025-07-30 08:06:44 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:44 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:44 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:44 [info     ] Successfully applied migration 3
2025-07-30 08:06:44 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:44 [info     ] Applying scene dependencies migration
2025-07-30 08:06:44 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:44 [info     ] Successfully applied migration 4
2025-07-30 08:06:44 [info     ] Applying Migration 0:
2025-07-30 08:06:44 [info     ] Applying Script Bible migration
2025-07-30 08:06:45 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:45 [info     ] Successfully applied migration 5
2025-07-30 08:06:45 [info     ] Database migration completed successfully
2025-07-30 08:06:45 [debug    ] Creating new database connection to /tmp/tmplp0rjyqi.db
2025-07-30 08:06:45 [error    ] Transaction failed, rolling back: UNIQUE constraint failed: scripts.id
[32mPASSED[0m2025-07-30 08:06:45 [debug    ] Closing database connection

tests/test_database.py::TestDatabaseConnection::test_query_methods 2025-07-30 08:06:45 [info     ] Migration sequence is valid
2025-07-30 08:06:45 [info     ] Applying 5 pending migrations
2025-07-30 08:06:45 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:45 [info     ] Applying initial schema migration
2025-07-30 08:06:45 [info     ] Initial schema migration completed
2025-07-30 08:06:45 [info     ] Successfully applied migration 1
2025-07-30 08:06:45 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:45 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:45 [info     ] Successfully applied migration 2
2025-07-30 08:06:45 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:45 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:45 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:45 [info     ] Successfully applied migration 3
2025-07-30 08:06:45 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:45 [info     ] Applying scene dependencies migration
2025-07-30 08:06:46 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:46 [info     ] Successfully applied migration 4
2025-07-30 08:06:46 [info     ] Applying Migration 0:
2025-07-30 08:06:46 [info     ] Applying Script Bible migration
2025-07-30 08:06:46 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:46 [info     ] Successfully applied migration 5
2025-07-30 08:06:46 [info     ] Database migration completed successfully
2025-07-30 08:06:46 [debug    ] Creating new database connection to /tmp/tmps2df712p.db
2025-07-30 08:06:46 [debug    ] Transaction committed successfully
[32mPASSED[0m2025-07-30 08:06:46 [debug    ] Closing database connection

tests/test_database.py::TestDatabaseConnection::test_table_operations 2025-07-30 08:06:47 [info     ] Migration sequence is valid
2025-07-30 08:06:47 [info     ] Applying 5 pending migrations
2025-07-30 08:06:47 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:47 [info     ] Applying initial schema migration
2025-07-30 08:06:47 [info     ] Initial schema migration completed
2025-07-30 08:06:47 [info     ] Successfully applied migration 1
2025-07-30 08:06:47 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:47 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:47 [info     ] Successfully applied migration 2
2025-07-30 08:06:47 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:47 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:47 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:47 [info     ] Successfully applied migration 3
2025-07-30 08:06:47 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:47 [info     ] Applying scene dependencies migration
2025-07-30 08:06:47 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:47 [info     ] Successfully applied migration 4
2025-07-30 08:06:47 [info     ] Applying Migration 0:
2025-07-30 08:06:47 [info     ] Applying Script Bible migration
2025-07-30 08:06:47 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:47 [info     ] Successfully applied migration 5
2025-07-30 08:06:47 [info     ] Database migration completed successfully
2025-07-30 08:06:47 [debug    ] Creating new database connection to /tmp/tmpqrb5ohox.db
[32mPASSED[0m2025-07-30 08:06:47 [debug    ] Closing database connection

tests/test_database.py::TestGraphDatabase::test_node_operations 2025-07-30 08:06:48 [info     ] Migration sequence is valid
2025-07-30 08:06:48 [info     ] Applying 5 pending migrations
2025-07-30 08:06:48 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:48 [info     ] Applying initial schema migration
2025-07-30 08:06:48 [info     ] Initial schema migration completed
2025-07-30 08:06:48 [info     ] Successfully applied migration 1
2025-07-30 08:06:48 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:48 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:48 [info     ] Successfully applied migration 2
2025-07-30 08:06:48 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:48 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:48 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:48 [info     ] Successfully applied migration 3
2025-07-30 08:06:48 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:48 [info     ] Applying scene dependencies migration
2025-07-30 08:06:48 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:48 [info     ] Successfully applied migration 4
2025-07-30 08:06:48 [info     ] Applying Migration 0:
2025-07-30 08:06:48 [info     ] Applying Script Bible migration
2025-07-30 08:06:48 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:48 [info     ] Successfully applied migration 5
2025-07-30 08:06:48 [info     ] Database migration completed successfully
2025-07-30 08:06:48 [debug    ] Creating new database connection to /tmp/tmph2ptzr0k.db
2025-07-30 08:06:48 [debug    ] Transaction committed successfully
2025-07-30 08:06:48 [debug    ] Added node e1fa3980-5f53-4d3f-8c30-6390b358b75c of type test
2025-07-30 08:06:48 [debug    ] Transaction committed successfully
2025-07-30 08:06:48 [debug    ] Updated node e1fa3980-5f53-4d3f-8c30-6390b358b75c
2025-07-30 08:06:48 [debug    ] Transaction committed successfully
2025-07-30 08:06:48 [debug    ] Deleted node e1fa3980-5f53-4d3f-8c30-6390b358b75c
[32mPASSED[0m2025-07-30 08:06:48 [debug    ] Closing database connection

tests/test_database.py::TestGraphDatabase::test_edge_operations 2025-07-30 08:06:49 [info     ] Migration sequence is valid
2025-07-30 08:06:49 [info     ] Applying 5 pending migrations
2025-07-30 08:06:49 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:49 [info     ] Applying initial schema migration
2025-07-30 08:06:49 [info     ] Initial schema migration completed
2025-07-30 08:06:49 [info     ] Successfully applied migration 1
2025-07-30 08:06:49 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:49 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:49 [info     ] Successfully applied migration 2
2025-07-30 08:06:49 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:49 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:49 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:49 [info     ] Successfully applied migration 3
2025-07-30 08:06:49 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:49 [info     ] Applying scene dependencies migration
2025-07-30 08:06:49 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:49 [info     ] Successfully applied migration 4
2025-07-30 08:06:49 [info     ] Applying Migration 0:
2025-07-30 08:06:49 [info     ] Applying Script Bible migration
2025-07-30 08:06:49 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:49 [info     ] Successfully applied migration 5
2025-07-30 08:06:49 [info     ] Database migration completed successfully
2025-07-30 08:06:49 [debug    ] Creating new database connection to /tmp/tmp9oiq9lk3.db
2025-07-30 08:06:49 [debug    ] Transaction committed successfully
2025-07-30 08:06:49 [debug    ] Added node adc11703-9006-4a11-9a99-b30b94c52caf of type test
2025-07-30 08:06:49 [debug    ] Transaction committed successfully
2025-07-30 08:06:49 [debug    ] Added node 31dc7ea8-6e92-43b3-8d49-59e8dd977a3f of type test
2025-07-30 08:06:49 [debug    ] Transaction committed successfully
2025-07-30 08:06:49 [debug    ] Added edge 72ae84f8-57eb-4aba-b154-d165f725400d: adc11703-9006-4a11-9a99-b30b94c52caf -CONNECTS_TO-> 31dc7ea8-6e92-43b3-8d49-59e8dd977a3f
2025-07-30 08:06:49 [debug    ] Transaction committed successfully
2025-07-30 08:06:49 [debug    ] Deleted edge 72ae84f8-57eb-4aba-b154-d165f725400d
[32mPASSED[0m2025-07-30 08:06:49 [debug    ] Closing database connection

tests/test_database.py::TestGraphDatabase::test_graph_traversal 2025-07-30 08:06:50 [info     ] Migration sequence is valid
2025-07-30 08:06:50 [info     ] Applying 5 pending migrations
2025-07-30 08:06:50 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:50 [info     ] Applying initial schema migration
2025-07-30 08:06:50 [info     ] Initial schema migration completed
2025-07-30 08:06:50 [info     ] Successfully applied migration 1
2025-07-30 08:06:50 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:50 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:50 [info     ] Successfully applied migration 2
2025-07-30 08:06:50 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:50 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:50 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:50 [info     ] Successfully applied migration 3
2025-07-30 08:06:50 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:50 [info     ] Applying scene dependencies migration
2025-07-30 08:06:50 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:50 [info     ] Successfully applied migration 4
2025-07-30 08:06:50 [info     ] Applying Migration 0:
2025-07-30 08:06:50 [info     ] Applying Script Bible migration
2025-07-30 08:06:50 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:50 [info     ] Successfully applied migration 5
2025-07-30 08:06:50 [info     ] Database migration completed successfully
2025-07-30 08:06:50 [debug    ] Creating new database connection to /tmp/tmph43tgrr7.db
2025-07-30 08:06:50 [debug    ] Transaction committed successfully
2025-07-30 08:06:50 [debug    ] Added node 3c46e117-c2c4-4500-aa5d-e8ac69ba8d0d of type test
2025-07-30 08:06:50 [debug    ] Transaction committed successfully
2025-07-30 08:06:50 [debug    ] Added node dd261c93-072e-4e63-9a95-3a1e04ef46b5 of type test
2025-07-30 08:06:50 [debug    ] Transaction committed successfully
2025-07-30 08:06:50 [debug    ] Added node 544a0893-156c-4d13-af27-2a2d8a09d1c8 of type test
2025-07-30 08:06:50 [debug    ] Transaction committed successfully
2025-07-30 08:06:50 [debug    ] Added edge 77a2d708-32b1-4ab6-a828-b7d8f8c9b030: 3c46e117-c2c4-4500-aa5d-e8ac69ba8d0d -CONNECTS_TO-> dd261c93-072e-4e63-9a95-3a1e04ef46b5
2025-07-30 08:06:50 [debug    ] Transaction committed successfully
2025-07-30 08:06:50 [debug    ] Added edge 8711d251-57f6-4af9-87bd-8a6b1602585e: dd261c93-072e-4e63-9a95-3a1e04ef46b5 -CONNECTS_TO-> 544a0893-156c-4d13-af27-2a2d8a09d1c8
[32mPASSED[0m2025-07-30 08:06:50 [debug    ] Closing database connection

tests/test_database.py::TestGraphDatabase::test_node_search 2025-07-30 08:06:51 [info     ] Migration sequence is valid
2025-07-30 08:06:51 [info     ] Applying 5 pending migrations
2025-07-30 08:06:51 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:51 [info     ] Applying initial schema migration
2025-07-30 08:06:51 [info     ] Initial schema migration completed
2025-07-30 08:06:51 [info     ] Successfully applied migration 1
2025-07-30 08:06:51 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:51 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:51 [info     ] Successfully applied migration 2
2025-07-30 08:06:51 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:51 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:51 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:51 [info     ] Successfully applied migration 3
2025-07-30 08:06:51 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:51 [info     ] Applying scene dependencies migration
2025-07-30 08:06:51 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:51 [info     ] Successfully applied migration 4
2025-07-30 08:06:51 [info     ] Applying Migration 0:
2025-07-30 08:06:51 [info     ] Applying Script Bible migration
2025-07-30 08:06:52 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:52 [info     ] Successfully applied migration 5
2025-07-30 08:06:52 [info     ] Database migration completed successfully
2025-07-30 08:06:52 [debug    ] Creating new database connection to /tmp/tmpupx4o38t.db
2025-07-30 08:06:52 [debug    ] Transaction committed successfully
2025-07-30 08:06:52 [debug    ] Added node 5cfda90c-3f29-43e9-a289-225dcda72920 of type character
2025-07-30 08:06:52 [debug    ] Transaction committed successfully
2025-07-30 08:06:52 [debug    ] Added node d842caa6-6f0b-4a68-9968-05ea4ab58403 of type character
2025-07-30 08:06:52 [debug    ] Transaction committed successfully
2025-07-30 08:06:52 [debug    ] Added node 35d0982e-aa34-4e23-af7e-60bb5eeefccb of type location
[32mPASSED[0m2025-07-30 08:06:52 [debug    ] Closing database connection

tests/test_database.py::TestGraphDatabase::test_centrality_calculations 2025-07-30 08:06:52 [info     ] Migration sequence is valid
2025-07-30 08:06:52 [info     ] Applying 5 pending migrations
2025-07-30 08:06:52 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:52 [info     ] Applying initial schema migration
2025-07-30 08:06:53 [info     ] Initial schema migration completed
2025-07-30 08:06:53 [info     ] Successfully applied migration 1
2025-07-30 08:06:53 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:53 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:53 [info     ] Successfully applied migration 2
2025-07-30 08:06:53 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:53 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:53 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:53 [info     ] Successfully applied migration 3
2025-07-30 08:06:53 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:53 [info     ] Applying scene dependencies migration
2025-07-30 08:06:53 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:53 [info     ] Successfully applied migration 4
2025-07-30 08:06:53 [info     ] Applying Migration 0:
2025-07-30 08:06:53 [info     ] Applying Script Bible migration
2025-07-30 08:06:53 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:53 [info     ] Successfully applied migration 5
2025-07-30 08:06:53 [info     ] Database migration completed successfully
2025-07-30 08:06:53 [debug    ] Creating new database connection to /tmp/tmpql8wvc4z.db
2025-07-30 08:06:53 [debug    ] Transaction committed successfully
2025-07-30 08:06:53 [debug    ] Added node 48ad7398-df2e-4379-a1c9-c3cf511f870d of type test
2025-07-30 08:06:53 [debug    ] Transaction committed successfully
2025-07-30 08:06:53 [debug    ] Added node 21fc9c35-cc71-4fbc-b57f-adaa188028b5 of type test
2025-07-30 08:06:53 [debug    ] Transaction committed successfully
2025-07-30 08:06:53 [debug    ] Added node f8f0a887-6f64-4c48-8045-5129ad1b6dde of type test
2025-07-30 08:06:53 [debug    ] Transaction committed successfully
2025-07-30 08:06:53 [debug    ] Added node d4e8cb37-3cf3-43f8-a80f-638d0bd949ec of type test
2025-07-30 08:06:53 [debug    ] Transaction committed successfully
2025-07-30 08:06:53 [debug    ] Added node c6795b81-300e-497c-91e3-753499f12534 of type test
2025-07-30 08:06:53 [debug    ] Transaction committed successfully
2025-07-30 08:06:53 [debug    ] Added edge cd32acff-cff9-4d47-ac95-0030597d8007: 48ad7398-df2e-4379-a1c9-c3cf511f870d -CONNECTS_TO-> 21fc9c35-cc71-4fbc-b57f-adaa188028b5
2025-07-30 08:06:53 [debug    ] Transaction committed successfully
2025-07-30 08:06:53 [debug    ] Added edge 609c2c94-feaf-4474-876c-3981868a88b3: 21fc9c35-cc71-4fbc-b57f-adaa188028b5 -CONNECTS_TO-> 48ad7398-df2e-4379-a1c9-c3cf511f870d
2025-07-30 08:06:53 [debug    ] Transaction committed successfully
2025-07-30 08:06:53 [debug    ] Added edge d9748473-bb1d-43d8-893d-b9d6211ba165: 48ad7398-df2e-4379-a1c9-c3cf511f870d -CONNECTS_TO-> f8f0a887-6f64-4c48-8045-5129ad1b6dde
2025-07-30 08:06:53 [debug    ] Transaction committed successfully
2025-07-30 08:06:53 [debug    ] Added edge 9c016416-d230-4b06-b66a-a4230b89fa42: f8f0a887-6f64-4c48-8045-5129ad1b6dde -CONNECTS_TO-> 48ad7398-df2e-4379-a1c9-c3cf511f870d
2025-07-30 08:06:53 [debug    ] Transaction committed successfully
2025-07-30 08:06:53 [debug    ] Added edge 535d572a-1b09-4e13-9992-f584992e79ad: 21fc9c35-cc71-4fbc-b57f-adaa188028b5 -CONNECTS_TO-> f8f0a887-6f64-4c48-8045-5129ad1b6dde
2025-07-30 08:06:53 [debug    ] Transaction committed successfully
2025-07-30 08:06:53 [debug    ] Added edge 5d974425-90cc-4fb8-9897-92156f379778: f8f0a887-6f64-4c48-8045-5129ad1b6dde -CONNECTS_TO-> 21fc9c35-cc71-4fbc-b57f-adaa188028b5
2025-07-30 08:06:53 [debug    ] Transaction committed successfully
2025-07-30 08:06:53 [debug    ] Added edge d0493b37-6d42-4ce0-a0d0-6ca97f3ac27e: 21fc9c35-cc71-4fbc-b57f-adaa188028b5 -CONNECTS_TO-> d4e8cb37-3cf3-43f8-a80f-638d0bd949ec
2025-07-30 08:06:53 [debug    ] Transaction committed successfully
2025-07-30 08:06:53 [debug    ] Added edge 5f56e64c-3926-4c92-83f5-20bc3e5186df: d4e8cb37-3cf3-43f8-a80f-638d0bd949ec -CONNECTS_TO-> 21fc9c35-cc71-4fbc-b57f-adaa188028b5
2025-07-30 08:06:53 [debug    ] Transaction committed successfully
2025-07-30 08:06:53 [debug    ] Added edge 547e306b-a45f-4422-af1c-61df57c2f6ab: f8f0a887-6f64-4c48-8045-5129ad1b6dde -CONNECTS_TO-> c6795b81-300e-497c-91e3-753499f12534
2025-07-30 08:06:53 [debug    ] Transaction committed successfully
2025-07-30 08:06:53 [debug    ] Added edge b5486dfc-6829-465a-9516-c5d1bacf8b29: c6795b81-300e-497c-91e3-753499f12534 -CONNECTS_TO-> f8f0a887-6f64-4c48-8045-5129ad1b6dde
2025-07-30 08:06:53 [debug    ] Transaction committed successfully
2025-07-30 08:06:53 [debug    ] Added edge 54719e79-4d33-425b-9024-122e86ea8922: d4e8cb37-3cf3-43f8-a80f-638d0bd949ec -CONNECTS_TO-> c6795b81-300e-497c-91e3-753499f12534
2025-07-30 08:06:53 [debug    ] Transaction committed successfully
2025-07-30 08:06:53 [debug    ] Added edge bf597dbf-c5bb-4ada-93da-7f235980b9c2: c6795b81-300e-497c-91e3-753499f12534 -CONNECTS_TO-> d4e8cb37-3cf3-43f8-a80f-638d0bd949ec
[32mPASSED[0m2025-07-30 08:06:53 [debug    ] Closing database connection

tests/test_database.py::TestGraphDatabase::test_centrality_empty_graph 2025-07-30 08:06:54 [info     ] Migration sequence is valid
2025-07-30 08:06:54 [info     ] Applying 5 pending migrations
2025-07-30 08:06:54 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:54 [info     ] Applying initial schema migration
2025-07-30 08:06:54 [info     ] Initial schema migration completed
2025-07-30 08:06:54 [info     ] Successfully applied migration 1
2025-07-30 08:06:54 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:54 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:54 [info     ] Successfully applied migration 2
2025-07-30 08:06:54 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:54 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:54 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:54 [info     ] Successfully applied migration 3
2025-07-30 08:06:54 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:54 [info     ] Applying scene dependencies migration
2025-07-30 08:06:54 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:54 [info     ] Successfully applied migration 4
2025-07-30 08:06:54 [info     ] Applying Migration 0:
2025-07-30 08:06:54 [info     ] Applying Script Bible migration
2025-07-30 08:06:54 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:54 [info     ] Successfully applied migration 5
2025-07-30 08:06:54 [info     ] Database migration completed successfully
2025-07-30 08:06:54 [debug    ] Creating new database connection to /tmp/tmpmtv7mpbe.db
[32mPASSED[0m2025-07-30 08:06:54 [debug    ] Closing database connection

tests/test_database.py::TestGraphDatabase::test_centrality_single_node 2025-07-30 08:06:55 [info     ] Migration sequence is valid
2025-07-30 08:06:55 [info     ] Applying 5 pending migrations
2025-07-30 08:06:55 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:55 [info     ] Applying initial schema migration
2025-07-30 08:06:55 [info     ] Initial schema migration completed
2025-07-30 08:06:55 [info     ] Successfully applied migration 1
2025-07-30 08:06:55 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:55 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:55 [info     ] Successfully applied migration 2
2025-07-30 08:06:55 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:55 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:55 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:55 [info     ] Successfully applied migration 3
2025-07-30 08:06:55 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:55 [info     ] Applying scene dependencies migration
2025-07-30 08:06:55 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:55 [info     ] Successfully applied migration 4
2025-07-30 08:06:55 [info     ] Applying Migration 0:
2025-07-30 08:06:55 [info     ] Applying Script Bible migration
2025-07-30 08:06:55 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:55 [info     ] Successfully applied migration 5
2025-07-30 08:06:55 [info     ] Database migration completed successfully
2025-07-30 08:06:55 [debug    ] Creating new database connection to /tmp/tmpd8bnzfe9.db
2025-07-30 08:06:55 [debug    ] Transaction committed successfully
2025-07-30 08:06:55 [debug    ] Added node d94443a5-16f2-4c98-9129-2cbcac974f4f of type test
[32mPASSED[0m2025-07-30 08:06:55 [debug    ] Closing database connection

tests/test_database.py::TestGraphOperations::test_script_graph_creation 2025-07-30 08:06:56 [info     ] Migration sequence is valid
2025-07-30 08:06:56 [info     ] Applying 5 pending migrations
2025-07-30 08:06:56 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:56 [info     ] Applying initial schema migration
2025-07-30 08:06:56 [info     ] Initial schema migration completed
2025-07-30 08:06:56 [info     ] Successfully applied migration 1
2025-07-30 08:06:56 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:56 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:56 [info     ] Successfully applied migration 2
2025-07-30 08:06:56 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:56 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:56 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:56 [info     ] Successfully applied migration 3
2025-07-30 08:06:56 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:56 [info     ] Applying scene dependencies migration
2025-07-30 08:06:56 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:56 [info     ] Successfully applied migration 4
2025-07-30 08:06:56 [info     ] Applying Migration 0:
2025-07-30 08:06:56 [info     ] Applying Script Bible migration
2025-07-30 08:06:56 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:56 [info     ] Successfully applied migration 5
2025-07-30 08:06:56 [info     ] Database migration completed successfully
2025-07-30 08:06:56 [debug    ] Creating new database connection to /tmp/tmpb0i0nkt5.db
2025-07-30 08:06:56 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:56 [debug    ] Transaction committed successfully
2025-07-30 08:06:56 [debug    ] Added node 8898305a-1e34-47e7-bfab-59082ef8b12f of type script
2025-07-30 08:06:56 [info     ] Created script graph node 8898305a-1e34-47e7-bfab-59082ef8b12f for 'Test Screenplay'
[32mPASSED[0m2025-07-30 08:06:56 [debug    ] Closing database connection

tests/test_database.py::TestGraphOperations::test_character_operations 2025-07-30 08:06:57 [info     ] Migration sequence is valid
2025-07-30 08:06:57 [info     ] Applying 5 pending migrations
2025-07-30 08:06:57 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:57 [info     ] Applying initial schema migration
2025-07-30 08:06:57 [info     ] Initial schema migration completed
2025-07-30 08:06:57 [info     ] Successfully applied migration 1
2025-07-30 08:06:57 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:57 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:57 [info     ] Successfully applied migration 2
2025-07-30 08:06:57 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:57 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:57 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:57 [info     ] Successfully applied migration 3
2025-07-30 08:06:57 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:57 [info     ] Applying scene dependencies migration
2025-07-30 08:06:57 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:57 [info     ] Successfully applied migration 4
2025-07-30 08:06:57 [info     ] Applying Migration 0:
2025-07-30 08:06:57 [info     ] Applying Script Bible migration
2025-07-30 08:06:58 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:58 [info     ] Successfully applied migration 5
2025-07-30 08:06:58 [info     ] Database migration completed successfully
2025-07-30 08:06:58 [debug    ] Creating new database connection to /tmp/tmpc6iheh_d.db
2025-07-30 08:06:58 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:58 [debug    ] Transaction committed successfully
2025-07-30 08:06:58 [debug    ] Added node e8c3b52f-d65b-45f6-ba0a-1fc0f9496feb of type script
2025-07-30 08:06:58 [info     ] Created script graph node e8c3b52f-d65b-45f6-ba0a-1fc0f9496feb for 'Test Screenplay'
2025-07-30 08:06:58 [debug    ] Transaction committed successfully
2025-07-30 08:06:58 [debug    ] Added node c542d2ed-97d4-400b-adcf-56ee0e8ac4f9 of type character
2025-07-30 08:06:58 [debug    ] Transaction committed successfully
2025-07-30 08:06:58 [debug    ] Added edge a70ff033-7afa-4872-a895-0554a20cccfc: e8c3b52f-d65b-45f6-ba0a-1fc0f9496feb -HAS_CHARACTER-> c542d2ed-97d4-400b-adcf-56ee0e8ac4f9
2025-07-30 08:06:58 [debug    ] Created character node for PROTAGONIST
[32mPASSED[0m2025-07-30 08:06:58 [debug    ] Closing database connection

tests/test_database.py::TestGraphOperations::test_location_operations 2025-07-30 08:06:58 [info     ] Migration sequence is valid
2025-07-30 08:06:58 [info     ] Applying 5 pending migrations
2025-07-30 08:06:58 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:06:58 [info     ] Applying initial schema migration
2025-07-30 08:06:58 [info     ] Initial schema migration completed
2025-07-30 08:06:58 [info     ] Successfully applied migration 1
2025-07-30 08:06:58 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:06:59 [info     ] Vector storage migration applied successfully
2025-07-30 08:06:59 [info     ] Successfully applied migration 2
2025-07-30 08:06:59 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:06:59 [info     ] Applying FTS column naming fix migration
2025-07-30 08:06:59 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:06:59 [info     ] Successfully applied migration 3
2025-07-30 08:06:59 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:06:59 [info     ] Applying scene dependencies migration
2025-07-30 08:06:59 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:06:59 [info     ] Successfully applied migration 4
2025-07-30 08:06:59 [info     ] Applying Migration 0:
2025-07-30 08:06:59 [info     ] Applying Script Bible migration
2025-07-30 08:06:59 [info     ] Script Bible migration applied successfully
2025-07-30 08:06:59 [info     ] Successfully applied migration 5
2025-07-30 08:06:59 [info     ] Database migration completed successfully
2025-07-30 08:06:59 [debug    ] Creating new database connection to /tmp/tmpuxqm991x.db
2025-07-30 08:06:59 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:06:59 [debug    ] Transaction committed successfully
2025-07-30 08:06:59 [debug    ] Added node c2411283-086b-479f-8be1-39d21248921c of type script
2025-07-30 08:06:59 [info     ] Created script graph node c2411283-086b-479f-8be1-39d21248921c for 'Test Screenplay'
2025-07-30 08:06:59 [debug    ] Transaction committed successfully
2025-07-30 08:06:59 [debug    ] Added node 46f5ab11-76e0-484a-a129-c589ef042818 of type location
2025-07-30 08:06:59 [debug    ] Transaction committed successfully
2025-07-30 08:06:59 [debug    ] Added edge 9ba348ee-341f-4bb7-8008-ad086c7c7157: c2411283-086b-479f-8be1-39d21248921c -HAS_LOCATION-> 46f5ab11-76e0-484a-a129-c589ef042818
2025-07-30 08:06:59 [debug    ] Created location node for INT. COFFEE SHOP - DAY
[32mPASSED[0m2025-07-30 08:06:59 [debug    ] Closing database connection

tests/test_database.py::TestGraphOperations::test_scene_operations 2025-07-30 08:07:00 [info     ] Migration sequence is valid
2025-07-30 08:07:00 [info     ] Applying 5 pending migrations
2025-07-30 08:07:00 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:00 [info     ] Applying initial schema migration
2025-07-30 08:07:00 [info     ] Initial schema migration completed
2025-07-30 08:07:00 [info     ] Successfully applied migration 1
2025-07-30 08:07:00 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:00 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:00 [info     ] Successfully applied migration 2
2025-07-30 08:07:00 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:00 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:00 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:00 [info     ] Successfully applied migration 3
2025-07-30 08:07:00 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:00 [info     ] Applying scene dependencies migration
2025-07-30 08:07:00 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:00 [info     ] Successfully applied migration 4
2025-07-30 08:07:00 [info     ] Applying Migration 0:
2025-07-30 08:07:00 [info     ] Applying Script Bible migration
2025-07-30 08:07:00 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:00 [info     ] Successfully applied migration 5
2025-07-30 08:07:00 [info     ] Database migration completed successfully
2025-07-30 08:07:00 [debug    ] Creating new database connection to /tmp/tmp78_kx0d2.db
2025-07-30 08:07:00 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:07:00 [debug    ] Transaction committed successfully
2025-07-30 08:07:00 [debug    ] Added node 9e8701a7-4d6f-4c3b-b615-29ef60a54148 of type script
2025-07-30 08:07:00 [info     ] Created script graph node 9e8701a7-4d6f-4c3b-b615-29ef60a54148 for 'Test Screenplay'
2025-07-30 08:07:00 [debug    ] Transaction committed successfully
2025-07-30 08:07:00 [debug    ] Added node 54ceada6-29f7-46e9-ba58-0d4e547cfb3a of type scene
2025-07-30 08:07:00 [debug    ] Transaction committed successfully
2025-07-30 08:07:00 [debug    ] Added edge d366fd60-f852-4cad-ac90-511f678d4029: 9e8701a7-4d6f-4c3b-b615-29ef60a54148 -HAS_SCENE-> 54ceada6-29f7-46e9-ba58-0d4e547cfb3a
2025-07-30 08:07:00 [debug    ] Created scene node 1
[32mPASSED[0m2025-07-30 08:07:00 [debug    ] Closing database connection

tests/test_database.py::TestGraphOperations::test_scene_ordering 2025-07-30 08:07:01 [info     ] Migration sequence is valid
2025-07-30 08:07:01 [info     ] Applying 5 pending migrations
2025-07-30 08:07:01 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:01 [info     ] Applying initial schema migration
2025-07-30 08:07:01 [info     ] Initial schema migration completed
2025-07-30 08:07:01 [info     ] Successfully applied migration 1
2025-07-30 08:07:01 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:01 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:01 [info     ] Successfully applied migration 2
2025-07-30 08:07:01 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:01 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:01 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:01 [info     ] Successfully applied migration 3
2025-07-30 08:07:01 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:01 [info     ] Applying scene dependencies migration
2025-07-30 08:07:01 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:01 [info     ] Successfully applied migration 4
2025-07-30 08:07:01 [info     ] Applying Migration 0:
2025-07-30 08:07:01 [info     ] Applying Script Bible migration
2025-07-30 08:07:01 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:01 [info     ] Successfully applied migration 5
2025-07-30 08:07:01 [info     ] Database migration completed successfully
2025-07-30 08:07:01 [debug    ] Creating new database connection to /tmp/tmpcsjgy1ny.db
2025-07-30 08:07:01 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:07:01 [debug    ] Transaction committed successfully
2025-07-30 08:07:01 [debug    ] Added node a7188976-4bb1-4ab7-b96a-d2452f85801b of type script
2025-07-30 08:07:01 [info     ] Created script graph node a7188976-4bb1-4ab7-b96a-d2452f85801b for 'Test Screenplay'
2025-07-30 08:07:01 [debug    ] Transaction committed successfully
2025-07-30 08:07:01 [debug    ] Added node 3acf7c42-4487-4594-827f-5a77946d7ba5 of type scene
2025-07-30 08:07:01 [debug    ] Transaction committed successfully
2025-07-30 08:07:01 [debug    ] Added edge 9d9990b2-4136-483f-b953-432864c81dd9: a7188976-4bb1-4ab7-b96a-d2452f85801b -HAS_SCENE-> 3acf7c42-4487-4594-827f-5a77946d7ba5
2025-07-30 08:07:01 [debug    ] Created scene node 1
2025-07-30 08:07:01 [debug    ] Transaction committed successfully
2025-07-30 08:07:01 [debug    ] Added node 10278e26-9651-434d-859a-34ee12336c79 of type scene
2025-07-30 08:07:01 [debug    ] Transaction committed successfully
2025-07-30 08:07:01 [debug    ] Added edge be1550ba-a635-4688-a90a-476f035b399d: a7188976-4bb1-4ab7-b96a-d2452f85801b -HAS_SCENE-> 10278e26-9651-434d-859a-34ee12336c79
2025-07-30 08:07:01 [debug    ] Created scene node 2
2025-07-30 08:07:01 [debug    ] Transaction committed successfully
2025-07-30 08:07:01 [debug    ] Added node 9753c1ad-5be9-4260-8c1c-2085bd8972fd of type scene
2025-07-30 08:07:01 [debug    ] Transaction committed successfully
2025-07-30 08:07:01 [debug    ] Added edge 6f782725-68ea-4307-a722-7a91a0236095: a7188976-4bb1-4ab7-b96a-d2452f85801b -HAS_SCENE-> 9753c1ad-5be9-4260-8c1c-2085bd8972fd
2025-07-30 08:07:01 [debug    ] Created scene node 3
2025-07-30 08:07:01 [debug    ] Transaction committed successfully
2025-07-30 08:07:01 [debug    ] Added edge c6519a70-dc92-406d-bb34-440eb6694a6f: 3acf7c42-4487-4594-827f-5a77946d7ba5 -FOLLOWS-> 10278e26-9651-434d-859a-34ee12336c79
2025-07-30 08:07:01 [debug    ] Transaction committed successfully
2025-07-30 08:07:01 [debug    ] Added edge 3fd3c536-a618-4181-9e36-5f0a567fb0d3: 10278e26-9651-434d-859a-34ee12336c79 -FOLLOWS-> 9753c1ad-5be9-4260-8c1c-2085bd8972fd
2025-07-30 08:07:01 [debug    ] Created script sequence for 3 scenes
[32mPASSED[0m2025-07-30 08:07:01 [debug    ] Closing database connection

tests/test_database.py::TestGraphOperations::test_character_scene_connections 2025-07-30 08:07:02 [info     ] Migration sequence is valid
2025-07-30 08:07:02 [info     ] Applying 5 pending migrations
2025-07-30 08:07:02 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:02 [info     ] Applying initial schema migration
2025-07-30 08:07:02 [info     ] Initial schema migration completed
2025-07-30 08:07:02 [info     ] Successfully applied migration 1
2025-07-30 08:07:02 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:02 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:02 [info     ] Successfully applied migration 2
2025-07-30 08:07:02 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:02 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:02 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:02 [info     ] Successfully applied migration 3
2025-07-30 08:07:02 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:02 [info     ] Applying scene dependencies migration
2025-07-30 08:07:02 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:02 [info     ] Successfully applied migration 4
2025-07-30 08:07:02 [info     ] Applying Migration 0:
2025-07-30 08:07:02 [info     ] Applying Script Bible migration
2025-07-30 08:07:02 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:02 [info     ] Successfully applied migration 5
2025-07-30 08:07:02 [info     ] Database migration completed successfully
2025-07-30 08:07:02 [debug    ] Creating new database connection to /tmp/tmpldtacap3.db
2025-07-30 08:07:02 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:07:02 [debug    ] Transaction committed successfully
2025-07-30 08:07:02 [debug    ] Added node 45a205bf-cc33-4a88-9781-918301fe3e4e of type script
2025-07-30 08:07:02 [info     ] Created script graph node 45a205bf-cc33-4a88-9781-918301fe3e4e for 'Test Screenplay'
2025-07-30 08:07:02 [debug    ] Transaction committed successfully
2025-07-30 08:07:02 [debug    ] Added node f9c73b52-f8ac-4425-8d10-b6c0bdc3584b of type character
2025-07-30 08:07:02 [debug    ] Transaction committed successfully
2025-07-30 08:07:02 [debug    ] Added edge d80caf77-0e87-4c88-ae7a-a441dae85555: 45a205bf-cc33-4a88-9781-918301fe3e4e -HAS_CHARACTER-> f9c73b52-f8ac-4425-8d10-b6c0bdc3584b
2025-07-30 08:07:02 [debug    ] Created character node for PROTAGONIST
2025-07-30 08:07:02 [debug    ] Transaction committed successfully
2025-07-30 08:07:02 [debug    ] Added node 0bbd2e80-370f-47d6-8d16-73d6812e0bf1 of type scene
2025-07-30 08:07:02 [debug    ] Transaction committed successfully
2025-07-30 08:07:02 [debug    ] Added edge 64612e40-66d6-49f2-8f50-72695024f82e: 45a205bf-cc33-4a88-9781-918301fe3e4e -HAS_SCENE-> 0bbd2e80-370f-47d6-8d16-73d6812e0bf1
2025-07-30 08:07:02 [debug    ] Created scene node 1
2025-07-30 08:07:02 [debug    ] Transaction committed successfully
2025-07-30 08:07:02 [debug    ] Added edge 8a66f381-dda2-4111-9440-d3e93af4f1d2: f9c73b52-f8ac-4425-8d10-b6c0bdc3584b -APPEARS_IN-> 0bbd2e80-370f-47d6-8d16-73d6812e0bf1
[32mPASSED[0m2025-07-30 08:07:02 [debug    ] Closing database connection

tests/test_database.py::TestGraphOperations::test_character_interactions 2025-07-30 08:07:03 [info     ] Migration sequence is valid
2025-07-30 08:07:03 [info     ] Applying 5 pending migrations
2025-07-30 08:07:03 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:03 [info     ] Applying initial schema migration
2025-07-30 08:07:03 [info     ] Initial schema migration completed
2025-07-30 08:07:03 [info     ] Successfully applied migration 1
2025-07-30 08:07:03 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:03 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:03 [info     ] Successfully applied migration 2
2025-07-30 08:07:03 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:03 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:03 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:03 [info     ] Successfully applied migration 3
2025-07-30 08:07:03 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:03 [info     ] Applying scene dependencies migration
2025-07-30 08:07:03 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:03 [info     ] Successfully applied migration 4
2025-07-30 08:07:03 [info     ] Applying Migration 0:
2025-07-30 08:07:03 [info     ] Applying Script Bible migration
2025-07-30 08:07:03 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:03 [info     ] Successfully applied migration 5
2025-07-30 08:07:03 [info     ] Database migration completed successfully
2025-07-30 08:07:03 [debug    ] Creating new database connection to /tmp/tmpzi4598pm.db
2025-07-30 08:07:03 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:07:03 [debug    ] Transaction committed successfully
2025-07-30 08:07:03 [debug    ] Added node 32ff8210-10dd-4ca0-a70d-03df2c3961bb of type script
2025-07-30 08:07:03 [info     ] Created script graph node 32ff8210-10dd-4ca0-a70d-03df2c3961bb for 'Test Screenplay'
2025-07-30 08:07:03 [debug    ] Transaction committed successfully
2025-07-30 08:07:03 [debug    ] Added node 53055a5d-8af2-4bb6-a250-8984f2bd3175 of type character
2025-07-30 08:07:03 [debug    ] Transaction committed successfully
2025-07-30 08:07:03 [debug    ] Added edge 66c210fa-eef5-49b5-85f6-2cdae859b3f2: 32ff8210-10dd-4ca0-a70d-03df2c3961bb -HAS_CHARACTER-> 53055a5d-8af2-4bb6-a250-8984f2bd3175
2025-07-30 08:07:03 [debug    ] Created character node for ALICE
2025-07-30 08:07:03 [debug    ] Transaction committed successfully
2025-07-30 08:07:03 [debug    ] Added node 397dddf7-0345-45de-b68c-7f64e016cd68 of type character
2025-07-30 08:07:03 [debug    ] Transaction committed successfully
2025-07-30 08:07:03 [debug    ] Added edge 756c9361-a9f7-4c25-8947-80ba2998b7fb: 32ff8210-10dd-4ca0-a70d-03df2c3961bb -HAS_CHARACTER-> 397dddf7-0345-45de-b68c-7f64e016cd68
2025-07-30 08:07:03 [debug    ] Created character node for BOB
2025-07-30 08:07:03 [debug    ] Transaction committed successfully
2025-07-30 08:07:03 [debug    ] Added node 52446b0b-bcba-4cbc-8db9-0fd238c8b435 of type scene
2025-07-30 08:07:03 [debug    ] Transaction committed successfully
2025-07-30 08:07:03 [debug    ] Added edge b0fde9fe-6002-4365-ad2c-d6c048da0d2c: 32ff8210-10dd-4ca0-a70d-03df2c3961bb -HAS_SCENE-> 52446b0b-bcba-4cbc-8db9-0fd238c8b435
2025-07-30 08:07:03 [debug    ] Created scene node 1
2025-07-30 08:07:03 [debug    ] Transaction committed successfully
2025-07-30 08:07:03 [debug    ] Added edge 97ba649c-ac84-4768-b1e5-64025c3d9f3e: 53055a5d-8af2-4bb6-a250-8984f2bd3175 -APPEARS_IN-> 52446b0b-bcba-4cbc-8db9-0fd238c8b435
2025-07-30 08:07:03 [debug    ] Transaction committed successfully
2025-07-30 08:07:03 [debug    ] Added edge cf4b63fe-d30b-4df9-8ad0-871e99998942: 397dddf7-0345-45de-b68c-7f64e016cd68 -APPEARS_IN-> 52446b0b-bcba-4cbc-8db9-0fd238c8b435
2025-07-30 08:07:03 [debug    ] Transaction committed successfully
2025-07-30 08:07:03 [debug    ] Added edge e1aa7752-bc38-4b4c-b795-d2cea34c8e29: 53055a5d-8af2-4bb6-a250-8984f2bd3175 -SPEAKS_TO-> 397dddf7-0345-45de-b68c-7f64e016cd68
[32mPASSED[0m2025-07-30 08:07:03 [debug    ] Closing database connection

tests/test_database.py::TestGraphOperations::test_centrality_analysis 2025-07-30 08:07:04 [info     ] Migration sequence is valid
2025-07-30 08:07:04 [info     ] Applying 5 pending migrations
2025-07-30 08:07:04 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:04 [info     ] Applying initial schema migration
2025-07-30 08:07:04 [info     ] Initial schema migration completed
2025-07-30 08:07:04 [info     ] Successfully applied migration 1
2025-07-30 08:07:04 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:05 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:05 [info     ] Successfully applied migration 2
2025-07-30 08:07:05 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:05 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:05 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:05 [info     ] Successfully applied migration 3
2025-07-30 08:07:05 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:05 [info     ] Applying scene dependencies migration
2025-07-30 08:07:05 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:05 [info     ] Successfully applied migration 4
2025-07-30 08:07:05 [info     ] Applying Migration 0:
2025-07-30 08:07:05 [info     ] Applying Script Bible migration
2025-07-30 08:07:05 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:05 [info     ] Successfully applied migration 5
2025-07-30 08:07:05 [info     ] Database migration completed successfully
2025-07-30 08:07:05 [debug    ] Creating new database connection to /tmp/tmpsxv32jg4.db
2025-07-30 08:07:05 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:07:05 [debug    ] Transaction committed successfully
2025-07-30 08:07:05 [debug    ] Added node 10f5564e-8dd2-44d4-baf1-68e262951220 of type script
2025-07-30 08:07:05 [info     ] Created script graph node 10f5564e-8dd2-44d4-baf1-68e262951220 for 'Test Screenplay'
2025-07-30 08:07:05 [debug    ] Transaction committed successfully
2025-07-30 08:07:05 [debug    ] Added node 39d7a0d4-6d6d-44b9-aeb3-478d1865aefd of type character
2025-07-30 08:07:05 [debug    ] Transaction committed successfully
2025-07-30 08:07:05 [debug    ] Added edge 4221ba35-a68b-4257-a0b8-7543edc89a2e: 10f5564e-8dd2-44d4-baf1-68e262951220 -HAS_CHARACTER-> 39d7a0d4-6d6d-44b9-aeb3-478d1865aefd
2025-07-30 08:07:05 [debug    ] Created character node for CHAR_0
2025-07-30 08:07:05 [debug    ] Transaction committed successfully
2025-07-30 08:07:05 [debug    ] Added node 7d291020-7827-4792-8d59-cbbcc4ded877 of type character
2025-07-30 08:07:05 [debug    ] Transaction committed successfully
2025-07-30 08:07:05 [debug    ] Added edge 53fd2e13-acfe-423e-9c01-018845df981a: 10f5564e-8dd2-44d4-baf1-68e262951220 -HAS_CHARACTER-> 7d291020-7827-4792-8d59-cbbcc4ded877
2025-07-30 08:07:05 [debug    ] Created character node for CHAR_1
2025-07-30 08:07:05 [debug    ] Transaction committed successfully
2025-07-30 08:07:05 [debug    ] Added node 872f297b-1f4e-4453-a30b-246e198ae6ea of type character
2025-07-30 08:07:05 [debug    ] Transaction committed successfully
2025-07-30 08:07:05 [debug    ] Added edge 10d8c308-3679-45c1-840d-3d51e28c2bee: 10f5564e-8dd2-44d4-baf1-68e262951220 -HAS_CHARACTER-> 872f297b-1f4e-4453-a30b-246e198ae6ea
2025-07-30 08:07:05 [debug    ] Created character node for CHAR_2
2025-07-30 08:07:05 [debug    ] Transaction committed successfully
2025-07-30 08:07:05 [debug    ] Added node e773095c-474a-47f8-83d2-a39ce68771e4 of type scene
2025-07-30 08:07:05 [debug    ] Transaction committed successfully
2025-07-30 08:07:05 [debug    ] Added edge 2530d5c2-45ff-409f-ab19-cfb24f9120be: 10f5564e-8dd2-44d4-baf1-68e262951220 -HAS_SCENE-> e773095c-474a-47f8-83d2-a39ce68771e4
2025-07-30 08:07:05 [debug    ] Created scene node 1
2025-07-30 08:07:05 [debug    ] Transaction committed successfully
2025-07-30 08:07:05 [debug    ] Added edge e7b5a36b-3a94-441d-989a-8c443dfc6407: 39d7a0d4-6d6d-44b9-aeb3-478d1865aefd -APPEARS_IN-> e773095c-474a-47f8-83d2-a39ce68771e4
2025-07-30 08:07:05 [debug    ] Transaction committed successfully
2025-07-30 08:07:05 [debug    ] Added edge 38bb48dd-3b15-44e4-949c-a1bc57bd9356: 7d291020-7827-4792-8d59-cbbcc4ded877 -APPEARS_IN-> e773095c-474a-47f8-83d2-a39ce68771e4
2025-07-30 08:07:05 [debug    ] Transaction committed successfully
2025-07-30 08:07:05 [debug    ] Added edge f2304729-6027-44e3-afb0-d76aa91ed1dc: 872f297b-1f4e-4453-a30b-246e198ae6ea -APPEARS_IN-> e773095c-474a-47f8-83d2-a39ce68771e4
2025-07-30 08:07:05 [debug    ] Transaction committed successfully
2025-07-30 08:07:05 [debug    ] Added edge e87e59e4-274c-4db4-b73d-a022194e3e48: 39d7a0d4-6d6d-44b9-aeb3-478d1865aefd -SPEAKS_TO-> 7d291020-7827-4792-8d59-cbbcc4ded877
2025-07-30 08:07:05 [debug    ] Transaction committed successfully
2025-07-30 08:07:05 [debug    ] Added edge 6dd255ff-37b3-43be-88c1-15cc2c3affa6: 39d7a0d4-6d6d-44b9-aeb3-478d1865aefd -SPEAKS_TO-> 872f297b-1f4e-4453-a30b-246e198ae6ea
[32mPASSED[0m2025-07-30 08:07:05 [debug    ] Closing database connection

tests/test_database.py::TestMigrationRunner::test_migration_runner_initialization [32mPASSED[0m
tests/test_database.py::TestMigrationRunner::test_apply_initial_migration 2025-07-30 08:07:06 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:06 [info     ] Applying initial schema migration
2025-07-30 08:07:06 [info     ] Initial schema migration completed
2025-07-30 08:07:06 [info     ] Successfully applied migration 1
2025-07-30 08:07:06 [info     ] Applying 4 pending migrations
2025-07-30 08:07:06 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:06 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:06 [info     ] Successfully applied migration 2
2025-07-30 08:07:06 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:06 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:06 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:06 [info     ] Successfully applied migration 3
2025-07-30 08:07:06 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:06 [info     ] Applying scene dependencies migration
2025-07-30 08:07:06 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:06 [info     ] Successfully applied migration 4
2025-07-30 08:07:06 [info     ] Applying Migration 0:
2025-07-30 08:07:06 [info     ] Applying Script Bible migration
2025-07-30 08:07:06 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:06 [info     ] Successfully applied migration 5
2025-07-30 08:07:06 [info     ] Database migration completed successfully
[32mPASSED[0m
tests/test_database.py::TestMigrationRunner::test_migrate_to_latest 2025-07-30 08:07:06 [info     ] Applying 5 pending migrations
2025-07-30 08:07:06 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:06 [info     ] Applying initial schema migration
2025-07-30 08:07:07 [info     ] Initial schema migration completed
2025-07-30 08:07:07 [info     ] Successfully applied migration 1
2025-07-30 08:07:07 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:07 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:07 [info     ] Successfully applied migration 2
2025-07-30 08:07:07 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:07 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:07 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:07 [info     ] Successfully applied migration 3
2025-07-30 08:07:07 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:07 [info     ] Applying scene dependencies migration
2025-07-30 08:07:07 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:07 [info     ] Successfully applied migration 4
2025-07-30 08:07:07 [info     ] Applying Migration 0:
2025-07-30 08:07:07 [info     ] Applying Script Bible migration
2025-07-30 08:07:07 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:07 [info     ] Successfully applied migration 5
2025-07-30 08:07:07 [info     ] Database migration completed successfully
[32mPASSED[0m
tests/test_database.py::TestMigrationRunner::test_migration_history 2025-07-30 08:07:07 [info     ] Applying 5 pending migrations
2025-07-30 08:07:07 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:07 [info     ] Applying initial schema migration
2025-07-30 08:07:07 [info     ] Initial schema migration completed
2025-07-30 08:07:07 [info     ] Successfully applied migration 1
2025-07-30 08:07:07 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:07 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:07 [info     ] Successfully applied migration 2
2025-07-30 08:07:07 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:07 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:07 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:07 [info     ] Successfully applied migration 3
2025-07-30 08:07:07 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:07 [info     ] Applying scene dependencies migration
2025-07-30 08:07:07 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:07 [info     ] Successfully applied migration 4
2025-07-30 08:07:07 [info     ] Applying Migration 0:
2025-07-30 08:07:07 [info     ] Applying Script Bible migration
2025-07-30 08:07:07 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:07 [info     ] Successfully applied migration 5
2025-07-30 08:07:07 [info     ] Database migration completed successfully
[32mPASSED[0m
tests/test_database.py::TestMigrationRunner::test_initialize_database_function 2025-07-30 08:07:08 [info     ] Migration sequence is valid
2025-07-30 08:07:08 [info     ] Applying 5 pending migrations
2025-07-30 08:07:08 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:08 [info     ] Applying initial schema migration
2025-07-30 08:07:08 [info     ] Initial schema migration completed
2025-07-30 08:07:08 [info     ] Successfully applied migration 1
2025-07-30 08:07:08 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:08 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:08 [info     ] Successfully applied migration 2
2025-07-30 08:07:08 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:08 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:08 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:08 [info     ] Successfully applied migration 3
2025-07-30 08:07:08 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:08 [info     ] Applying scene dependencies migration
2025-07-30 08:07:08 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:08 [info     ] Successfully applied migration 4
2025-07-30 08:07:08 [info     ] Applying Migration 0:
2025-07-30 08:07:08 [info     ] Applying Script Bible migration
2025-07-30 08:07:08 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:08 [info     ] Successfully applied migration 5
2025-07-30 08:07:08 [info     ] Database migration completed successfully
[32mPASSED[0m
tests/test_database.py::TestDatabaseStats::test_table_stats 2025-07-30 08:07:08 [info     ] Migration sequence is valid
2025-07-30 08:07:08 [info     ] Applying 5 pending migrations
2025-07-30 08:07:08 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:08 [info     ] Applying initial schema migration
2025-07-30 08:07:08 [info     ] Initial schema migration completed
2025-07-30 08:07:08 [info     ] Successfully applied migration 1
2025-07-30 08:07:08 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:08 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:08 [info     ] Successfully applied migration 2
2025-07-30 08:07:08 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:08 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:09 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:09 [info     ] Successfully applied migration 3
2025-07-30 08:07:09 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:09 [info     ] Applying scene dependencies migration
2025-07-30 08:07:09 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:09 [info     ] Successfully applied migration 4
2025-07-30 08:07:09 [info     ] Applying Migration 0:
2025-07-30 08:07:09 [info     ] Applying Script Bible migration
2025-07-30 08:07:09 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:09 [info     ] Successfully applied migration 5
2025-07-30 08:07:09 [info     ] Database migration completed successfully
[32mPASSED[0m
tests/test_database.py::TestDatabaseStats::test_database_size 2025-07-30 08:07:09 [info     ] Migration sequence is valid
2025-07-30 08:07:09 [info     ] Applying 5 pending migrations
2025-07-30 08:07:09 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:09 [info     ] Applying initial schema migration
2025-07-30 08:07:09 [info     ] Initial schema migration completed
2025-07-30 08:07:09 [info     ] Successfully applied migration 1
2025-07-30 08:07:09 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:09 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:09 [info     ] Successfully applied migration 2
2025-07-30 08:07:09 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:09 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:09 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:09 [info     ] Successfully applied migration 3
2025-07-30 08:07:09 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:09 [info     ] Applying scene dependencies migration
2025-07-30 08:07:09 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:09 [info     ] Successfully applied migration 4
2025-07-30 08:07:09 [info     ] Applying Migration 0:
2025-07-30 08:07:09 [info     ] Applying Script Bible migration
2025-07-30 08:07:10 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:10 [info     ] Successfully applied migration 5
2025-07-30 08:07:10 [info     ] Database migration completed successfully
[32mPASSED[0m
tests/test_database.py::TestDatabaseStats::test_performance_stats 2025-07-30 08:07:10 [info     ] Migration sequence is valid
2025-07-30 08:07:10 [info     ] Applying 5 pending migrations
2025-07-30 08:07:10 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:10 [info     ] Applying initial schema migration
2025-07-30 08:07:10 [info     ] Initial schema migration completed
2025-07-30 08:07:10 [info     ] Successfully applied migration 1
2025-07-30 08:07:10 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:10 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:10 [info     ] Successfully applied migration 2
2025-07-30 08:07:10 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:10 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:10 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:10 [info     ] Successfully applied migration 3
2025-07-30 08:07:10 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:10 [info     ] Applying scene dependencies migration
2025-07-30 08:07:10 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:10 [info     ] Successfully applied migration 4
2025-07-30 08:07:10 [info     ] Applying Migration 0:
2025-07-30 08:07:10 [info     ] Applying Script Bible migration
2025-07-30 08:07:10 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:10 [info     ] Successfully applied migration 5
2025-07-30 08:07:10 [info     ] Database migration completed successfully
[32mPASSED[0m
tests/test_database.py::TestDatabaseBackup::test_create_simple_backup 2025-07-30 08:07:11 [info     ] Migration sequence is valid
2025-07-30 08:07:11 [info     ] Applying 5 pending migrations
2025-07-30 08:07:11 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:11 [info     ] Applying initial schema migration
2025-07-30 08:07:11 [info     ] Initial schema migration completed
2025-07-30 08:07:11 [info     ] Successfully applied migration 1
2025-07-30 08:07:11 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:11 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:11 [info     ] Successfully applied migration 2
2025-07-30 08:07:11 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:11 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:11 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:11 [info     ] Successfully applied migration 3
2025-07-30 08:07:11 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:11 [info     ] Applying scene dependencies migration
2025-07-30 08:07:11 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:11 [info     ] Successfully applied migration 4
2025-07-30 08:07:11 [info     ] Applying Migration 0:
2025-07-30 08:07:11 [info     ] Applying Script Bible migration
2025-07-30 08:07:11 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:11 [info     ] Successfully applied migration 5
2025-07-30 08:07:11 [info     ] Database migration completed successfully
2025-07-30 08:07:11 [info     ] Created backup at /tmp/backup.db
[32mPASSED[0m
tests/test_database.py::TestDatabaseBackup::test_create_compressed_backup 2025-07-30 08:07:12 [info     ] Migration sequence is valid
2025-07-30 08:07:12 [info     ] Applying 5 pending migrations
2025-07-30 08:07:12 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:12 [info     ] Applying initial schema migration
2025-07-30 08:07:12 [info     ] Initial schema migration completed
2025-07-30 08:07:12 [info     ] Successfully applied migration 1
2025-07-30 08:07:12 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:12 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:12 [info     ] Successfully applied migration 2
2025-07-30 08:07:12 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:12 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:12 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:12 [info     ] Successfully applied migration 3
2025-07-30 08:07:12 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:12 [info     ] Applying scene dependencies migration
2025-07-30 08:07:12 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:12 [info     ] Successfully applied migration 4
2025-07-30 08:07:12 [info     ] Applying Migration 0:
2025-07-30 08:07:12 [info     ] Applying Script Bible migration
2025-07-30 08:07:12 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:12 [info     ] Successfully applied migration 5
2025-07-30 08:07:12 [info     ] Database migration completed successfully
2025-07-30 08:07:12 [info     ] Created backup at /tmp/tmpe6uagtwj/tmpcgsws_rv_backup.db
2025-07-30 08:07:12 [info     ] Created compressed backup at /tmp/backup.zip
[32mPASSED[0m
tests/test_database.py::TestDatabaseBackup::test_restore_backup 2025-07-30 08:07:13 [info     ] Migration sequence is valid
2025-07-30 08:07:13 [info     ] Applying 5 pending migrations
2025-07-30 08:07:13 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:13 [info     ] Applying initial schema migration
2025-07-30 08:07:13 [info     ] Initial schema migration completed
2025-07-30 08:07:13 [info     ] Successfully applied migration 1
2025-07-30 08:07:13 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:13 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:13 [info     ] Successfully applied migration 2
2025-07-30 08:07:13 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:13 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:13 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:13 [info     ] Successfully applied migration 3
2025-07-30 08:07:13 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:13 [info     ] Applying scene dependencies migration
2025-07-30 08:07:13 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:13 [info     ] Successfully applied migration 4
2025-07-30 08:07:13 [info     ] Applying Migration 0:
2025-07-30 08:07:13 [info     ] Applying Script Bible migration
2025-07-30 08:07:13 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:13 [info     ] Successfully applied migration 5
2025-07-30 08:07:13 [info     ] Database migration completed successfully
2025-07-30 08:07:13 [info     ] Created backup at /tmp/backup.db
2025-07-30 08:07:13 [info     ] Restored database from /tmp/backup.db
[32mPASSED[0m
tests/test_database.py::TestDatabaseMaintenance::test_vacuum 2025-07-30 08:07:14 [info     ] Migration sequence is valid
2025-07-30 08:07:14 [info     ] Applying 5 pending migrations
2025-07-30 08:07:14 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:14 [info     ] Applying initial schema migration
2025-07-30 08:07:14 [info     ] Initial schema migration completed
2025-07-30 08:07:14 [info     ] Successfully applied migration 1
2025-07-30 08:07:14 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:14 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:14 [info     ] Successfully applied migration 2
2025-07-30 08:07:14 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:14 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:14 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:14 [info     ] Successfully applied migration 3
2025-07-30 08:07:14 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:14 [info     ] Applying scene dependencies migration
2025-07-30 08:07:14 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:14 [info     ] Successfully applied migration 4
2025-07-30 08:07:14 [info     ] Applying Migration 0:
2025-07-30 08:07:14 [info     ] Applying Script Bible migration
2025-07-30 08:07:14 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:14 [info     ] Successfully applied migration 5
2025-07-30 08:07:14 [info     ] Database migration completed successfully
2025-07-30 08:07:14 [info     ] Running VACUUM operation
2025-07-30 08:07:14 [info     ] VACUUM completed successfully
[32mPASSED[0m
tests/test_database.py::TestDatabaseMaintenance::test_analyze 2025-07-30 08:07:15 [info     ] Migration sequence is valid
2025-07-30 08:07:15 [info     ] Applying 5 pending migrations
2025-07-30 08:07:15 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:15 [info     ] Applying initial schema migration
2025-07-30 08:07:15 [info     ] Initial schema migration completed
2025-07-30 08:07:15 [info     ] Successfully applied migration 1
2025-07-30 08:07:15 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:15 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:15 [info     ] Successfully applied migration 2
2025-07-30 08:07:15 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:15 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:15 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:15 [info     ] Successfully applied migration 3
2025-07-30 08:07:15 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:15 [info     ] Applying scene dependencies migration
2025-07-30 08:07:15 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:15 [info     ] Successfully applied migration 4
2025-07-30 08:07:15 [info     ] Applying Migration 0:
2025-07-30 08:07:15 [info     ] Applying Script Bible migration
2025-07-30 08:07:15 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:15 [info     ] Successfully applied migration 5
2025-07-30 08:07:15 [info     ] Database migration completed successfully
2025-07-30 08:07:15 [info     ] Running ANALYZE operation
2025-07-30 08:07:15 [info     ] ANALYZE completed successfully
[32mPASSED[0m
tests/test_database.py::TestDatabaseMaintenance::test_integrity_check 2025-07-30 08:07:16 [info     ] Migration sequence is valid
2025-07-30 08:07:16 [info     ] Applying 5 pending migrations
2025-07-30 08:07:16 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:16 [info     ] Applying initial schema migration
2025-07-30 08:07:16 [info     ] Initial schema migration completed
2025-07-30 08:07:16 [info     ] Successfully applied migration 1
2025-07-30 08:07:16 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:16 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:16 [info     ] Successfully applied migration 2
2025-07-30 08:07:16 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:16 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:16 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:16 [info     ] Successfully applied migration 3
2025-07-30 08:07:16 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:16 [info     ] Applying scene dependencies migration
2025-07-30 08:07:16 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:16 [info     ] Successfully applied migration 4
2025-07-30 08:07:16 [info     ] Applying Migration 0:
2025-07-30 08:07:16 [info     ] Applying Script Bible migration
2025-07-30 08:07:16 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:16 [info     ] Successfully applied migration 5
2025-07-30 08:07:16 [info     ] Database migration completed successfully
2025-07-30 08:07:16 [info     ] Database integrity check passed
[32mPASSED[0m
tests/test_database.py::TestDatabaseMaintenance::test_fragmentation_info 2025-07-30 08:07:17 [info     ] Migration sequence is valid
2025-07-30 08:07:17 [info     ] Applying 5 pending migrations
2025-07-30 08:07:17 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:17 [info     ] Applying initial schema migration
2025-07-30 08:07:17 [info     ] Initial schema migration completed
2025-07-30 08:07:17 [info     ] Successfully applied migration 1
2025-07-30 08:07:17 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:17 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:17 [info     ] Successfully applied migration 2
2025-07-30 08:07:17 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:17 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:17 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:17 [info     ] Successfully applied migration 3
2025-07-30 08:07:17 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:17 [info     ] Applying scene dependencies migration
2025-07-30 08:07:17 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:17 [info     ] Successfully applied migration 4
2025-07-30 08:07:17 [info     ] Applying Migration 0:
2025-07-30 08:07:17 [info     ] Applying Script Bible migration
2025-07-30 08:07:17 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:17 [info     ] Successfully applied migration 5
2025-07-30 08:07:17 [info     ] Database migration completed successfully
[32mPASSED[0m
tests/test_database.py::TestDatabaseMaintenance::test_optimize 2025-07-30 08:07:17 [info     ] Migration sequence is valid
2025-07-30 08:07:17 [info     ] Applying 5 pending migrations
2025-07-30 08:07:17 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:17 [info     ] Applying initial schema migration
2025-07-30 08:07:18 [info     ] Initial schema migration completed
2025-07-30 08:07:18 [info     ] Successfully applied migration 1
2025-07-30 08:07:18 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:18 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:18 [info     ] Successfully applied migration 2
2025-07-30 08:07:18 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:18 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:18 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:18 [info     ] Successfully applied migration 3
2025-07-30 08:07:18 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:18 [info     ] Applying scene dependencies migration
2025-07-30 08:07:18 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:18 [info     ] Successfully applied migration 4
2025-07-30 08:07:18 [info     ] Applying Migration 0:
2025-07-30 08:07:18 [info     ] Applying Script Bible migration
2025-07-30 08:07:18 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:18 [info     ] Successfully applied migration 5
2025-07-30 08:07:18 [info     ] Database migration completed successfully
2025-07-30 08:07:18 [info     ] Starting database optimization
2025-07-30 08:07:18 [info     ] Running ANALYZE operation
2025-07-30 08:07:18 [info     ] ANALYZE completed successfully
2025-07-30 08:07:18 [info     ] Running VACUUM operation
2025-07-30 08:07:18 [info     ] VACUUM completed successfully
2025-07-30 08:07:18 [info     ] Reindexing all tables
2025-07-30 08:07:18 [info     ] Reindex completed successfully
2025-07-30 08:07:18 [info     ] Database optimization completed successfully
[32mPASSED[0m
tests/test_database.py::TestDatabaseHealth::test_health_report 2025-07-30 08:07:18 [info     ] Migration sequence is valid
2025-07-30 08:07:18 [info     ] Applying 5 pending migrations
2025-07-30 08:07:18 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:18 [info     ] Applying initial schema migration
2025-07-30 08:07:18 [info     ] Initial schema migration completed
2025-07-30 08:07:18 [info     ] Successfully applied migration 1
2025-07-30 08:07:18 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:19 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:19 [info     ] Successfully applied migration 2
2025-07-30 08:07:19 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:19 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:19 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:19 [info     ] Successfully applied migration 3
2025-07-30 08:07:19 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:19 [info     ] Applying scene dependencies migration
2025-07-30 08:07:19 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:19 [info     ] Successfully applied migration 4
2025-07-30 08:07:19 [info     ] Applying Migration 0:
2025-07-30 08:07:19 [info     ] Applying Script Bible migration
2025-07-30 08:07:19 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:19 [info     ] Successfully applied migration 5
2025-07-30 08:07:19 [info     ] Database migration completed successfully
2025-07-30 08:07:19 [info     ] Database integrity check passed
[32mPASSED[0m
tests/test_database.py::TestDatabaseHealth::test_health_report_nonexistent_db [32mPASSED[0m
tests/test_database_vectors.py::TestVectorOperationsInitialization::test_init_with_extension_support 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/test_database_vectors.py::TestVectorOperationsInitialization::test_init_without_extension_support 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/test_database_vectors.py::TestVectorOperationsInitialization::test_init_extension_loading_fails 2025-07-30 08:07:20 [error    ] Failed to load sqlite-vec extension: Extension load failed
[32mPASSED[0m
tests/test_database_vectors.py::TestStoreEmbedding::test_store_embedding_success 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:07:20 [debug    ] Stored float32 vector for scene:scene_001 (dim=5, model=test-model)
[32mPASSED[0m
tests/test_database_vectors.py::TestStoreEmbedding::test_store_embedding_numpy_array 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:07:20 [debug    ] Stored float32 vector for character:char_001 (dim=5, model=test-model)
[32mPASSED[0m
tests/test_database_vectors.py::TestStoreEmbedding::test_store_embedding_failure 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:07:20 [error    ] Failed to store embedding: Database error
[32mPASSED[0m
tests/test_database_vectors.py::TestGetEmbedding::test_get_embedding_success 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/test_database_vectors.py::TestGetEmbedding::test_get_embedding_not_found 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/test_database_vectors.py::TestGetEmbedding::test_get_embedding_error 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:07:20 [error    ] Failed to retrieve embedding: Database error
[32mPASSED[0m
tests/test_database_vectors.py::TestFindSimilar::test_find_similar_basic 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:07:20 [debug    ] Found 3 similar vectors using cosine distance (limit=10)
[32mPASSED[0m
tests/test_database_vectors.py::TestFindSimilar::test_find_similar_with_filters 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:07:20 [debug    ] Found 0 similar vectors using l2 distance (limit=5)
[32mPASSED[0m
tests/test_database_vectors.py::TestFindSimilar::test_find_similar_no_filters 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:07:20 [debug    ] Found 0 similar vectors using cosine distance (limit=20)
[32mPASSED[0m
tests/test_database_vectors.py::TestVectorConversion::test_convert_to_blob_list 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/test_database_vectors.py::TestVectorConversion::test_convert_to_blob_numpy 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/test_database_vectors.py::TestVectorConversion::test_convert_to_blob_bytes 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/test_database_vectors.py::TestVectorConversion::test_convert_from_blob_float32 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/test_database_vectors.py::TestVectorConversion::test_convert_from_blob_int8 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/test_database_vectors.py::TestDistanceMetrics::test_get_distance_function_cosine 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/test_database_vectors.py::TestDistanceMetrics::test_get_distance_function_l2 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/test_database_vectors.py::TestDistanceMetrics::test_get_distance_function_l1 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/test_database_vectors.py::TestDistanceMetrics::test_get_distance_function_invalid 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/test_database_vectors.py::TestVectorDimensions::test_get_vector_dimension_list 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/test_database_vectors.py::TestVectorDimensions::test_get_vector_dimension_numpy 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/test_database_vectors.py::TestVectorDimensions::test_get_vector_dimension_bytes 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/test_database_vectors.py::TestBatchOperations::test_batch_store_embeddings 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:07:20 [debug    ] Stored float32 vector for scene:scene_000 (dim=3, model=test-model)
2025-07-30 08:07:20 [debug    ] Stored float32 vector for scene:scene_001 (dim=3, model=test-model)
2025-07-30 08:07:20 [debug    ] Stored float32 vector for scene:scene_002 (dim=3, model=test-model)
2025-07-30 08:07:20 [debug    ] Stored float32 vector for scene:scene_003 (dim=3, model=test-model)
2025-07-30 08:07:20 [debug    ] Stored float32 vector for scene:scene_004 (dim=3, model=test-model)
[32mPASSED[0m
tests/test_database_vectors.py::TestBatchOperations::test_delete_embeddings 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:07:20 [info     ] Deleted 3 embeddings
[32mPASSED[0m
tests/test_database_vectors.py::TestBatchOperations::test_count_embeddings 2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
[32mPASSED[0m
tests/test_e2e_workflows.py::TestE2EScriptUploadWorkflow::test_api_script_upload_and_search 2025-07-30 08:07:20 [info     ] Migration sequence is valid
2025-07-30 08:07:20 [info     ] Applying 5 pending migrations
2025-07-30 08:07:20 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:20 [info     ] Applying initial schema migration
2025-07-30 08:07:20 [info     ] Initial schema migration completed
2025-07-30 08:07:20 [info     ] Successfully applied migration 1
2025-07-30 08:07:20 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:20 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:20 [info     ] Successfully applied migration 2
2025-07-30 08:07:20 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:20 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:20 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:20 [info     ] Successfully applied migration 3
2025-07-30 08:07:20 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:20 [info     ] Applying scene dependencies migration
2025-07-30 08:07:20 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:20 [info     ] Successfully applied migration 4
2025-07-30 08:07:20 [info     ] Applying Migration 0:
2025-07-30 08:07:20 [info     ] Applying Script Bible migration
2025-07-30 08:07:20 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:20 [info     ] Successfully applied migration 5
2025-07-30 08:07:20 [info     ] Database migration completed successfully
2025-07-30 08:07:20 [info     ] Starting ScriptRAG API
2025-07-30 08:07:20 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:07:20 [info     ] Migration sequence is valid
2025-07-30 08:07:20 [info     ] Database is already at latest version
2025-07-30 08:07:20 [debug    ] Creating new database connection to /tmp/tmpztvo9a82.db
2025-07-30 08:07:20 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:07:20 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmpztvo9a82.db
2025-07-30 08:07:20 [debug    ] Transaction committed successfully
2025-07-30 08:07:20 [debug    ] Transaction committed successfully
2025-07-30 08:07:20 [debug    ] Added node 14b9a9b4-b1a9-460a-9ed2-a713fd2dacdd of type script
2025-07-30 08:07:20 [info     ] Created script graph node 14b9a9b4-b1a9-460a-9ed2-a713fd2dacdd for 'The Heist'
2025-07-30 08:07:20 [debug    ] Transaction committed successfully
2025-07-30 08:07:20 [debug    ] Added node 73395da9-a9b5-4c6b-af3a-960c217b51b0 of type scene
2025-07-30 08:07:20 [debug    ] Transaction committed successfully
2025-07-30 08:07:20 [debug    ] Added edge 2a4b1c49-4b2a-4d28-8620-13d26a1ab323: 14b9a9b4-b1a9-460a-9ed2-a713fd2dacdd -HAS_SCENE-> 73395da9-a9b5-4c6b-af3a-960c217b51b0
2025-07-30 08:07:20 [debug    ] Created scene node 1
2025-07-30 08:07:20 [debug    ] Transaction committed successfully
2025-07-30 08:07:20 [debug    ] Added node 0eca3ff1-275a-4fff-8767-559e69debaa3 of type scene
2025-07-30 08:07:20 [debug    ] Transaction committed successfully
2025-07-30 08:07:20 [debug    ] Added edge 960ad426-7b78-476b-bd66-e220245f1c67: 14b9a9b4-b1a9-460a-9ed2-a713fd2dacdd -HAS_SCENE-> 0eca3ff1-275a-4fff-8767-559e69debaa3
2025-07-30 08:07:20 [debug    ] Created scene node 2
2025-07-30 08:07:20 [debug    ] Transaction committed successfully
2025-07-30 08:07:20 [debug    ] Added node 5ec2e917-0ea9-41ac-a71c-c0dfb5c97a62 of type scene
2025-07-30 08:07:20 [debug    ] Transaction committed successfully
2025-07-30 08:07:20 [debug    ] Added edge e44545a9-f242-4182-93a0-b63f28d7fe67: 14b9a9b4-b1a9-460a-9ed2-a713fd2dacdd -HAS_SCENE-> 5ec2e917-0ea9-41ac-a71c-c0dfb5c97a62
2025-07-30 08:07:20 [debug    ] Created scene node 3
2025-07-30 08:07:20 [debug    ] Transaction committed successfully
2025-07-30 08:07:20 [debug    ] Added node 3c147c51-6e39-404f-8301-b4ad4e23617b of type scene
2025-07-30 08:07:20 [debug    ] Transaction committed successfully
2025-07-30 08:07:20 [debug    ] Added edge 4923917e-3672-46fa-9bcc-d8b8d647d3db: 14b9a9b4-b1a9-460a-9ed2-a713fd2dacdd -HAS_SCENE-> 3c147c51-6e39-404f-8301-b4ad4e23617b
2025-07-30 08:07:20 [debug    ] Created scene node 4
2025-07-30 08:07:20 [debug    ] Transaction committed successfully
2025-07-30 08:07:20 [debug    ] Added node 226930b0-7aeb-4d68-89c1-336ed6ada200 of type scene
2025-07-30 08:07:20 [debug    ] Transaction committed successfully
2025-07-30 08:07:20 [debug    ] Added edge eae0f3c1-ef5d-4430-80ed-6b5b70bf5df7: 14b9a9b4-b1a9-460a-9ed2-a713fd2dacdd -HAS_SCENE-> 226930b0-7aeb-4d68-89c1-336ed6ada200
2025-07-30 08:07:20 [debug    ] Created scene node 5
2025-07-30 08:07:20 [debug    ] Transaction committed successfully
2025-07-30 08:07:20 [debug    ] Added node 7ce09b45-1951-43e6-a0a7-d41c61d43f84 of type scene
2025-07-30 08:07:20 [debug    ] Transaction committed successfully
2025-07-30 08:07:20 [debug    ] Added edge 36541842-21b8-4377-8793-d2ab94df286c: 14b9a9b4-b1a9-460a-9ed2-a713fd2dacdd -HAS_SCENE-> 7ce09b45-1951-43e6-a0a7-d41c61d43f84
2025-07-30 08:07:20 [debug    ] Created scene node 6
2025-07-30 08:07:20 [info     ] Stored script                  script_id=774a628c-d3aa-4f7d-ae3f-fbbb25e3dde8 title='The Heist'
2025-07-30 08:07:20 [warning  ] list_scripts returning placeholder values placeholder_fields=['character_count', 'has_embeddings'] script_count=1
[32mPASSED[0m2025-07-30 08:07:20 [info     ] Shutting down ScriptRAG API

tests/test_e2e_workflows.py::TestE2EScriptUploadWorkflow::test_cli_import_and_analyze_workflow [33mSKIPPED[0m
tests/test_e2e_workflows.py::TestE2ECharacterAnalysisWorkflow::test_character_relationships_via_api 2025-07-30 08:07:21 [info     ] Migration sequence is valid
2025-07-30 08:07:21 [info     ] Applying 5 pending migrations
2025-07-30 08:07:21 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:21 [info     ] Applying initial schema migration
2025-07-30 08:07:21 [info     ] Initial schema migration completed
2025-07-30 08:07:21 [info     ] Successfully applied migration 1
2025-07-30 08:07:21 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:21 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:21 [info     ] Successfully applied migration 2
2025-07-30 08:07:21 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:21 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:21 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:21 [info     ] Successfully applied migration 3
2025-07-30 08:07:21 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:21 [info     ] Applying scene dependencies migration
2025-07-30 08:07:21 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:21 [info     ] Successfully applied migration 4
2025-07-30 08:07:21 [info     ] Applying Migration 0:
2025-07-30 08:07:21 [info     ] Applying Script Bible migration
2025-07-30 08:07:21 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:21 [info     ] Successfully applied migration 5
2025-07-30 08:07:21 [info     ] Database migration completed successfully
2025-07-30 08:07:21 [info     ] Starting ScriptRAG API
2025-07-30 08:07:21 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:07:21 [info     ] Migration sequence is valid
2025-07-30 08:07:21 [info     ] Database is already at latest version
2025-07-30 08:07:21 [debug    ] Creating new database connection to /tmp/tmpfa4mrm39.db
2025-07-30 08:07:21 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:07:21 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmpfa4mrm39.db
2025-07-30 08:07:21 [debug    ] Transaction committed successfully
2025-07-30 08:07:21 [debug    ] Transaction committed successfully
2025-07-30 08:07:21 [debug    ] Added node 1094d5e1-4fb1-4145-9005-c4a99aca2412 of type script
2025-07-30 08:07:21 [info     ] Created script graph node 1094d5e1-4fb1-4145-9005-c4a99aca2412 for 'Complex Relationships'
2025-07-30 08:07:21 [debug    ] Transaction committed successfully
2025-07-30 08:07:21 [debug    ] Added node fa72ed35-fabf-4799-b1d8-a326cbc4afdc of type scene
2025-07-30 08:07:21 [debug    ] Transaction committed successfully
2025-07-30 08:07:21 [debug    ] Added edge 608df057-73bd-4386-9f6c-741a8285d521: 1094d5e1-4fb1-4145-9005-c4a99aca2412 -HAS_SCENE-> fa72ed35-fabf-4799-b1d8-a326cbc4afdc
2025-07-30 08:07:21 [debug    ] Created scene node 1
2025-07-30 08:07:21 [info     ] Stored script                  script_id=de0bb5db-7fcf-467e-b53a-4df6e785d033 title='Complex Relationships'
[32mPASSED[0m2025-07-30 08:07:21 [info     ] Shutting down ScriptRAG API

tests/test_e2e_workflows.py::TestE2ESceneManagementWorkflow::test_scene_crud_operations 2025-07-30 08:07:21 [info     ] Migration sequence is valid
2025-07-30 08:07:21 [info     ] Applying 5 pending migrations
2025-07-30 08:07:21 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:21 [info     ] Applying initial schema migration
2025-07-30 08:07:22 [info     ] Initial schema migration completed
2025-07-30 08:07:22 [info     ] Successfully applied migration 1
2025-07-30 08:07:22 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:22 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:22 [info     ] Successfully applied migration 2
2025-07-30 08:07:22 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:22 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:22 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:22 [info     ] Successfully applied migration 3
2025-07-30 08:07:22 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:22 [info     ] Applying scene dependencies migration
2025-07-30 08:07:22 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:22 [info     ] Successfully applied migration 4
2025-07-30 08:07:22 [info     ] Applying Migration 0:
2025-07-30 08:07:22 [info     ] Applying Script Bible migration
2025-07-30 08:07:22 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:22 [info     ] Successfully applied migration 5
2025-07-30 08:07:22 [info     ] Database migration completed successfully
2025-07-30 08:07:22 [info     ] Starting ScriptRAG API
2025-07-30 08:07:22 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:07:22 [info     ] Migration sequence is valid
2025-07-30 08:07:22 [info     ] Database is already at latest version
2025-07-30 08:07:22 [debug    ] Creating new database connection to /tmp/tmp52ndlfjc.db
2025-07-30 08:07:22 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:07:22 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmp52ndlfjc.db
2025-07-30 08:07:22 [debug    ] Transaction committed successfully
2025-07-30 08:07:22 [debug    ] Transaction committed successfully
2025-07-30 08:07:22 [debug    ] Added node 611c2155-99ee-4ff3-809f-dddbed24aa1e of type script
2025-07-30 08:07:22 [info     ] Created script graph node 611c2155-99ee-4ff3-809f-dddbed24aa1e for 'Scene Management Test'
2025-07-30 08:07:22 [debug    ] Transaction committed successfully
2025-07-30 08:07:22 [debug    ] Added node 222afbfe-6bba-4a9a-95b3-465e6c2009a6 of type scene
2025-07-30 08:07:22 [debug    ] Transaction committed successfully
2025-07-30 08:07:22 [debug    ] Added edge 5621a2c5-a3df-4818-8c10-5511fff4a601: 611c2155-99ee-4ff3-809f-dddbed24aa1e -HAS_SCENE-> 222afbfe-6bba-4a9a-95b3-465e6c2009a6
2025-07-30 08:07:22 [debug    ] Created scene node 1
2025-07-30 08:07:22 [info     ] Stored script                  script_id=05a665f9-328b-42c0-a6be-ffbcae2ed7e7 title='Scene Management Test'
2025-07-30 08:07:22 [debug    ] Transaction committed successfully
2025-07-30 08:07:22 [debug    ] Transaction committed successfully
2025-07-30 08:07:22 [error    ] Scene 4a9d9ac6-f23d-4d78-8106-4bb5fbcbc44c not found
2025-07-30 08:07:22 [debug    ] Transaction committed successfully
2025-07-30 08:07:22 [error    ] Scene 4a9d9ac6-f23d-4d78-8106-4bb5fbcbc44c not found
2025-07-30 08:07:22 [debug    ] Transaction committed successfully
[32mPASSED[0m2025-07-30 08:07:22 [info     ] Shutting down ScriptRAG API

tests/test_e2e_workflows.py::TestE2ESearchAndRetrievalWorkflow::test_semantic_search_workflow 2025-07-30 08:07:22 [info     ] Migration sequence is valid
2025-07-30 08:07:22 [info     ] Applying 5 pending migrations
2025-07-30 08:07:22 [info     ] Applying Migration 1: Create initial database schema
2025-07-30 08:07:22 [info     ] Applying initial schema migration
2025-07-30 08:07:22 [info     ] Initial schema migration completed
2025-07-30 08:07:22 [info     ] Successfully applied migration 1
2025-07-30 08:07:22 [info     ] Applying Migration 2: Add sqlite-vec vector storage support to embeddings table
2025-07-30 08:07:22 [info     ] Vector storage migration applied successfully
2025-07-30 08:07:22 [info     ] Successfully applied migration 2
2025-07-30 08:07:22 [info     ] Applying Migration 3: Fix FTS table column naming to match base tables
2025-07-30 08:07:22 [info     ] Applying FTS column naming fix migration
2025-07-30 08:07:23 [info     ] FTS column naming fix migration applied successfully
2025-07-30 08:07:23 [info     ] Successfully applied migration 3
2025-07-30 08:07:23 [info     ] Applying Migration 4: Add scene dependencies table for logical ordering
2025-07-30 08:07:23 [info     ] Applying scene dependencies migration
2025-07-30 08:07:23 [info     ] Scene dependencies migration applied successfully
2025-07-30 08:07:23 [info     ] Successfully applied migration 4
2025-07-30 08:07:23 [info     ] Applying Migration 0:
2025-07-30 08:07:23 [info     ] Applying Script Bible migration
2025-07-30 08:07:23 [info     ] Script Bible migration applied successfully
2025-07-30 08:07:23 [info     ] Successfully applied migration 5
2025-07-30 08:07:23 [info     ] Database migration completed successfully
2025-07-30 08:07:23 [info     ] Starting ScriptRAG API
2025-07-30 08:07:23 [warning  ] DatabaseOperations uses synchronous SQLite operations in async functions. This blocks the event loop and should be fixed for production use.
2025-07-30 08:07:23 [info     ] Migration sequence is valid
2025-07-30 08:07:23 [info     ] Database is already at latest version
2025-07-30 08:07:23 [debug    ] Creating new database connection to /tmp/tmp2u8hv3x7.db
2025-07-30 08:07:23 [debug    ] sqlite-vec extension loaded successfully
2025-07-30 08:07:23 [info     ] Database operations initialized db_url=sqlite+aiosqlite:////tmp/tmp2u8hv3x7.db
2025-07-30 08:07:23 [debug    ] Transaction committed successfully
2025-07-30 08:07:23 [debug    ] Transaction committed successfully
2025-07-30 08:07:23 [debug    ] Added node 6a6f7451-1ed7-47ee-b6f4-65a1bef0942c of type script
2025-07-30 08:07:23 [info     ] Created script graph node 6a6f7451-1ed7-47ee-b6f4-65a1bef0942c for 'Action Script'
2025-07-30 08:07:23 [debug    ] Transaction committed successfully
2025-07-30 08:07:23 [debug    ] Added node a576c179-495c-44d5-9122-ff6d95eaa6d2 of type scene
2025-07-30 08:07:23 [debug    ] Transaction committed successfully
2025-07-30 08:07:23 [debug    ] Added edge b661033e-625b-4459-b7d6-6a5efa796ee8: 6a6f7451-1ed7-47ee-b6f4-65a1bef0942c -HAS_SCENE-> a576c179-495c-44d5-9122-ff6d95eaa6d2
2025-07-30 08:07:23 [debug    ] Created scene node 1
2025-07-30 08:07:23 [info     ] Stored script                  script_id=ebe20396-3b05-4cfd-964e-fae0454e4700 title='Action Script'
2025-07-30 08:07:23 [debug    ] Transaction committed successfully
2025-07-30 08:07:23 [debug    ] Transaction committed successfully
2025-07-30 08:07:23 [debug    ] Added node 9c4d3e76-0ee2-44cb-955a-336b72f073b8 of type script
2025-07-30 08:07:23 [info     ] Created script graph node 9c4d3e76-0ee2-44cb-955a-336b72f073b8 for 'Romance Script'
2025-07-30 08:07:23 [debug    ] Transaction committed successfully
2025-07-30 08:07:23 [debug    ] Added node a2ddec50-6471-4ec0-93aa-12c241625b31 of type scene
2025-07-30 08:07:23 [debug    ] Transaction committed successfully
2025-07-30 08:07:23 [debug    ] Added edge 0656ef75-345c-4f96-8b42-311ec754a479: 9c4d3e76-0ee2-44cb-955a-336b72f073b8 -HAS_SCENE-> a2ddec50-6471-4ec0-93aa-12c241625b31
2025-07-30 08:07:23 [debug    ] Created scene node 1
2025-07-30 08:07:23 [info     ] Stored script                  script_id=9e22242e-b20b-496a-973d-7475a4c3992e title='Romance Script'
2025-07-30 08:07:23 [debug    ] Transaction committed successfully
2025-07-30 08:07:23 [debug    ] Transaction committed successfully
2025-07-30 08:07:23 [debug    ] Added node b84a8870-797f-4e48-85e3-e0e2fb35925e of type script
2025-07-30 08:07:23 [info     ] Created script graph node b84a8870-797f-4e48-85e3-e0e2fb35925e for 'Mystery Script'
2025-07-30 08:07:23 [debug    ] Transaction committed successfully
2025-07-30 08:07:23 [debug    ] Added node 5e4f12d3-98c3-472e-9a59-03d2d36fd866 of type scene
2025-07-30 08:07:23 [debug    ] Transaction committed successfully
2025-07-30 08:07:23 [debug    ] Added edge b6f8fa8c-94f4-4854-b0d5-52a0032c3b33: b84a8870-797f-4e48-85e3-e0e2fb35925e -HAS_SCENE-> 5e4f12d3-98c3-472e-9a59-03d2d36fd866
2025-07-30 08:07:23 [debug    ] Created scene node 1
2025-07-30 08:07:23 [info     ] Stored script                  script_id=39fed499-006b-4d7f-bbfd-86fee87bd455 title='Mystery Script'
[32mPASSED[0m2025-07-30 08:07:23 [info     ] Shutting down ScriptRAG API

tests/test_e2e_workflows.py::TestE2EBulkOperationsWorkflow::test_bulk_import_tv_series [32mPASSED[0m
tests/test_embedding_integration.py::TestEmbeddingIntegration::test_content_extractor_with_real_data [2m2025-07-30T08:07:23.691956Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmpsbkgu63l.db[0m
[2m2025-07-30T08:07:23.961491Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:23.970290Z[0m [[32m[1mdebug    [0m] [1mExtracted scene content       [0m [36mcontent_items[0m=[35m3[0m [36mscene_id[0m=[35mscene-1[0m
[2m2025-07-30T08:07:23.970774Z[0m [[32m[1mdebug    [0m] [1mExtracted character content   [0m [36mcharacter_id[0m=[35mchar-1[0m [36mcontent_items[0m=[35m1[0m
[2m2025-07-30T08:07:23.971346Z[0m [[32m[1mdebug    [0m] [1mExtracted script content      [0m [36mcontent_items[0m=[35m1[0m [36mscript_id[0m=[35mtest-script-1[0m
[32mPASSED[0m
tests/test_embedding_integration.py::TestEmbeddingIntegration::test_embedding_manager_storage_and_retrieval [2m2025-07-30T08:07:24.709417Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmp2bu7sm6v.db[0m
[2m2025-07-30T08:07:24.968802Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:24.976169Z[0m [[32m[1mdebug    [0m] [1mGenerated embedding           [0m [36mcontent_length[0m=[35m35[0m [36membedding_dim[0m=[35m1536[0m [36mmodel[0m=[35mtest-model[0m
[2m2025-07-30T08:07:24.983725Z[0m [[32m[1mdebug    [0m] [1mStored embedding              [0m [36mdimension[0m=[35m1536[0m [36mentity_id[0m=[35mtest-entity-1[0m [36mentity_type[0m=[35mtest[0m [36mmodel[0m=[35mtest-model[0m
[32mPASSED[0m
tests/test_embedding_integration.py::TestEmbeddingIntegration::test_embedding_manager_batch_operations [2m2025-07-30T08:07:25.722419Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmpkeekn1id.db[0m
[2m2025-07-30T08:07:25.965931Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:25.972951Z[0m [[32m[1minfo     [0m] [1mGenerating embeddings         [0m [36mbatch_size[0m=[35m32[0m [36mcount[0m=[35m3[0m [36mmodel[0m=[35mtest-model[0m
[2m2025-07-30T08:07:25.973303Z[0m [[32m[1mdebug    [0m] [1mProcessed batch               [0m [36mbatch_size[0m=[35m3[0m [36mbatch_start[0m=[35m0[0m [36mtotal_processed[0m=[35m3[0m
[2m2025-07-30T08:07:25.974613Z[0m [[32m[1minfo     [0m] [1mGenerated all embeddings      [0m [36mtotal_count[0m=[35m3[0m
[2m2025-07-30T08:07:25.974720Z[0m [[32m[1minfo     [0m] [1mStoring embeddings            [0m [36mcount[0m=[35m3[0m [36mmodel[0m=[35mtest-model[0m
[2m2025-07-30T08:07:25.983149Z[0m [[32m[1minfo     [0m] [1mStored embeddings             [0m [36mcount[0m=[35m3[0m [36mmodel[0m=[35mtest-model[0m
[32mPASSED[0m
tests/test_embedding_integration.py::TestEmbeddingIntegration::test_similarity_search [2m2025-07-30T08:07:26.716583Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmp85vj92nl.db[0m
[2m2025-07-30T08:07:27.011324Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:27.025987Z[0m [[32m[1mdebug    [0m] [1mStored embedding              [0m [36mdimension[0m=[35m1536[0m [36mentity_id[0m=[35mscene-1[0m [36mentity_type[0m=[35mscene[0m [36mmodel[0m=[35mtest-model[0m
[2m2025-07-30T08:07:27.029383Z[0m [[32m[1mdebug    [0m] [1mStored embedding              [0m [36mdimension[0m=[35m1536[0m [36mentity_id[0m=[35mscene-2[0m [36mentity_type[0m=[35mscene[0m [36mmodel[0m=[35mtest-model[0m
[2m2025-07-30T08:07:27.032559Z[0m [[32m[1mdebug    [0m] [1mStored embedding              [0m [36mdimension[0m=[35m1536[0m [36mentity_id[0m=[35mscene-3[0m [36mentity_type[0m=[35mscene[0m [36mmodel[0m=[35mtest-model[0m
[32mPASSED[0m
tests/test_embedding_integration.py::TestEmbeddingIntegration::test_pipeline_full_workflow [2m2025-07-30T08:07:27.786317Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmptqyfn_i6.db[0m
[2m2025-07-30T08:07:28.044547Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:28.059732Z[0m [[32m[1minfo     [0m] [1mStarting script embedding processing[0m [36mbatch_size[0m=[35m32[0m [36mforce_refresh[0m=[35mFalse[0m [36mscript_id[0m=[35mtest-script-1[0m
[2m2025-07-30T08:07:28.060504Z[0m [[32m[1mdebug    [0m] [1mExtracted script content      [0m [36mcontent_items[0m=[35m1[0m [36mscript_id[0m=[35mtest-script-1[0m
[2m2025-07-30T08:07:28.060979Z[0m [[32m[1mdebug    [0m] [1mExtracted character content   [0m [36mcharacter_id[0m=[35mchar-1[0m [36mcontent_items[0m=[35m1[0m
[2m2025-07-30T08:07:28.061291Z[0m [[32m[1mdebug    [0m] [1mExtracted character content   [0m [36mcharacter_id[0m=[35mchar-2[0m [36mcontent_items[0m=[35m1[0m
[2m2025-07-30T08:07:28.061695Z[0m [[32m[1mdebug    [0m] [1mExtracted location content    [0m [36mcontent_items[0m=[35m1[0m [36mlocation_id[0m=[35mloc-1[0m
[2m2025-07-30T08:07:28.062293Z[0m [[32m[1mdebug    [0m] [1mExtracted scene content       [0m [36mcontent_items[0m=[35m3[0m [36mscene_id[0m=[35mscene-1[0m
[2m2025-07-30T08:07:28.062513Z[0m [[32m[1mdebug    [0m] [1mExtracted scene content       [0m [36mcontent_items[0m=[35m1[0m [36mscene_id[0m=[35mscene-2[0m
[2m2025-07-30T08:07:28.062706Z[0m [[32m[1minfo     [0m] [1mExtracted all script content  [0m [36mcharacter_count[0m=[35m2[0m [36mlocation_count[0m=[35m1[0m [36mscene_count[0m=[35m2[0m [36mscript_id[0m=[35mtest-script-1[0m [36mtotal_content_items[0m=[35m8[0m
[2m2025-07-30T08:07:28.063362Z[0m [[32m[1minfo     [0m] [1mGenerating embeddings         [0m [36mbatch_size[0m=[35m32[0m [36mcount[0m=[35m8[0m [36mmodel[0m=[35mtest-model[0m
[2m2025-07-30T08:07:28.063685Z[0m [[32m[1mdebug    [0m] [1mProcessed batch               [0m [36mbatch_size[0m=[35m8[0m [36mbatch_start[0m=[35m0[0m [36mtotal_processed[0m=[35m8[0m
[2m2025-07-30T08:07:28.063792Z[0m [[32m[1minfo     [0m] [1mGenerated all embeddings      [0m [36mtotal_count[0m=[35m8[0m
[2m2025-07-30T08:07:28.063953Z[0m [[32m[1minfo     [0m] [1mStoring embeddings            [0m [36mcount[0m=[35m8[0m [36mmodel[0m=[35mtest-model[0m
[2m2025-07-30T08:07:28.074552Z[0m [[32m[1minfo     [0m] [1mStored embeddings             [0m [36mcount[0m=[35m8[0m [36mmodel[0m=[35mtest-model[0m
[2m2025-07-30T08:07:28.074896Z[0m [[32m[1minfo     [0m] [1mCompleted script embedding processing[0m [36mcontents_processed[0m=[35m8[0m [36membeddings_generated[0m=[35m8[0m [36membeddings_stored[0m=[35m8[0m [36mscript_id[0m=[35mtest-script-1[0m
[2m2025-07-30T08:07:28.075131Z[0m [[32m[1minfo     [0m] [1mPerforming semantic search    [0m [36mentity_type[0m=[35mNone[0m [36mlimit[0m=[35m10[0m [36mquery[0m=[35m'coffee shop conversation'[0m
[2m2025-07-30T08:07:28.075414Z[0m [[32m[1mdebug    [0m] [1mGenerated embedding           [0m [36mcontent_length[0m=[35m24[0m [36membedding_dim[0m=[35m1536[0m [36mmodel[0m=[35mtest-model[0m
[2m2025-07-30T08:07:28.103619Z[0m [[32m[1minfo     [0m] [1mSemantic search completed     [0m [36mquery[0m=[35m'coffee shop conversation'[0m [36mresults_count[0m=[35m8[0m
[2m2025-07-30T08:07:28.110906Z[0m [[32m[1minfo     [0m] [1mFound similar scenes          [0m [36mscene_id[0m=[35mscene-1[0m [36msimilar_count[0m=[35m1[0m
[32mPASSED[0m
tests/test_embedding_integration.py::TestEmbeddingIntegration::test_embedding_persistence [2m2025-07-30T08:07:28.847538Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmp77jxte_q.db[0m
[2m2025-07-30T08:07:29.082705Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:29.096734Z[0m [[32m[1mdebug    [0m] [1mStored embedding              [0m [36mdimension[0m=[35m1536[0m [36mentity_id[0m=[35mpersist-test[0m [36mentity_type[0m=[35mtest[0m [36mmodel[0m=[35mtest-model[0m
[32mPASSED[0m
tests/test_embedding_integration.py::TestEmbeddingIntegration::test_embedding_stats_accuracy [2m2025-07-30T08:07:29.839273Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmpsw2hl2da.db[0m
[2m2025-07-30T08:07:30.103945Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:30.118485Z[0m [[32m[1mdebug    [0m] [1mStored embedding              [0m [36mdimension[0m=[35m1536[0m [36mentity_id[0m=[35mscene-1[0m [36mentity_type[0m=[35mscene[0m [36mmodel[0m=[35mtest-model[0m
[2m2025-07-30T08:07:30.122073Z[0m [[32m[1mdebug    [0m] [1mStored embedding              [0m [36mdimension[0m=[35m1536[0m [36mentity_id[0m=[35mscene-2[0m [36mentity_type[0m=[35mscene[0m [36mmodel[0m=[35mtest-model[0m
[2m2025-07-30T08:07:30.125613Z[0m [[32m[1mdebug    [0m] [1mStored embedding              [0m [36mdimension[0m=[35m1536[0m [36mentity_id[0m=[35mchar-1[0m [36mentity_type[0m=[35mcharacter[0m [36mmodel[0m=[35mtest-model[0m
[2m2025-07-30T08:07:30.129254Z[0m [[32m[1mdebug    [0m] [1mStored embedding              [0m [36mdimension[0m=[35m1536[0m [36mentity_id[0m=[35mloc-1[0m [36mentity_type[0m=[35mlocation[0m [36mmodel[0m=[35mtest-model[0m
[32mPASSED[0m
tests/test_embedding_integration.py::TestEmbeddingIntegration::test_content_extractor_edge_cases [2m2025-07-30T08:07:30.875259Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmp7kfyd2h9.db[0m
[2m2025-07-30T08:07:31.160439Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:31.164597Z[0m [[33m[1mwarning  [0m] [1mScene not found               [0m [36mscene_id[0m=[35mnonexistent[0m
[2m2025-07-30T08:07:31.164890Z[0m [[33m[1mwarning  [0m] [1mCharacter not found           [0m [36mcharacter_id[0m=[35mnonexistent[0m
[2m2025-07-30T08:07:31.165200Z[0m [[33m[1mwarning  [0m] [1mScript not found              [0m [36mscript_id[0m=[35mnonexistent[0m
[32mPASSED[0m
tests/test_embedding_integration.py::TestEmbeddingIntegration::test_embedding_deletion [2m2025-07-30T08:07:31.913499Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmp64jerg7o.db[0m
[2m2025-07-30T08:07:32.209603Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:32.225634Z[0m [[32m[1mdebug    [0m] [1mStored embedding              [0m [36mdimension[0m=[35m1536[0m [36mentity_id[0m=[35mdelete-test[0m [36mentity_type[0m=[35mtest[0m [36mmodel[0m=[35mtest-model[0m
[2m2025-07-30T08:07:32.229188Z[0m [[32m[1mdebug    [0m] [1mDeleted embedding             [0m [36mentity_id[0m=[35mdelete-test[0m [36mentity_type[0m=[35mtest[0m [36mmodel[0m=[35mtest-model[0m
[32mPASSED[0m
tests/test_embedding_integration.py::TestEmbeddingIntegration::test_vector_format_compatibility [2m2025-07-30T08:07:33.182615Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmpq_3ih7d8.db[0m
[2m2025-07-30T08:07:33.579596Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:33.598187Z[0m [[32m[1mdebug    [0m] [1mStored embedding              [0m [36mdimension[0m=[35m1536[0m [36mentity_id[0m=[35mformat-test[0m [36mentity_type[0m=[35mtest[0m [36mmodel[0m=[35mtest-model[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestEmbeddingManager::test_initialization [32mPASSED[0m
tests/test_embedding_pipeline.py::TestEmbeddingManager::test_generate_embedding_success [2m2025-07-30T08:07:34.546709Z[0m [[32m[1mdebug    [0m] [1mGenerated embedding           [0m [36mcontent_length[0m=[35m12[0m [36membedding_dim[0m=[35m1536[0m [36mmodel[0m=[35mtest-embedding-model[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestEmbeddingManager::test_generate_embedding_empty_content [32mPASSED[0m
tests/test_embedding_pipeline.py::TestEmbeddingManager::test_generate_embedding_llm_error [2m2025-07-30T08:07:34.582044Z[0m [[31m[1merror    [0m] [1mFailed to generate embedding  [0m [36mcontent[0m=[35m'test content'[0m [36merror[0m=[35m'LLM failed'[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestEmbeddingManager::test_generate_embeddings_batch [2m2025-07-30T08:07:34.599453Z[0m [[32m[1minfo     [0m] [1mGenerating embeddings         [0m [36mbatch_size[0m=[35m32[0m [36mcount[0m=[35m1[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:34.599833Z[0m [[32m[1mdebug    [0m] [1mProcessed batch               [0m [36mbatch_size[0m=[35m1[0m [36mbatch_start[0m=[35m0[0m [36mtotal_processed[0m=[35m1[0m
[2m2025-07-30T08:07:34.600104Z[0m [[32m[1minfo     [0m] [1mGenerated all embeddings      [0m [36mtotal_count[0m=[35m1[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestEmbeddingManager::test_vector_blob_conversion [32mPASSED[0m
tests/test_embedding_pipeline.py::TestEmbeddingManager::test_store_embedding [2m2025-07-30T08:07:34.631476Z[0m [[31m[1merror    [0m] [1mFailed to get embedding stats [0m [36merror[0m=[35m"'Mock' object is not subscriptable"[0m
[2m2025-07-30T08:07:34.633060Z[0m [[32m[1mdebug    [0m] [1mStored embedding              [0m [36mdimension[0m=[35m1536[0m [36mentity_id[0m=[35mtest-id[0m [36mentity_type[0m=[35mscene[0m [36mmodel[0m=[35mtest-embedding-model[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestEmbeddingManager::test_store_embedding_empty [32mPASSED[0m
tests/test_embedding_pipeline.py::TestEmbeddingManager::test_get_embedding [32mPASSED[0m
tests/test_embedding_pipeline.py::TestEmbeddingManager::test_cosine_similarity [32mPASSED[0m
tests/test_embedding_pipeline.py::TestEmbeddingManager::test_cosine_similarity_different_dimensions [32mPASSED[0m
tests/test_embedding_pipeline.py::TestContentExtractor::test_initialization [32mPASSED[0m
tests/test_embedding_pipeline.py::TestContentExtractor::test_extract_scene_content [2m2025-07-30T08:07:34.701098Z[0m [[32m[1mdebug    [0m] [1mExtracted scene content       [0m [36mcontent_items[0m=[35m3[0m [36mscene_id[0m=[35mscene-1[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestContentExtractor::test_extract_scene_content_not_found [2m2025-07-30T08:07:34.707050Z[0m [[33m[1mwarning  [0m] [1mScene not found               [0m [36mscene_id[0m=[35mnonexistent[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestContentExtractor::test_extract_character_content [2m2025-07-30T08:07:34.713188Z[0m [[32m[1mdebug    [0m] [1mExtracted character content   [0m [36mcharacter_id[0m=[35mchar-1[0m [36mcontent_items[0m=[35m1[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestContentExtractor::test_extract_script_content [2m2025-07-30T08:07:34.723472Z[0m [[32m[1mdebug    [0m] [1mExtracted script content      [0m [36mcontent_items[0m=[35m1[0m [36mscript_id[0m=[35mscript-1[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestEmbeddingPipeline::test_initialization [32mPASSED[0m
tests/test_embedding_pipeline.py::TestEmbeddingPipeline::test_process_script_success [2m2025-07-30T08:07:34.760776Z[0m [[32m[1minfo     [0m] [1mStarting script embedding processing[0m [36mbatch_size[0m=[35m32[0m [36mforce_refresh[0m=[35mFalse[0m [36mscript_id[0m=[35mscript-1[0m
[2m2025-07-30T08:07:34.761525Z[0m [[31m[1merror    [0m] [1mFailed to retrieve embedding  [0m [36mentity_id[0m=[35mscene-1[0m [36mentity_type[0m=[35mscene[0m [36merror[0m=[35m"'Mock' object is not subscriptable"[0m
[2m2025-07-30T08:07:34.762078Z[0m [[32m[1minfo     [0m] [1mGenerating embeddings         [0m [36mbatch_size[0m=[35m32[0m [36mcount[0m=[35m1[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:34.762625Z[0m [[32m[1mdebug    [0m] [1mProcessed batch               [0m [36mbatch_size[0m=[35m1[0m [36mbatch_start[0m=[35m0[0m [36mtotal_processed[0m=[35m1[0m
[2m2025-07-30T08:07:34.762797Z[0m [[32m[1minfo     [0m] [1mGenerated all embeddings      [0m [36mtotal_count[0m=[35m1[0m
[2m2025-07-30T08:07:34.763250Z[0m [[32m[1minfo     [0m] [1mCompleted script embedding processing[0m [36mcontents_processed[0m=[35m1[0m [36membeddings_generated[0m=[35m1[0m [36membeddings_stored[0m=[35m1[0m [36mscript_id[0m=[35mscript-1[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestEmbeddingPipeline::test_process_script_no_content [2m2025-07-30T08:07:34.783135Z[0m [[32m[1minfo     [0m] [1mStarting script embedding processing[0m [36mbatch_size[0m=[35m32[0m [36mforce_refresh[0m=[35mFalse[0m [36mscript_id[0m=[35mscript-1[0m
[2m2025-07-30T08:07:34.783447Z[0m [[33m[1mwarning  [0m] [1mNo content extracted from script[0m [36mscript_id[0m=[35mscript-1[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestEmbeddingPipeline::test_semantic_search [2m2025-07-30T08:07:34.801548Z[0m [[32m[1minfo     [0m] [1mPerforming semantic search    [0m [36mentity_type[0m=[35mNone[0m [36mlimit[0m=[35m10[0m [36mquery[0m=[35m'test query'[0m
[2m2025-07-30T08:07:34.802109Z[0m [[32m[1minfo     [0m] [1mSemantic search completed     [0m [36mquery[0m=[35m'test query'[0m [36mresults_count[0m=[35m1[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestEmbeddingPipeline::test_get_similar_scenes [2m2025-07-30T08:07:34.821303Z[0m [[32m[1minfo     [0m] [1mFound similar scenes          [0m [36mscene_id[0m=[35mscene-1[0m [36msimilar_count[0m=[35m1[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestEmbeddingPipeline::test_close [32mPASSED[0m
tests/test_embedding_pipeline.py::TestConvenienceFunctions::test_create_script_embeddings [32mPASSED[0m
tests/test_embedding_pipeline.py::TestConvenienceFunctions::test_search_screenplay_content [32mPASSED[0m
tests/test_embedding_pipeline.py::TestErrorHandling::test_embedding_manager_storage_error [2m2025-07-30T08:07:34.884735Z[0m [[31m[1merror    [0m] [1mFailed to get embedding stats [0m [36merror[0m=[35m"'Mock' object is not subscriptable"[0m
[2m2025-07-30T08:07:34.886201Z[0m [[31m[1merror    [0m] [1mFailed to store embedding     [0m [36mentity_id[0m=[35mtest-id[0m [36mentity_type[0m=[35mscene[0m [36merror[0m=[35m'Database error'[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestErrorHandling::test_pipeline_extraction_error [2m2025-07-30T08:07:34.903565Z[0m [[32m[1minfo     [0m] [1mStarting script embedding processing[0m [36mbatch_size[0m=[35m32[0m [36mforce_refresh[0m=[35mFalse[0m [36mscript_id[0m=[35mscript-1[0m
[2m2025-07-30T08:07:34.903892Z[0m [[31m[1merror    [0m] [1mScript embedding processing failed[0m [36merror[0m=[35m'Extraction failed'[0m [36mscript_id[0m=[35mscript-1[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestErrorHandling::test_semantic_search_error [2m2025-07-30T08:07:34.920298Z[0m [[32m[1minfo     [0m] [1mPerforming semantic search    [0m [36mentity_type[0m=[35mNone[0m [36mlimit[0m=[35m10[0m [36mquery[0m=[35m'test query'[0m
[2m2025-07-30T08:07:34.920646Z[0m [[31m[1merror    [0m] [1mFailed to generate embedding  [0m [36mcontent[0m=[35m'test query'[0m [36merror[0m=[35m'LLM failed'[0m
[2m2025-07-30T08:07:34.920768Z[0m [[31m[1merror    [0m] [1mSemantic search failed        [0m [36merror[0m=[35m'Embedding generation failed: LLM failed'[0m [36mquery[0m=[35m'test query'[0m
[2m2025-07-30T08:07:34.920942Z[0m [[31m[1merror    [0m] [1mSemantic search failed        [0m [36merror[0m=[35m'Semantic search failed: Embedding generation failed: LLM failed'[0m [36mquery[0m=[35m'test query'[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestErrorHandling::test_cleanup_embeddings_by_entity_type [2m2025-07-30T08:07:34.944716Z[0m [[32m[1minfo     [0m] [1mCleanup embeddings completed  [0m [36mdeleted_count[0m=[35m5[0m [36mentity_type[0m=[35mscene[0m [36molder_than_days[0m=[35mNone[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestErrorHandling::test_cleanup_embeddings_by_age [2m2025-07-30T08:07:34.966536Z[0m [[32m[1minfo     [0m] [1mCleanup embeddings completed  [0m [36mdeleted_count[0m=[35m10[0m [36mentity_type[0m=[35mNone[0m [36molder_than_days[0m=[35m30[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestErrorHandling::test_cleanup_embeddings_combined_filters [2m2025-07-30T08:07:34.983499Z[0m [[32m[1minfo     [0m] [1mCleanup embeddings completed  [0m [36mdeleted_count[0m=[35m3[0m [36mentity_type[0m=[35mcharacter[0m [36molder_than_days[0m=[35m7[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestErrorHandling::test_cleanup_embeddings_invalid_age [2m2025-07-30T08:07:35.000310Z[0m [[31m[1merror    [0m] [1mFailed to cleanup embeddings  [0m [36mentity_type[0m=[35mNone[0m [36merror[0m=[35m'older_than_days must be non-negative'[0m [36molder_than_days[0m=[35m-5[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestErrorHandling::test_refresh_embeddings_basic [2m2025-07-30T08:07:35.018245Z[0m [[32m[1minfo     [0m] [1mRefreshing embeddings         [0m [36membeddings_found[0m=[35m2[0m [36mentity_count[0m=[35mall[0m [36mentity_type[0m=[35mNone[0m [36mforce[0m=[35mFalse[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.018600Z[0m [[32m[1mdebug    [0m] [1mGenerated embedding           [0m [36mcontent_length[0m=[35m15[0m [36membedding_dim[0m=[35m1536[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.019250Z[0m [[31m[1merror    [0m] [1mFailed to get embedding stats [0m [36merror[0m=[35m"'Mock' object is not subscriptable"[0m
[2m2025-07-30T08:07:35.020356Z[0m [[32m[1mdebug    [0m] [1mStored embedding              [0m [36mdimension[0m=[35m1536[0m [36mentity_id[0m=[35mscene-1[0m [36mentity_type[0m=[35mscene[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.020559Z[0m [[32m[1mdebug    [0m] [1mRefreshed embedding           [0m [36mentity_id[0m=[35mscene-1[0m [36mentity_type[0m=[35mscene[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.020749Z[0m [[32m[1mdebug    [0m] [1mGenerated embedding           [0m [36mcontent_length[0m=[35m19[0m [36membedding_dim[0m=[35m1536[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.020958Z[0m [[31m[1merror    [0m] [1mFailed to get embedding stats [0m [36merror[0m=[35m"'Mock' object is not subscriptable"[0m
[2m2025-07-30T08:07:35.021963Z[0m [[32m[1mdebug    [0m] [1mStored embedding              [0m [36mdimension[0m=[35m1536[0m [36mentity_id[0m=[35mchar-1[0m [36mentity_type[0m=[35mcharacter[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.022197Z[0m [[32m[1mdebug    [0m] [1mRefreshed embedding           [0m [36mentity_id[0m=[35mchar-1[0m [36mentity_type[0m=[35mcharacter[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.022379Z[0m [[32m[1minfo     [0m] [1mRefresh embeddings completed  [0m [36mentity_type[0m=[35mNone[0m [36mforce[0m=[35mFalse[0m [36mmodel[0m=[35mtest-embedding-model[0m [36mrefreshed_count[0m=[35m2[0m [36mrequested_count[0m=[35mall[0m
[2m2025-07-30T08:07:35.023457Z[0m [[32m[1minfo     [0m] [1mRefreshing embeddings         [0m [36membeddings_found[0m=[35m2[0m [36mentity_count[0m=[35mall[0m [36mentity_type[0m=[35mNone[0m [36mforce[0m=[35mFalse[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.023725Z[0m [[32m[1mdebug    [0m] [1mGenerated embedding           [0m [36mcontent_length[0m=[35m15[0m [36membedding_dim[0m=[35m1536[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.024508Z[0m [[32m[1mdebug    [0m] [1mRefreshed embedding           [0m [36mentity_id[0m=[35mscene-1[0m [36mentity_type[0m=[35mscene[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.024746Z[0m [[32m[1mdebug    [0m] [1mGenerated embedding           [0m [36mcontent_length[0m=[35m19[0m [36membedding_dim[0m=[35m1536[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.024938Z[0m [[32m[1mdebug    [0m] [1mRefreshed embedding           [0m [36mentity_id[0m=[35mchar-1[0m [36mentity_type[0m=[35mcharacter[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.025112Z[0m [[32m[1minfo     [0m] [1mRefresh embeddings completed  [0m [36mentity_type[0m=[35mNone[0m [36mforce[0m=[35mFalse[0m [36mmodel[0m=[35mtest-embedding-model[0m [36mrefreshed_count[0m=[35m2[0m [36mrequested_count[0m=[35mall[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestErrorHandling::test_refresh_embeddings_with_filters [2m2025-07-30T08:07:35.042576Z[0m [[32m[1minfo     [0m] [1mRefreshing embeddings         [0m [36membeddings_found[0m=[35m1[0m [36mentity_count[0m=[35mall[0m [36mentity_type[0m=[35mscene[0m [36mforce[0m=[35mFalse[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.042925Z[0m [[32m[1mdebug    [0m] [1mGenerated embedding           [0m [36mcontent_length[0m=[35m15[0m [36membedding_dim[0m=[35m1536[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.043508Z[0m [[31m[1merror    [0m] [1mFailed to get embedding stats [0m [36merror[0m=[35m"'Mock' object is not subscriptable"[0m
[2m2025-07-30T08:07:35.044776Z[0m [[32m[1mdebug    [0m] [1mStored embedding              [0m [36mdimension[0m=[35m1536[0m [36mentity_id[0m=[35mscene-1[0m [36mentity_type[0m=[35mscene[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.044995Z[0m [[32m[1mdebug    [0m] [1mRefreshed embedding           [0m [36mentity_id[0m=[35mscene-1[0m [36mentity_type[0m=[35mscene[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.045222Z[0m [[32m[1minfo     [0m] [1mRefresh embeddings completed  [0m [36mentity_type[0m=[35mscene[0m [36mforce[0m=[35mFalse[0m [36mmodel[0m=[35mtest-embedding-model[0m [36mrefreshed_count[0m=[35m1[0m [36mrequested_count[0m=[35mall[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestErrorHandling::test_refresh_embeddings_force_mode [2m2025-07-30T08:07:35.064269Z[0m [[32m[1minfo     [0m] [1mRefreshing embeddings         [0m [36membeddings_found[0m=[35m1[0m [36mentity_count[0m=[35mall[0m [36mentity_type[0m=[35mNone[0m [36mforce[0m=[35mTrue[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.064667Z[0m [[32m[1mdebug    [0m] [1mGenerated embedding           [0m [36mcontent_length[0m=[35m15[0m [36membedding_dim[0m=[35m1536[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.065336Z[0m [[31m[1merror    [0m] [1mFailed to get embedding stats [0m [36merror[0m=[35m"'Mock' object is not subscriptable"[0m
[2m2025-07-30T08:07:35.066558Z[0m [[32m[1mdebug    [0m] [1mStored embedding              [0m [36mdimension[0m=[35m1536[0m [36mentity_id[0m=[35mscene-1[0m [36mentity_type[0m=[35mscene[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.066776Z[0m [[32m[1mdebug    [0m] [1mRefreshed embedding           [0m [36mentity_id[0m=[35mscene-1[0m [36mentity_type[0m=[35mscene[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.066899Z[0m [[32m[1minfo     [0m] [1mRefresh embeddings completed  [0m [36mentity_type[0m=[35mNone[0m [36mforce[0m=[35mTrue[0m [36mmodel[0m=[35mtest-embedding-model[0m [36mrefreshed_count[0m=[35m1[0m [36mrequested_count[0m=[35mall[0m
[32mPASSED[0m
tests/test_embedding_pipeline.py::TestErrorHandling::test_refresh_embeddings_error_handling [2m2025-07-30T08:07:35.092139Z[0m [[32m[1minfo     [0m] [1mRefreshing embeddings         [0m [36membeddings_found[0m=[35m2[0m [36mentity_count[0m=[35mall[0m [36mentity_type[0m=[35mNone[0m [36mforce[0m=[35mFalse[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.092717Z[0m [[33m[1mwarning  [0m] [1mFailed to refresh individual embedding[0m [36mentity_id[0m=[35mscene-1[0m [36mentity_type[0m=[35mscene[0m [36merror[0m=[35m'Generation failed'[0m
[2m2025-07-30T08:07:35.093116Z[0m [[32m[1mdebug    [0m] [1mGenerated embedding           [0m [36mcontent_length[0m=[35m15[0m [36membedding_dim[0m=[35m1536[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.093971Z[0m [[31m[1merror    [0m] [1mFailed to get embedding stats [0m [36merror[0m=[35m"'Mock' object is not subscriptable"[0m
[2m2025-07-30T08:07:35.095290Z[0m [[32m[1mdebug    [0m] [1mStored embedding              [0m [36mdimension[0m=[35m1536[0m [36mentity_id[0m=[35mscene-2[0m [36mentity_type[0m=[35mscene[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.095574Z[0m [[32m[1mdebug    [0m] [1mRefreshed embedding           [0m [36mentity_id[0m=[35mscene-2[0m [36mentity_type[0m=[35mscene[0m [36mmodel[0m=[35mtest-embedding-model[0m
[2m2025-07-30T08:07:35.095684Z[0m [[32m[1minfo     [0m] [1mRefresh embeddings completed  [0m [36mentity_type[0m=[35mNone[0m [36mforce[0m=[35mFalse[0m [36mmodel[0m=[35mtest-embedding-model[0m [36mrefreshed_count[0m=[35m1[0m [36mrequested_count[0m=[35mall[0m
[32mPASSED[0m
tests/test_graphrag_integration.py::TestGraphRAGPipelineIntegration::test_full_pipeline_script_to_search [2m2025-07-30T08:07:35.100512Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:07:35.101632Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:07:35.101907Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:07:35.102738Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:07:35.297891Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:07:35.301513Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:07:35.301717Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:07:35.320443Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:07:35.322903Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:07:35.323150Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:07:35.323561Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:07:35.359922Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:07:35.362065Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:07:35.362312Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:07:35.362916Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:07:35.374193Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:07:35.375981Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:07:35.376197Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:07:35.376569Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:07:35.496201Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:07:35.498043Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:07:35.498215Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[2m2025-07-30T08:07:35.507282Z[0m [[32m[1minfo     [0m] [1mBuilding knowledge graph for script: The Coffee Shop Encounter[0m
[2m2025-07-30T08:07:35.509659Z[0m [[32m[1mdebug    [0m] [1mAdded node 59cdb54b-7849-40b5-9d49-591d1181de9b of type script[0m
[2m2025-07-30T08:07:35.509770Z[0m [[32m[1minfo     [0m] [1mCreated script graph node 59cdb54b-7849-40b5-9d49-591d1181de9b for 'The Coffee Shop Encounter'[0m
[2m2025-07-30T08:07:35.511625Z[0m [[32m[1mdebug    [0m] [1mAdded node 10705a75-dd96-4ea1-9f39-732ba0843021 of type character[0m
[2m2025-07-30T08:07:35.513272Z[0m [[32m[1mdebug    [0m] [1mAdded edge 34b5d922-0a05-4a56-83de-3c1e89db9084: 59cdb54b-7849-40b5-9d49-591d1181de9b -HAS_CHARACTER-> 10705a75-dd96-4ea1-9f39-732ba0843021[0m
[2m2025-07-30T08:07:35.513361Z[0m [[32m[1mdebug    [0m] [1mCreated character node for JOHN[0m
[2m2025-07-30T08:07:35.513417Z[0m [[32m[1mdebug    [0m] [1mCreated character node: JOHN  [0m
[2m2025-07-30T08:07:35.515107Z[0m [[32m[1mdebug    [0m] [1mAdded node ffaa5dd5-cf51-432a-b155-6927fdd0b581 of type character[0m
[2m2025-07-30T08:07:35.516532Z[0m [[32m[1mdebug    [0m] [1mAdded edge b14d4179-8a07-4592-bb79-b6db0d9814f8: 59cdb54b-7849-40b5-9d49-591d1181de9b -HAS_CHARACTER-> ffaa5dd5-cf51-432a-b155-6927fdd0b581[0m
[2m2025-07-30T08:07:35.516618Z[0m [[32m[1mdebug    [0m] [1mCreated character node for SARAH[0m
[2m2025-07-30T08:07:35.516687Z[0m [[32m[1mdebug    [0m] [1mCreated character node: SARAH [0m
[2m2025-07-30T08:07:35.518140Z[0m [[32m[1mdebug    [0m] [1mAdded node 70dcbe62-e124-435d-b095-6e1a13d6feee of type scene[0m
[2m2025-07-30T08:07:35.519825Z[0m [[32m[1mdebug    [0m] [1mAdded edge 01f0048d-f1c0-49e2-9aa2-cb52df2e1dca: 59cdb54b-7849-40b5-9d49-591d1181de9b -HAS_SCENE-> 70dcbe62-e124-435d-b095-6e1a13d6feee[0m
[2m2025-07-30T08:07:35.519913Z[0m [[32m[1mdebug    [0m] [1mCreated scene node 1          [0m
[2m2025-07-30T08:07:35.521403Z[0m [[32m[1mdebug    [0m] [1mAdded node b8154276-c377-4191-8920-671f17e6e150 of type location[0m
[2m2025-07-30T08:07:35.523092Z[0m [[32m[1mdebug    [0m] [1mAdded edge c5af40b5-bc00-4f21-a2f9-27fb2c1a7b4a: 59cdb54b-7849-40b5-9d49-591d1181de9b -HAS_LOCATION-> b8154276-c377-4191-8920-671f17e6e150[0m
[2m2025-07-30T08:07:35.523205Z[0m [[32m[1mdebug    [0m] [1mCreated location node for INT. COFFEE SHOP - DAY[0m
[2m2025-07-30T08:07:35.524594Z[0m [[32m[1mdebug    [0m] [1mAdded edge f30992ff-b53f-4609-bff7-c263a02cb136: 70dcbe62-e124-435d-b095-6e1a13d6feee -AT_LOCATION-> b8154276-c377-4191-8920-671f17e6e150[0m
[2m2025-07-30T08:07:35.527085Z[0m [[32m[1mdebug    [0m] [1mAdded edge ebe5a194-dfb9-40b1-9ce2-478c1a6f6ce0: 10705a75-dd96-4ea1-9f39-732ba0843021 -APPEARS_IN-> 70dcbe62-e124-435d-b095-6e1a13d6feee[0m
[2m2025-07-30T08:07:35.528587Z[0m [[32m[1mdebug    [0m] [1mAdded edge 5e6019c8-53bf-4dde-a41a-bc87590d13ff: ffaa5dd5-cf51-432a-b155-6927fdd0b581 -APPEARS_IN-> 70dcbe62-e124-435d-b095-6e1a13d6feee[0m
[2m2025-07-30T08:07:35.528765Z[0m [[32m[1mdebug    [0m] [1mCreated scene node: INT. COFFEE SHOP - DAY[0m
[2m2025-07-30T08:07:35.530557Z[0m [[32m[1mdebug    [0m] [1mAdded node 82c87bf7-5398-471e-9328-666614c5a64c of type scene[0m
[2m2025-07-30T08:07:35.532078Z[0m [[32m[1mdebug    [0m] [1mAdded edge ae27bc07-7076-4298-8cc3-245f91b5cfa0: 59cdb54b-7849-40b5-9d49-591d1181de9b -HAS_SCENE-> 82c87bf7-5398-471e-9328-666614c5a64c[0m
[2m2025-07-30T08:07:35.532170Z[0m [[32m[1mdebug    [0m] [1mCreated scene node 2          [0m
[2m2025-07-30T08:07:35.533657Z[0m [[32m[1mdebug    [0m] [1mAdded node 9eb43dc4-46b8-4aab-bacf-36e74f66a0f0 of type location[0m
[2m2025-07-30T08:07:35.535771Z[0m [[32m[1mdebug    [0m] [1mAdded edge cf362b78-1ee0-469b-a6bf-46c87dcd09c2: 59cdb54b-7849-40b5-9d49-591d1181de9b -HAS_LOCATION-> 9eb43dc4-46b8-4aab-bacf-36e74f66a0f0[0m
[2m2025-07-30T08:07:35.535871Z[0m [[32m[1mdebug    [0m] [1mCreated location node for INT. COFFEE SHOP - LATER[0m
[2m2025-07-30T08:07:35.537569Z[0m [[32m[1mdebug    [0m] [1mAdded edge 4a38eeb2-6f2b-44e0-b441-c9eca197b8c5: 82c87bf7-5398-471e-9328-666614c5a64c -AT_LOCATION-> 9eb43dc4-46b8-4aab-bacf-36e74f66a0f0[0m
[2m2025-07-30T08:07:35.539757Z[0m [[32m[1mdebug    [0m] [1mAdded edge d078f654-49be-454c-8118-6f07e8ee1a0e: 10705a75-dd96-4ea1-9f39-732ba0843021 -APPEARS_IN-> 82c87bf7-5398-471e-9328-666614c5a64c[0m
[2m2025-07-30T08:07:35.541312Z[0m [[32m[1mdebug    [0m] [1mAdded edge 9d1e7aad-b555-4b3b-b21c-b6d5c2e3c3cf: ffaa5dd5-cf51-432a-b155-6927fdd0b581 -APPEARS_IN-> 82c87bf7-5398-471e-9328-666614c5a64c[0m
[2m2025-07-30T08:07:35.541488Z[0m [[32m[1mdebug    [0m] [1mCreated scene node: INT. COFFEE SHOP - LATER[0m
[2m2025-07-30T08:07:35.543417Z[0m [[32m[1mdebug    [0m] [1mAdded node 461c6ec1-1964-43a4-9cf9-dc3d50bbfb51 of type scene[0m
[2m2025-07-30T08:07:35.545124Z[0m [[32m[1mdebug    [0m] [1mAdded edge f138fd67-dba3-47e7-8b4b-2e4658ccc486: 59cdb54b-7849-40b5-9d49-591d1181de9b -HAS_SCENE-> 461c6ec1-1964-43a4-9cf9-dc3d50bbfb51[0m
[2m2025-07-30T08:07:35.545218Z[0m [[32m[1mdebug    [0m] [1mCreated scene node 3          [0m
[2m2025-07-30T08:07:35.547096Z[0m [[32m[1mdebug    [0m] [1mAdded node fedaa31d-a26e-49db-ab9d-6f7387ed2823 of type location[0m
[2m2025-07-30T08:07:35.548668Z[0m [[32m[1mdebug    [0m] [1mAdded edge 23c9a157-e36a-4e4d-88e2-9486cd25df1a: 59cdb54b-7849-40b5-9d49-591d1181de9b -HAS_LOCATION-> fedaa31d-a26e-49db-ab9d-6f7387ed2823[0m
[2m2025-07-30T08:07:35.548778Z[0m [[32m[1mdebug    [0m] [1mCreated location node for EXT. COFFEE SHOP - EVENING[0m
[2m2025-07-30T08:07:35.550769Z[0m [[32m[1mdebug    [0m] [1mAdded edge 5d7b1aad-ef8e-41b7-8da4-cbcd3618803f: 461c6ec1-1964-43a4-9cf9-dc3d50bbfb51 -AT_LOCATION-> fedaa31d-a26e-49db-ab9d-6f7387ed2823[0m
[2m2025-07-30T08:07:35.552742Z[0m [[32m[1mdebug    [0m] [1mAdded edge 29b61d7d-26a7-47be-9e1d-6c73a1440ae0: 10705a75-dd96-4ea1-9f39-732ba0843021 -APPEARS_IN-> 461c6ec1-1964-43a4-9cf9-dc3d50bbfb51[0m
[2m2025-07-30T08:07:35.554539Z[0m [[32m[1mdebug    [0m] [1mAdded edge 48c37f58-f72f-4044-a6e1-32848cbc1e8c: ffaa5dd5-cf51-432a-b155-6927fdd0b581 -APPEARS_IN-> 461c6ec1-1964-43a4-9cf9-dc3d50bbfb51[0m
[2m2025-07-30T08:07:35.554686Z[0m [[32m[1mdebug    [0m] [1mCreated scene node: EXT. COFFEE SHOP - EVENING[0m
[2m2025-07-30T08:07:35.556822Z[0m [[32m[1mdebug    [0m] [1mAdded edge a0dbc66e-4e49-4b46-9be9-1500aeb820f6: 70dcbe62-e124-435d-b095-6e1a13d6feee -FOLLOWS-> 82c87bf7-5398-471e-9328-666614c5a64c[0m
[2m2025-07-30T08:07:35.558759Z[0m [[32m[1mdebug    [0m] [1mAdded edge 0d69b859-5a1a-422d-ad3b-a50dbd24d02e: 82c87bf7-5398-471e-9328-666614c5a64c -FOLLOWS-> 461c6ec1-1964-43a4-9cf9-dc3d50bbfb51[0m
[2m2025-07-30T08:07:35.558862Z[0m [[32m[1mdebug    [0m] [1mCreated script sequence for 3 scenes[0m
[2m2025-07-30T08:07:35.558925Z[0m [[32m[1minfo     [0m] [1mKnowledge graph built successfully: 6 nodes, 2 edges[0m
[32mPASSED[0m
tests/test_graphrag_integration.py::TestGraphRAGPipelineIntegration::test_embedding_pipeline_integration [2m2025-07-30T08:07:35.564791Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:07:35.565563Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:07:35.565695Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:07:35.566074Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:07:35.685278Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:07:35.687375Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:07:35.687575Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:07:35.703331Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:07:35.705016Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:07:35.705252Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:07:35.705667Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:07:35.735000Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:07:35.736566Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:07:35.736753Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:07:35.737177Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:07:35.748065Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:07:35.749652Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:07:35.749897Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:07:35.750325Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:07:35.878734Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:07:35.882251Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:07:35.882718Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[32mPASSED[0m
tests/test_graphrag_integration.py::TestGraphRAGPipelineIntegration::test_graph_traversal_queries [2m2025-07-30T08:07:35.997293Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:07:35.998238Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:07:35.998410Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:07:35.998676Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:07:36.137319Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:07:36.140343Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:07:36.140629Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:07:36.157772Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:07:36.159982Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:07:36.160212Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:07:36.160559Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:07:36.200732Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:07:36.203703Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:07:36.203919Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:07:36.204467Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:07:36.217259Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:07:36.220121Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:07:36.220374Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:07:36.220822Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:07:36.388001Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:07:36.389709Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:07:36.389940Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[2m2025-07-30T08:07:36.399207Z[0m [[32m[1minfo     [0m] [1mBuilding knowledge graph for script: The Coffee Shop Encounter[0m
[2m2025-07-30T08:07:36.401502Z[0m [[32m[1mdebug    [0m] [1mAdded node cdccb577-dc22-462b-a2e8-059fe088778a of type script[0m
[2m2025-07-30T08:07:36.401608Z[0m [[32m[1minfo     [0m] [1mCreated script graph node cdccb577-dc22-462b-a2e8-059fe088778a for 'The Coffee Shop Encounter'[0m
[2m2025-07-30T08:07:36.403760Z[0m [[32m[1mdebug    [0m] [1mAdded node d820a7a0-513d-491e-ba56-7237ccae653c of type character[0m
[2m2025-07-30T08:07:36.405688Z[0m [[32m[1mdebug    [0m] [1mAdded edge d0cf2a51-b195-4f11-855e-ec64821a67da: cdccb577-dc22-462b-a2e8-059fe088778a -HAS_CHARACTER-> d820a7a0-513d-491e-ba56-7237ccae653c[0m
[2m2025-07-30T08:07:36.405788Z[0m [[32m[1mdebug    [0m] [1mCreated character node for JOHN[0m
[2m2025-07-30T08:07:36.405929Z[0m [[32m[1mdebug    [0m] [1mCreated character node: JOHN  [0m
[2m2025-07-30T08:07:36.407929Z[0m [[32m[1mdebug    [0m] [1mAdded node 36bb4ef0-4739-4687-ac92-abfc2975a5b2 of type character[0m
[2m2025-07-30T08:07:36.409785Z[0m [[32m[1mdebug    [0m] [1mAdded edge 8f576926-4b52-4c0f-9810-c6339a0ec6c6: cdccb577-dc22-462b-a2e8-059fe088778a -HAS_CHARACTER-> 36bb4ef0-4739-4687-ac92-abfc2975a5b2[0m
[2m2025-07-30T08:07:36.409948Z[0m [[32m[1mdebug    [0m] [1mCreated character node for SARAH[0m
[2m2025-07-30T08:07:36.410039Z[0m [[32m[1mdebug    [0m] [1mCreated character node: SARAH [0m
[2m2025-07-30T08:07:36.412165Z[0m [[32m[1mdebug    [0m] [1mAdded node dfc1ae18-40dc-4ea9-a8b5-01bb0aebc572 of type scene[0m
[2m2025-07-30T08:07:36.413985Z[0m [[32m[1mdebug    [0m] [1mAdded edge a8dcea85-8eba-49a8-beb7-31adae0515dc: cdccb577-dc22-462b-a2e8-059fe088778a -HAS_SCENE-> dfc1ae18-40dc-4ea9-a8b5-01bb0aebc572[0m
[2m2025-07-30T08:07:36.414117Z[0m [[32m[1mdebug    [0m] [1mCreated scene node 1          [0m
[2m2025-07-30T08:07:36.416369Z[0m [[32m[1mdebug    [0m] [1mAdded node 8a7d8ca0-faa1-48e3-95b4-9db8236993b7 of type location[0m
[2m2025-07-30T08:07:36.418257Z[0m [[32m[1mdebug    [0m] [1mAdded edge a6c5a580-320b-4fd1-94d1-d87dfb729448: cdccb577-dc22-462b-a2e8-059fe088778a -HAS_LOCATION-> 8a7d8ca0-faa1-48e3-95b4-9db8236993b7[0m
[2m2025-07-30T08:07:36.418362Z[0m [[32m[1mdebug    [0m] [1mCreated location node for INT. COFFEE SHOP - DAY[0m
[2m2025-07-30T08:07:36.420369Z[0m [[32m[1mdebug    [0m] [1mAdded edge 0cfdae0e-6a1b-48ca-8a81-d6d768b40124: dfc1ae18-40dc-4ea9-a8b5-01bb0aebc572 -AT_LOCATION-> 8a7d8ca0-faa1-48e3-95b4-9db8236993b7[0m
[2m2025-07-30T08:07:36.422849Z[0m [[32m[1mdebug    [0m] [1mAdded edge dc0495cd-0c16-42f7-bc4d-b32584890f19: 36bb4ef0-4739-4687-ac92-abfc2975a5b2 -APPEARS_IN-> dfc1ae18-40dc-4ea9-a8b5-01bb0aebc572[0m
[2m2025-07-30T08:07:36.424672Z[0m [[32m[1mdebug    [0m] [1mAdded edge 55a4c33b-121b-4a4c-8bbc-9673f05aa11d: d820a7a0-513d-491e-ba56-7237ccae653c -APPEARS_IN-> dfc1ae18-40dc-4ea9-a8b5-01bb0aebc572[0m
[2m2025-07-30T08:07:36.424859Z[0m [[32m[1mdebug    [0m] [1mCreated scene node: INT. COFFEE SHOP - DAY[0m
[2m2025-07-30T08:07:36.427071Z[0m [[32m[1mdebug    [0m] [1mAdded node a71902f7-dcbb-46ca-ab5f-77a4eebad3f6 of type scene[0m
[2m2025-07-30T08:07:36.428950Z[0m [[32m[1mdebug    [0m] [1mAdded edge 6e352aa9-f0b8-4171-b6b2-7316c8d42e47: cdccb577-dc22-462b-a2e8-059fe088778a -HAS_SCENE-> a71902f7-dcbb-46ca-ab5f-77a4eebad3f6[0m
[2m2025-07-30T08:07:36.429058Z[0m [[32m[1mdebug    [0m] [1mCreated scene node 2          [0m
[2m2025-07-30T08:07:36.431121Z[0m [[32m[1mdebug    [0m] [1mAdded node caaa2653-1e6a-43e7-b9d0-51cecb55aae1 of type location[0m
[2m2025-07-30T08:07:36.433004Z[0m [[32m[1mdebug    [0m] [1mAdded edge 8d9429bf-11a5-49aa-ae51-e1af0dea51ce: cdccb577-dc22-462b-a2e8-059fe088778a -HAS_LOCATION-> caaa2653-1e6a-43e7-b9d0-51cecb55aae1[0m
[2m2025-07-30T08:07:36.433144Z[0m [[32m[1mdebug    [0m] [1mCreated location node for INT. COFFEE SHOP - LATER[0m
[2m2025-07-30T08:07:36.435120Z[0m [[32m[1mdebug    [0m] [1mAdded edge fd806be5-ff49-4914-ac03-36bb4ab2d7ed: a71902f7-dcbb-46ca-ab5f-77a4eebad3f6 -AT_LOCATION-> caaa2653-1e6a-43e7-b9d0-51cecb55aae1[0m
[2m2025-07-30T08:07:36.437104Z[0m [[32m[1mdebug    [0m] [1mAdded edge 03956a68-2880-4466-a4f0-9bac8dd3d6f1: 36bb4ef0-4739-4687-ac92-abfc2975a5b2 -APPEARS_IN-> a71902f7-dcbb-46ca-ab5f-77a4eebad3f6[0m
[2m2025-07-30T08:07:36.439169Z[0m [[32m[1mdebug    [0m] [1mAdded edge 283fe5c5-c953-431d-9f85-47f05c3d2bad: d820a7a0-513d-491e-ba56-7237ccae653c -APPEARS_IN-> a71902f7-dcbb-46ca-ab5f-77a4eebad3f6[0m
[2m2025-07-30T08:07:36.439333Z[0m [[32m[1mdebug    [0m] [1mCreated scene node: INT. COFFEE SHOP - LATER[0m
[2m2025-07-30T08:07:36.441252Z[0m [[32m[1mdebug    [0m] [1mAdded node 2850e30a-87de-4736-bafe-2aaf98642855 of type scene[0m
[2m2025-07-30T08:07:36.443303Z[0m [[32m[1mdebug    [0m] [1mAdded edge b5e9d764-b721-492a-b97c-83b850a3309f: cdccb577-dc22-462b-a2e8-059fe088778a -HAS_SCENE-> 2850e30a-87de-4736-bafe-2aaf98642855[0m
[2m2025-07-30T08:07:36.443395Z[0m [[32m[1mdebug    [0m] [1mCreated scene node 3          [0m
[2m2025-07-30T08:07:36.445095Z[0m [[32m[1mdebug    [0m] [1mAdded node 8cd3cba2-eedb-44e2-97f5-f21172ef1b54 of type location[0m
[2m2025-07-30T08:07:36.446888Z[0m [[32m[1mdebug    [0m] [1mAdded edge 8bbb6955-8d24-4ff0-a99e-2e1a15b4ef1b: cdccb577-dc22-462b-a2e8-059fe088778a -HAS_LOCATION-> 8cd3cba2-eedb-44e2-97f5-f21172ef1b54[0m
[2m2025-07-30T08:07:36.446989Z[0m [[32m[1mdebug    [0m] [1mCreated location node for EXT. COFFEE SHOP - EVENING[0m
[2m2025-07-30T08:07:36.448709Z[0m [[32m[1mdebug    [0m] [1mAdded edge fa954bd0-ccd1-49d8-b4f5-472731130884: 2850e30a-87de-4736-bafe-2aaf98642855 -AT_LOCATION-> 8cd3cba2-eedb-44e2-97f5-f21172ef1b54[0m
[2m2025-07-30T08:07:36.451620Z[0m [[32m[1mdebug    [0m] [1mAdded edge c5a5a5c3-d640-4c4b-9e06-75904d6e75ac: 36bb4ef0-4739-4687-ac92-abfc2975a5b2 -APPEARS_IN-> 2850e30a-87de-4736-bafe-2aaf98642855[0m
[2m2025-07-30T08:07:36.453695Z[0m [[32m[1mdebug    [0m] [1mAdded edge e7772447-0926-474f-9c2b-c7ff8476b70a: d820a7a0-513d-491e-ba56-7237ccae653c -APPEARS_IN-> 2850e30a-87de-4736-bafe-2aaf98642855[0m
[2m2025-07-30T08:07:36.453936Z[0m [[32m[1mdebug    [0m] [1mCreated scene node: EXT. COFFEE SHOP - EVENING[0m
[2m2025-07-30T08:07:36.456270Z[0m [[32m[1mdebug    [0m] [1mAdded edge d617b8b9-2625-476e-ba41-ae2d9e0115ff: dfc1ae18-40dc-4ea9-a8b5-01bb0aebc572 -FOLLOWS-> a71902f7-dcbb-46ca-ab5f-77a4eebad3f6[0m
[2m2025-07-30T08:07:36.458315Z[0m [[32m[1mdebug    [0m] [1mAdded edge 4e0c6317-1b1e-4e58-8d2d-090e3b862f95: a71902f7-dcbb-46ca-ab5f-77a4eebad3f6 -FOLLOWS-> 2850e30a-87de-4736-bafe-2aaf98642855[0m
[2m2025-07-30T08:07:36.458440Z[0m [[32m[1mdebug    [0m] [1mCreated script sequence for 3 scenes[0m
[2m2025-07-30T08:07:36.458596Z[0m [[32m[1minfo     [0m] [1mKnowledge graph built successfully: 6 nodes, 2 edges[0m
[32mPASSED[0m
tests/test_graphrag_integration.py::TestGraphRAGPipelineIntegration::test_scene_similarity_without_embeddings [2m2025-07-30T08:07:36.462956Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:07:36.463688Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:07:36.463843Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:07:36.464230Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:07:36.631051Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:07:36.633549Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:07:36.633772Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:07:36.653267Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:07:36.655770Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:07:36.656064Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:07:36.656722Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:07:36.688957Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:07:36.691175Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:07:36.691408Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:07:36.691782Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:07:36.703584Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:07:36.705134Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:07:36.705323Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:07:36.705773Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:07:36.820160Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:07:36.821780Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:07:36.822043Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[2m2025-07-30T08:07:36.831640Z[0m [[32m[1mdebug    [0m] [1mAdded node b57d9a6b-86a5-42f2-96aa-e516f81ec5ec of type location[0m
[2m2025-07-30T08:07:36.833674Z[0m [[32m[1mdebug    [0m] [1mAdded node 37dc661b-95e0-45cf-a654-480aef6d16ab of type location[0m
[2m2025-07-30T08:07:36.836184Z[0m [[32m[1mdebug    [0m] [1mAdded node 4901fef7-8e36-4bef-adcd-4321cd017438 of type scene[0m
[2m2025-07-30T08:07:36.838366Z[0m [[32m[1mdebug    [0m] [1mAdded edge 5e99bbcc-5112-47ee-b516-d75d36987a2a: 4901fef7-8e36-4bef-adcd-4321cd017438 -OCCURS_IN-> 37dc661b-95e0-45cf-a654-480aef6d16ab[0m
[2m2025-07-30T08:07:36.840505Z[0m [[32m[1mdebug    [0m] [1mAdded node c80a5671-dd4d-4577-92de-fc598a4c96b3 of type scene[0m
[2m2025-07-30T08:07:36.842810Z[0m [[32m[1mdebug    [0m] [1mAdded edge 3013679f-3eef-4dcb-9ac0-6b520a362845: c80a5671-dd4d-4577-92de-fc598a4c96b3 -OCCURS_IN-> 37dc661b-95e0-45cf-a654-480aef6d16ab[0m
[2m2025-07-30T08:07:36.844913Z[0m [[32m[1mdebug    [0m] [1mAdded node c33b5927-ed66-49c8-937c-1bc7042b568f of type scene[0m
[2m2025-07-30T08:07:36.847451Z[0m [[32m[1mdebug    [0m] [1mAdded edge 5c5ed3d6-8744-4678-a424-e7f0417cf193: c33b5927-ed66-49c8-937c-1bc7042b568f -OCCURS_IN-> b57d9a6b-86a5-42f2-96aa-e516f81ec5ec[0m
[2m2025-07-30T08:07:36.849479Z[0m [[32m[1mdebug    [0m] [1mAdded node 37e67050-a392-426e-8146-85e4538c51d9 of type scene[0m
[2m2025-07-30T08:07:36.852162Z[0m [[32m[1mdebug    [0m] [1mAdded edge 82490fe5-659a-4ee1-b04b-502d898ad966: 37e67050-a392-426e-8146-85e4538c51d9 -OCCURS_IN-> 37dc661b-95e0-45cf-a654-480aef6d16ab[0m
[32mPASSED[0m
tests/test_graphrag_integration.py::TestGraphRAGPipelineIntegration::test_character_arc_tracking [2m2025-07-30T08:07:36.855360Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:07:36.856262Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:07:36.856419Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:07:36.856709Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:07:37.030141Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:07:37.032434Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:07:37.032697Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:07:37.052136Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:07:37.054613Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:07:37.054889Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:07:37.055418Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:07:37.094190Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:07:37.096717Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:07:37.096994Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:07:37.097518Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:07:37.112145Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:07:37.114179Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:07:37.114414Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:07:37.114859Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:07:37.263873Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:07:37.268618Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:07:37.269059Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[2m2025-07-30T08:07:37.282117Z[0m [[32m[1mdebug    [0m] [1mAdded node f3de0127-b956-4702-b404-4b54e0555ccc of type character[0m
[2m2025-07-30T08:07:37.285767Z[0m [[32m[1mdebug    [0m] [1mAdded node 17d999dc-652e-4430-bfc6-5f657aea156d of type scene[0m
[2m2025-07-30T08:07:37.289651Z[0m [[32m[1mdebug    [0m] [1mAdded edge 8e4dbf7c-510c-4e10-97bb-7541e8fb56b3: f3de0127-b956-4702-b404-4b54e0555ccc -APPEARS_IN-> 17d999dc-652e-4430-bfc6-5f657aea156d[0m
[2m2025-07-30T08:07:37.293428Z[0m [[32m[1mdebug    [0m] [1mAdded node 558918d3-4447-4eb5-92c4-6a33b5faf6cf of type scene[0m
[2m2025-07-30T08:07:37.297452Z[0m [[32m[1mdebug    [0m] [1mAdded edge dc84ed73-ff24-4590-bc41-14176e4b94db: f3de0127-b956-4702-b404-4b54e0555ccc -APPEARS_IN-> 558918d3-4447-4eb5-92c4-6a33b5faf6cf[0m
[2m2025-07-30T08:07:37.301407Z[0m [[32m[1mdebug    [0m] [1mAdded node b1704a4e-6d20-4ac0-83a9-ddcf6f97e359 of type scene[0m
[2m2025-07-30T08:07:37.305425Z[0m [[32m[1mdebug    [0m] [1mAdded edge ad37c8ee-3038-431a-933b-755a23188238: f3de0127-b956-4702-b404-4b54e0555ccc -APPEARS_IN-> b1704a4e-6d20-4ac0-83a9-ddcf6f97e359[0m
[2m2025-07-30T08:07:37.309185Z[0m [[32m[1mdebug    [0m] [1mAdded node ff745a28-98bf-4a18-9ff3-64bd748ed0d9 of type scene[0m
[2m2025-07-30T08:07:37.312828Z[0m [[32m[1mdebug    [0m] [1mAdded edge 2d608bb4-4bcc-4c71-9bcb-8176905ae9e9: f3de0127-b956-4702-b404-4b54e0555ccc -APPEARS_IN-> ff745a28-98bf-4a18-9ff3-64bd748ed0d9[0m
[2m2025-07-30T08:07:37.316481Z[0m [[32m[1mdebug    [0m] [1mAdded edge be80a08a-9fd5-4729-8063-0afa57eff1b8: 17d999dc-652e-4430-bfc6-5f657aea156d -FOLLOWED_BY-> 558918d3-4447-4eb5-92c4-6a33b5faf6cf[0m
[2m2025-07-30T08:07:37.320431Z[0m [[32m[1mdebug    [0m] [1mAdded edge 2f3c8447-f70e-4b87-b68a-9687149c3807: 558918d3-4447-4eb5-92c4-6a33b5faf6cf -FOLLOWED_BY-> b1704a4e-6d20-4ac0-83a9-ddcf6f97e359[0m
[2m2025-07-30T08:07:37.324347Z[0m [[32m[1mdebug    [0m] [1mAdded edge ac2c123b-a4ef-4bf3-a98f-ee95111b336e: b1704a4e-6d20-4ac0-83a9-ddcf6f97e359 -FOLLOWED_BY-> ff745a28-98bf-4a18-9ff3-64bd748ed0d9[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_initialization [2m2025-07-30T08:07:37.348598Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_get_available_tools_all_enabled [2m2025-07-30T08:07:37.365113Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_get_available_tools_filtered [2m2025-07-30T08:07:37.382558Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_get_available_resources [2m2025-07-30T08:07:37.398367Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_handle_list_tools [2m2025-07-30T08:07:37.412580Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_tool_parse_script [2m2025-07-30T08:07:37.424821Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_tool_parse_script_no_path [2m2025-07-30T08:07:37.434933Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_tool_search_scenes [2m2025-07-30T08:07:37.444078Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[2m2025-07-30T08:07:37.446256Z[0m [[33m[1mwarning  [0m] [1msearch_script placeholder called[0m [36mcharacters[0m=[35m['JOHN', 'MARY'][0m [36mlocation[0m=[35m'INT. CAFE'[0m [36mquery[0m=[35mcoffee[0m [36mscript_id[0m=[35mscript_0[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_tool_search_scenes_no_script_id [2m2025-07-30T08:07:37.453084Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_tool_get_character_info [2m2025-07-30T08:07:37.462896Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[2m2025-07-30T08:07:37.465048Z[0m [[33m[1mwarning  [0m] [1mget_character_info placeholder called[0m [36mcharacter_name[0m=[35mJOHN[0m [36mscript_id[0m=[35mscript_0[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_tool_analyze_timeline [2m2025-07-30T08:07:37.472195Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[2m2025-07-30T08:07:37.474431Z[0m [[33m[1mwarning  [0m] [1manalyze_timeline placeholder called[0m [36minclude_flashbacks[0m=[35mFalse[0m [36mscript_id[0m=[35mscript_0[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_tool_list_scripts [2m2025-07-30T08:07:37.481906Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_handle_tool_call_success [2m2025-07-30T08:07:37.490991Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[2m2025-07-30T08:07:37.495278Z[0m [[32m[1mdebug    [0m] [1mTool call                     [0m [36marguments[0m=[35m{'path': '/test.fountain'}[0m [36mtool[0m=[35mparse_script[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_handle_tool_call_unknown_tool [2m2025-07-30T08:07:37.503198Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[2m2025-07-30T08:07:37.505270Z[0m [[32m[1mdebug    [0m] [1mTool call                     [0m [36marguments[0m=[35m{}[0m [36mtool[0m=[35munknown_tool[0m
[2m2025-07-30T08:07:37.505485Z[0m [[31m[1merror    [0m] [1mTool call failed              [0m [36merror[0m=[35m'Unknown tool: unknown_tool'[0m [36mtool[0m=[35munknown_tool[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_handle_list_resources [2m2025-07-30T08:07:37.517942Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_handle_read_resource_list [2m2025-07-30T08:07:37.533986Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_handle_read_resource_script [2m2025-07-30T08:07:37.544696Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_handle_read_resource_unknown [2m2025-07-30T08:07:37.554836Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_handle_list_prompts [2m2025-07-30T08:07:37.564828Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_handle_get_prompt [2m2025-07-30T08:07:37.575433Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_handle_get_prompt_unknown [2m2025-07-30T08:07:37.585924Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_get_version [2m2025-07-30T08:07:37.596320Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[32mPASSED[0m
tests/test_mcp_server.py::TestScriptRAGMCPServer::test_stop [2m2025-07-30T08:07:37.604367Z[0m [[32m[1minfo     [0m] [1mScriptRAG MCP server initialized[0m [36mhost[0m=[35mlocalhost[0m [36mmax_resources[0m=[35m1000[0m [36mport[0m=[35m8080[0m
[2m2025-07-30T08:07:37.607229Z[0m [[32m[1minfo     [0m] [1mStopping MCP server           [0m
[32mPASSED[0m
tests/test_mentors_base.py::TestMentorAnalysis::test_mentor_analysis_creation [32mPASSED[0m
tests/test_mentors_base.py::TestMentorAnalysis::test_mentor_analysis_defaults [32mPASSED[0m
tests/test_mentors_base.py::TestMentorAnalysis::test_mentor_analysis_validation [32mPASSED[0m
tests/test_mentors_base.py::TestMentorResult::test_mentor_result_creation [32mPASSED[0m
tests/test_mentors_base.py::TestMentorResult::test_mentor_result_counts [32mPASSED[0m
tests/test_mentors_base.py::TestMentorResult::test_mentor_result_get_analyses_by_category [32mPASSED[0m
tests/test_mentors_base.py::TestMentorResult::test_mentor_result_get_analyses_by_scene [32mPASSED[0m
tests/test_mentors_base.py::TestBaseMentor::test_mentor_creation [32mPASSED[0m
tests/test_mentors_base.py::TestBaseMentor::test_mentor_default_config [32mPASSED[0m
tests/test_mentors_base.py::TestBaseMentor::test_mentor_validate_config_default [32mPASSED[0m
tests/test_mentors_base.py::TestBaseMentor::test_mentor_get_config_schema_default [32mPASSED[0m
tests/test_mentors_base.py::TestBaseMentor::test_mentor_analyze_script [32mPASSED[0m
tests/test_mentors_base.py::TestBaseMentor::test_mentor_analyze_scene_default [32mPASSED[0m
tests/test_mentors_base.py::TestBaseMentor::test_mentor_analyze_character_default [32mPASSED[0m
tests/test_mentors_base.py::TestBaseMentor::test_mentor_string_representation [32mPASSED[0m
tests/test_mentors_base.py::TestEnums::test_mentor_type_enum [32mPASSED[0m
tests/test_mentors_base.py::TestEnums::test_analysis_severity_enum [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_mentor_properties [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_mentor_configuration [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_config_validation [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_config_schema [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_character_arc_types [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_development_stages [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_analyze_script_error_handling [2m2025-07-30T08:07:37.674337Z[0m [[31m[1merror    [0m] [1mFailed to get script data for c0a9c864-03d4-4a19-b9ca-cb194b4580d3: Database error[0m
[2m2025-07-30T08:07:37.674552Z[0m [[31m[1merror    [0m] [1mCharacter arc analysis failed for script c0a9c864-03d4-4a19-b9ca-cb194b4580d3: Script c0a9c864-03d4-4a19-b9ca-cb194b4580d3 not found[0m
[32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_analyze_script_no_characters [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_analyze_script_with_progress_callback [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_score_calculation [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_summary_generation [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_analyze_supporting_config [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_min_arc_characters_config [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_track_relationships_config [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_arc_type_indicators [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_development_stage_positions [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_transformation_markers [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_agency_phases [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_arc_type_detection [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_transformation_marker_finding [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_character_agency_analysis [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_internal_external_conflict_analysis [32mPASSED[0m
tests/test_mentors_character_arc.py::TestCharacterArcMentor::test_comprehensive_arc_analysis [32mPASSED[0m
tests/test_mentors_database.py::TestMentorDatabaseOperations::test_store_mentor_result [2m2025-07-30T08:07:37.724879Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmprn1_fjhx/test.db[0m
[2m2025-07-30T08:07:38.157930Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:38.161803Z[0m [[32m[1mdebug    [0m] [1mMentor tables already exist from schema v5[0m
[2m2025-07-30T08:07:38.177987Z[0m [[32m[1minfo     [0m] [1mStored mentor result 7afa0d65-de57-476f-859c-a20f085a42b4 with 3 analyses[0m
[32mPASSED[0m
tests/test_mentors_database.py::TestMentorDatabaseOperations::test_store_mentor_result_with_duplicate_id [33mSKIPPED[0m
tests/test_mentors_database.py::TestMentorDatabaseOperations::test_get_mentor_result [2m2025-07-30T08:07:38.480385Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmp3p8l0879/test.db[0m
[2m2025-07-30T08:07:38.781497Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:38.784665Z[0m [[32m[1mdebug    [0m] [1mMentor tables already exist from schema v5[0m
[2m2025-07-30T08:07:38.796539Z[0m [[32m[1minfo     [0m] [1mStored mentor result 5b8a8db6-543a-4da8-a3c0-eed423eb5a02 with 3 analyses[0m
[32mPASSED[0m
tests/test_mentors_database.py::TestMentorDatabaseOperations::test_get_nonexistent_mentor_result [2m2025-07-30T08:07:39.063287Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmpqvubpc2l/test.db[0m
[2m2025-07-30T08:07:39.347288Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:39.350600Z[0m [[32m[1mdebug    [0m] [1mMentor tables already exist from schema v5[0m
[32mPASSED[0m
tests/test_mentors_database.py::TestMentorDatabaseOperations::test_get_script_mentor_results [2m2025-07-30T08:07:39.606931Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmpfuuzta9i/test.db[0m
[2m2025-07-30T08:07:39.928700Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:39.935674Z[0m [[32m[1mdebug    [0m] [1mMentor tables already exist from schema v5[0m
[2m2025-07-30T08:07:39.960289Z[0m [[32m[1minfo     [0m] [1mStored mentor result 6dbf3f43-7294-48df-a5aa-5857107c32d7 with 3 analyses[0m
[2m2025-07-30T08:07:39.971838Z[0m [[32m[1minfo     [0m] [1mStored mentor result 7f53a67a-9a5f-4aa6-ac33-abb8c9e73546 with 3 analyses[0m
[2m2025-07-30T08:07:39.983911Z[0m [[32m[1minfo     [0m] [1mStored mentor result e5a96ac5-148f-4470-a5cb-b25325d316ba with 3 analyses[0m
[32mPASSED[0m
tests/test_mentors_database.py::TestMentorDatabaseOperations::test_get_script_mentor_results_filtered_by_mentor [2m2025-07-30T08:07:40.260410Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmpyzmf_kw7/test.db[0m
[2m2025-07-30T08:07:40.561706Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:40.564682Z[0m [[32m[1mdebug    [0m] [1mMentor tables already exist from schema v5[0m
[2m2025-07-30T08:07:40.581772Z[0m [[32m[1minfo     [0m] [1mStored mentor result 2238e63d-33ca-4c17-bf9f-2554bfd5eb28 with 3 analyses[0m
[2m2025-07-30T08:07:40.591384Z[0m [[32m[1minfo     [0m] [1mStored mentor result e5e448b4-4abb-4723-bbae-2dcc1edc0d56 with 3 analyses[0m
[2m2025-07-30T08:07:40.601201Z[0m [[32m[1minfo     [0m] [1mStored mentor result 95dd65d5-3f8e-490f-8380-6b3b51db30be with 3 analyses[0m
[32mPASSED[0m
tests/test_mentors_database.py::TestMentorDatabaseOperations::test_get_scene_analyses [2m2025-07-30T08:07:40.857628Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmpqagvz3cb/test.db[0m
[2m2025-07-30T08:07:41.189395Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:41.192618Z[0m [[32m[1mdebug    [0m] [1mMentor tables already exist from schema v5[0m
[2m2025-07-30T08:07:41.205887Z[0m [[32m[1minfo     [0m] [1mStored mentor result fc517213-3edb-40d5-91d3-a4cb5a13453f with 3 analyses[0m
[32mPASSED[0m
tests/test_mentors_database.py::TestMentorDatabaseOperations::test_get_scene_analyses_filtered_by_mentor [2m2025-07-30T08:07:41.459266Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmpfq3or90s/test.db[0m
[2m2025-07-30T08:07:41.781317Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:41.784457Z[0m [[32m[1mdebug    [0m] [1mMentor tables already exist from schema v5[0m
[2m2025-07-30T08:07:41.797532Z[0m [[32m[1minfo     [0m] [1mStored mentor result c0a51252-cd4b-442e-9b07-b7756ec76a99 with 3 analyses[0m
[2m2025-07-30T08:07:41.805341Z[0m [[32m[1minfo     [0m] [1mStored mentor result 6d719c44-55f0-4165-832a-a8dfd16dc143 with 3 analyses[0m
[32mPASSED[0m
tests/test_mentors_database.py::TestMentorDatabaseOperations::test_delete_mentor_result [33mSKIPPED[0m
tests/test_mentors_database.py::TestMentorDatabaseOperations::test_delete_nonexistent_mentor_result [2m2025-07-30T08:07:42.050203Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmpbr8jygf6/test.db[0m
[2m2025-07-30T08:07:42.355255Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:42.358339Z[0m [[32m[1mdebug    [0m] [1mMentor tables already exist from schema v5[0m
[2m2025-07-30T08:07:42.363279Z[0m [[33m[1mwarning  [0m] [1mMentor result eba6ee94-4b34-4f07-b71a-927bcf306f3a not found for deletion[0m
[32mPASSED[0m
tests/test_mentors_database.py::TestMentorDatabaseOperations::test_search_analyses [33mSKIPPED[0m
tests/test_mentors_database.py::TestMentorDatabaseOperations::test_search_analyses_with_filters [33mSKIPPED[0m
tests/test_mentors_database.py::TestMentorDatabaseOperations::test_get_mentor_statistics [2m2025-07-30T08:07:42.588635Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmpxtaes2w4/test.db[0m
[2m2025-07-30T08:07:42.957780Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:42.961108Z[0m [[32m[1mdebug    [0m] [1mMentor tables already exist from schema v5[0m
[2m2025-07-30T08:07:42.977111Z[0m [[32m[1minfo     [0m] [1mStored mentor result abce57c4-a3fb-4621-a08c-4a251c6b7e2d with 3 analyses[0m
[32mPASSED[0m
tests/test_mentors_database.py::TestMentorDatabaseOperations::test_get_mentor_statistics_empty_script [2m2025-07-30T08:07:43.212419Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmpl6_o25xu/test.db[0m
[2m2025-07-30T08:07:43.557306Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:43.560602Z[0m [[32m[1mdebug    [0m] [1mMentor tables already exist from schema v5[0m
[32mPASSED[0m
tests/test_mentors_database.py::TestMentorDatabaseOperations::test_mentor_schema_creation [2m2025-07-30T08:07:43.787602Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmp9idwhzrb/test.db[0m
[2m2025-07-30T08:07:44.088808Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:44.091818Z[0m [[32m[1mdebug    [0m] [1mMentor tables already exist from schema v5[0m
[32mPASSED[0m
tests/test_mentors_database.py::TestMentorDatabaseOperations::test_analysis_serialization_round_trip [2m2025-07-30T08:07:44.313640Z[0m [[32m[1minfo     [0m] [1mCreating database schema at /tmp/tmpmacg_asp/test.db[0m
[2m2025-07-30T08:07:44.581802Z[0m [[32m[1minfo     [0m] [1mDatabase schema created successfully[0m
[2m2025-07-30T08:07:44.584749Z[0m [[32m[1mdebug    [0m] [1mMentor tables already exist from schema v5[0m
[2m2025-07-30T08:07:44.593886Z[0m [[32m[1minfo     [0m] [1mStored mentor result f6e58bb5-e2d0-4649-b186-e52ec84ee206 with 1 analyses[0m
[32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_mentor_properties [32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_mentor_configuration [32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_config_validation [2m2025-07-30T08:07:44.815020Z[0m [[33m[1mwarning  [0m] [1mminimum_stages must be an integer[0m
[32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_config_schema [32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_heros_journey_stages [32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_analyze_script_error_handling [32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_analyze_script_with_progress_callback [32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_stage_order_checking [32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_score_calculation [32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_summary_generation [32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_archetype_analysis_enabled [32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_minimum_stages_configuration [2m2025-07-30T08:07:44.835181Z[0m [[33m[1mwarning  [0m] [1mminimum_stages must be at least 1[0m
[2m2025-07-30T08:07:44.835337Z[0m [[33m[1mwarning  [0m] [1mminimum_stages cannot exceed 17 (total number of stages)[0m
[32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_genre_configuration [2m2025-07-30T08:07:44.837098Z[0m [[33m[1mwarning  [0m] [1mInvalid genre: invalid_genre. Must be one of ['general', 'action', 'drama', 'comedy', 'romance', 'thriller', 'scifi_fantasy'][0m
[32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_practical_beats_configuration [32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_stage_match_scoring [32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_get_scene_text [32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_stage_recommendations [32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_practical_coverage_calculation [32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_genre_specific_recommendations [32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_edge_case_empty_scenes [32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_scene_text_caching [32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_configuration_edge_cases [2m2025-07-30T08:07:44.851356Z[0m [[33m[1mwarning  [0m] [1mminimum_stages cannot exceed 17 (total number of stages)[0m
[2m2025-07-30T08:07:44.851507Z[0m [[33m[1mwarning  [0m] [1mminimum_stages must be at least 1[0m
[2m2025-07-30T08:07:44.851565Z[0m [[33m[1mwarning  [0m] [1mcheck_archetypes must be boolean[0m
[32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_stage_match_score_edge_cases [32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_practical_beat_coverage_mixed_stages [32mPASSED[0m
tests/test_mentors_heros_journey.py::TestHerosJourneyMentor::test_genre_specific_stage_implementation [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_registry_creation [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_register_mentor [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_register_multiple_mentors [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_register_non_mentor_class [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_register_broken_mentor [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_register_override_warning [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_unregister_mentor [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_unregister_nonexistent_mentor [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_get_mentor [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_get_mentor_with_config [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_get_nonexistent_mentor [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_get_mentors_by_type [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_list_mentors [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_list_mentors_empty [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_is_registered [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_validate_mentor [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_get_mentor_config_schema [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_get_mentor_config_schema_nonexistent [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_clear_registry [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_contains_operator [32mPASSED[0m
tests/test_mentors_registry.py::TestMentorRegistry::test_iteration [32mPASSED[0m
tests/test_mentors_registry.py::TestGlobalRegistry::test_get_global_registry [32mPASSED[0m
tests/test_mentors_registry.py::TestGlobalRegistry::test_global_registry_has_builtin_mentors [32mPASSED[0m
tests/test_mentors_registry.py::TestGlobalRegistry::test_reset_global_registry [32mPASSED[0m
tests/test_mentors_registry.py::TestGlobalRegistry::test_global_registry_thread_safety [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatBeat::test_beat_creation [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatBeat::test_beat_defaults [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatBeat::test_save_the_cat_beats_structure [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatBeat::test_beat_keywords [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_mentor_properties [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_mentor_configuration [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_config_validation [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_config_schema [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_analyze_script_error_handling [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_analyze_script_empty_script [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_analyze_script_with_progress_callback [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_estimate_total_pages [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_find_beat_in_scenes [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_analyze_beat_timing [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_analyze_beats_with_scaling [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_analyze_structure [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_analyze_character_arc [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_calculate_score [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_generate_summary [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_comprehensive_script_analysis [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_strict_mode_configuration [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_tolerance_affects_beat_timing [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_different_page_counts [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_mentor_registry_integration [32mPASSED[0m
tests/test_mentors_save_the_cat.py::TestSaveTheCatMentor::test_beat_analysis_recommendations [32mPASSED[0m
tests/test_mentors_three_act_structure.py::TestThreeActStructureMentor::test_mentor_properties [32mPASSED[0m
tests/test_mentors_three_act_structure.py::TestThreeActStructureMentor::test_mentor_configuration [32mPASSED[0m
tests/test_mentors_three_act_structure.py::TestThreeActStructureMentor::test_config_validation [32mPASSED[0m
tests/test_mentors_three_act_structure.py::TestThreeActStructureMentor::test_config_schema [32mPASSED[0m
tests/test_mentors_three_act_structure.py::TestThreeActStructureMentor::test_structural_elements [32mPASSED[0m
tests/test_mentors_three_act_structure.py::TestThreeActStructureMentor::test_act_proportions [32mPASSED[0m
tests/test_mentors_three_act_structure.py::TestThreeActStructureMentor::test_analyze_script_error_handling [32mPASSED[0m
tests/test_mentors_three_act_structure.py::TestThreeActStructureMentor::test_analyze_script_with_progress_callback [32mPASSED[0m
tests/test_mentors_three_act_structure.py::TestThreeActStructureMentor::test_act_proportion_analysis [32mPASSED[0m
tests/test_mentors_three_act_structure.py::TestThreeActStructureMentor::test_page_estimation [32mPASSED[0m
tests/test_mentors_three_act_structure.py::TestThreeActStructureMentor::test_score_calculation [32mPASSED[0m
tests/test_mentors_three_act_structure.py::TestThreeActStructureMentor::test_summary_generation [32mPASSED[0m
tests/test_mentors_three_act_structure.py::TestThreeActStructureMentor::test_check_proportions_config [32mPASSED[0m
tests/test_mentors_three_act_structure.py::TestThreeActStructureMentor::test_check_causality_config [32mPASSED[0m
tests/test_mentors_three_act_structure.py::TestThreeActStructureMentor::test_strict_mode_config [32mPASSED[0m
tests/test_mentors_three_act_structure.py::TestThreeActStructureMentor::test_essential_vs_optional_elements [32mPASSED[0m
tests/test_mentors_three_act_structure.py::TestThreeActStructureMentor::test_genre_variations [32mPASSED[0m
tests/test_mentors_three_act_structure.py::TestThreeActStructureMentor::test_b_story_analysis [32mPASSED[0m
tests/test_mentors_three_act_structure.py::TestThreeActStructureMentor::test_genre_specific_analysis [32mPASSED[0m
tests/test_mentors_three_act_structure.py::TestThreeActStructureMentor::test_enhanced_pacing_analysis [32mPASSED[0m
tests/test_scene_cli.py::TestGetLatestScriptId::test_get_latest_script_id_success [2m2025-07-30T08:07:45.010186Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:07:45.010966Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:07:45.011136Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:07:45.011465Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:07:45.138794Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:07:45.140446Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:07:45.140645Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:07:45.156054Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:07:45.158973Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:07:45.159185Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:07:45.159696Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:07:45.191048Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:07:45.192709Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:07:45.192906Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:07:45.193354Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:07:45.204620Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:07:45.206083Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:07:45.206241Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:07:45.206610Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:07:45.318218Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:07:45.319838Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:07:45.319977Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[32mPASSED[0m
tests/test_scene_cli.py::TestGetLatestScriptId::test_get_latest_script_id_no_scripts [2m2025-07-30T08:07:45.870855Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:07:45.871638Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:07:45.871772Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:07:45.872110Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:07:46.016599Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:07:46.019112Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:07:46.019314Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:07:46.039637Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:07:46.041762Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:07:46.042065Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:07:46.042474Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:07:46.080170Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:07:46.082099Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:07:46.082272Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:07:46.082666Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:07:46.095680Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:07:46.097257Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:07:46.097418Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:07:46.097772Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:07:46.235540Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:07:46.237289Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:07:46.237433Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[32mPASSED[0m
tests/test_scene_cli.py::TestSceneListCommand::test_scene_list_default_order [32mPASSED[0m
tests/test_scene_cli.py::TestSceneListCommand::test_scene_list_temporal_order [32mPASSED[0m
tests/test_scene_cli.py::TestSceneListCommand::test_scene_list_with_limit [32mPASSED[0m
tests/test_scene_cli.py::TestSceneListCommand::test_scene_list_no_database [32mPASSED[0m
tests/test_scene_cli.py::TestSceneListCommand::test_scene_list_invalid_order [32mPASSED[0m
tests/test_scene_cli.py::TestSceneUpdateCommand::test_scene_update_location_success [32mPASSED[0m
tests/test_scene_cli.py::TestSceneUpdateCommand::test_scene_update_invalid_scene_number [32mPASSED[0m
tests/test_scene_cli.py::TestSceneUpdateCommand::test_scene_update_no_options [32mPASSED[0m
tests/test_scene_cli.py::TestSceneUpdateCommand::test_scene_update_location_failure [32mPASSED[0m
tests/test_scene_cli.py::TestSceneReorderCommand::test_scene_reorder_success [32mPASSED[0m
tests/test_scene_cli.py::TestSceneReorderCommand::test_scene_reorder_temporal_order [32mPASSED[0m
tests/test_scene_cli.py::TestSceneReorderCommand::test_scene_reorder_invalid_order_type [32mPASSED[0m
tests/test_scene_cli.py::TestSceneReorderCommand::test_scene_reorder_invalid_position [32mPASSED[0m
tests/test_scene_cli.py::TestSceneReorderCommand::test_scene_reorder_failure [32mPASSED[0m
tests/test_scene_cli.py::TestSceneAnalyzeCommand::test_scene_analyze_dependencies [32mPASSED[0m
tests/test_scene_cli.py::TestSceneAnalyzeCommand::test_scene_analyze_temporal [32mPASSED[0m
tests/test_scene_cli.py::TestSceneAnalyzeCommand::test_scene_analyze_all [32mPASSED[0m
tests/test_scene_cli.py::TestSceneAnalyzeCommand::test_scene_analyze_invalid_type [32mPASSED[0m
tests/test_scene_cli.py::TestSceneAnalyzeCommand::test_scene_analyze_no_dependencies [32mPASSED[0m
tests/test_scene_cli.py::TestSceneCommandsCommon::test_no_database_file [32mPASSED[0m
tests/test_scene_cli.py::TestSceneCommandsCommon::test_no_scripts_in_database [32mPASSED[0m
tests/test_scene_cli.py::TestSceneCommandsCommon::test_no_scenes_in_script [32mPASSED[0m
tests/test_scene_cli.py::TestSceneCommandsCommon::test_exception_handling [32mPASSED[0m
tests/test_scene_manager.py::TestSceneManager::test_initialization [2m2025-07-30T08:07:47.759443Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:07:47.760297Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:07:47.760429Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:07:47.760708Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:07:47.930247Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:07:47.932251Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:07:47.932456Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:07:47.952500Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:07:47.954646Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:07:47.954874Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:07:47.955328Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:07:47.988845Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:07:47.991665Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:07:47.992105Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:07:47.992629Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:07:48.005969Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:07:48.007964Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:07:48.008217Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:07:48.008719Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:07:48.154888Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:07:48.157740Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:07:48.157973Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[32mPASSED[0m
tests/test_scene_manager.py::TestSceneManager::test_time_constants [32mPASSED[0m
tests/test_scene_manager.py::TestTemporalOrderInference::test_infer_temporal_order_empty_script [2m2025-07-30T08:07:48.941354Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:07:48.942312Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:07:48.942453Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:07:48.942779Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:07:49.066632Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:07:49.068292Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:07:49.068459Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:07:49.084246Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:07:49.085991Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:07:49.086185Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:07:49.086537Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:07:49.119778Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:07:49.121591Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:07:49.121787Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:07:49.122277Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:07:49.133253Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:07:49.135564Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:07:49.135772Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:07:49.136247Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:07:49.259800Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:07:49.261968Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:07:49.262187Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[32mPASSED[0m
tests/test_scene_manager.py::TestTemporalOrderInference::test_infer_temporal_order_basic_progression [2m2025-07-30T08:07:50.048593Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:07:50.049416Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:07:50.049558Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:07:50.049916Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:07:50.199248Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:07:50.201299Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:07:50.201485Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:07:50.216696Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:07:50.218927Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:07:50.219149Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:07:50.219594Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:07:50.248274Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:07:50.250122Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:07:50.250310Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:07:50.250671Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:07:50.261728Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:07:50.263678Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:07:50.263869Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:07:50.264260Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:07:50.396937Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:07:50.400649Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:07:50.400919Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[32mPASSED[0m
tests/test_scene_manager.py::TestTemporalOrderInference::test_infer_temporal_order_with_time_jumps [2m2025-07-30T08:07:51.219373Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:07:51.220205Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:07:51.220340Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:07:51.220617Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:07:51.364844Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:07:51.366958Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:07:51.367189Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:07:51.382541Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:07:51.384501Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:07:51.384692Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:07:51.385119Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:07:51.415160Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:07:51.417002Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:07:51.417241Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:07:51.417609Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:07:51.430063Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:07:51.431996Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:07:51.432228Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:07:51.432592Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:07:51.563961Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:07:51.565951Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:07:51.566148Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[32mPASSED[0m
tests/test_scene_manager.py::TestTemporalOrderInference::test_infer_temporal_order_with_flashback [2m2025-07-30T08:07:52.383439Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:07:52.384231Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:07:52.384362Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:07:52.384667Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:07:52.501953Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:07:52.503676Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:07:52.503865Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:07:52.519184Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:07:52.520995Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:07:52.521223Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:07:52.521589Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:07:52.556851Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:07:52.568121Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:07:52.568340Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:07:52.568870Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:07:52.583979Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:07:52.586821Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:07:52.587088Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:07:52.587470Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:07:52.722870Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:07:52.724702Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:07:52.724861Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[32mPASSED[0m
tests/test_scene_manager.py::TestTemporalOrderInference::test_extract_time_from_heading_standard_times [2m2025-07-30T08:07:53.497178Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:07:53.498079Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:07:53.498212Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:07:53.498506Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:07:53.629494Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:07:53.632146Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:07:53.632344Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:07:53.649583Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:07:53.651532Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:07:53.651703Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:07:53.652097Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:07:53.683820Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:07:53.685783Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:07:53.686077Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:07:53.686445Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:07:53.697209Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:07:53.699133Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:07:53.699308Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:07:53.699692Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:07:53.809803Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:07:53.811621Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:07:53.811767Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[32mPASSED[0m
tests/test_scene_manager.py::TestTemporalOrderInference::test_extract_time_from_heading_specific_times [2m2025-07-30T08:07:54.570262Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:07:54.571080Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:07:54.571212Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:07:54.571468Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:07:54.696193Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:07:54.697681Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:07:54.697884Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:07:54.712149Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:07:54.713476Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:07:54.713648Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:07:54.714093Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:07:54.745653Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:07:54.747876Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:07:54.748073Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:07:54.748416Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:07:54.758948Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:07:54.760825Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:07:54.760988Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:07:54.761356Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:07:54.877153Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:07:54.879094Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:07:54.879278Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[32mPASSED[0m
tests/test_scene_manager.py::TestTemporalOrderInference::test_extract_time_from_heading_no_time [2m2025-07-30T08:07:55.647659Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:07:55.648495Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:07:55.648643Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:07:55.648900Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:07:55.793493Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:07:55.795619Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:07:55.795872Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:07:55.815820Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:07:55.817919Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:07:55.818139Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:07:55.818494Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:07:55.847377Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:07:55.848885Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:07:55.849103Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:07:55.849453Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:07:55.859538Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:07:55.861123Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:07:55.861437Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:07:55.861802Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:07:55.990337Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:07:55.992262Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:07:55.992409Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[32mPASSED[0m
tests/test_scene_manager.py::TestTemporalOrderInference::test_detect_temporal_jump_patterns [2m2025-07-30T08:07:56.756736Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:07:56.757478Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:07:56.757614Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:07:56.758035Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:07:56.892110Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:07:56.894674Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:07:56.894948Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:07:56.910765Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:07:56.912506Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:07:56.912691Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:07:56.913082Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:07:56.942601Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:07:56.944179Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:07:56.944348Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:07:56.944711Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:07:56.955249Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:07:56.956976Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:07:56.957192Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:07:56.957630Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:07:57.064116Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:07:57.065601Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:07:57.065736Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[32mPASSED[0m
tests/test_scene_manager.py::TestTemporalOrderInference::test_detect_temporal_jump_no_indicator [2m2025-07-30T08:07:57.829950Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:07:57.830725Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:07:57.830858Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:07:57.831214Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:07:57.936626Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:07:57.938317Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:07:57.938504Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:07:57.953371Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:07:57.955432Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:07:57.955616Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:07:57.956005Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:07:57.983742Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:07:57.985156Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:07:57.985325Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:07:57.985704Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:07:57.995942Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:07:57.997556Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:07:57.997748Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:07:57.998169Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:07:58.101465Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:07:58.103336Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:07:58.103480Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[32mPASSED[0m
tests/test_scene_manager.py::TestSceneDependencyAnalysis::test_analyze_scene_dependencies_empty_script [2m2025-07-30T08:07:58.861964Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:07:58.862786Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:07:58.862925Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:07:58.863220Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:07:58.971483Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:07:58.972914Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:07:58.973113Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:07:58.987829Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:07:58.989427Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:07:58.989607Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:07:58.990061Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:07:59.016582Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:07:59.018062Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:07:59.018245Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:07:59.018559Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:07:59.030224Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:07:59.032081Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:07:59.032248Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:07:59.032765Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:07:59.142668Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:07:59.144187Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:07:59.144324Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[32mPASSED[0m
tests/test_scene_manager.py::TestSceneDependencyAnalysis::test_analyze_scene_dependencies_character_introductions [2m2025-07-30T08:07:59.909710Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:07:59.910574Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:07:59.910718Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:07:59.911050Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:08:00.040711Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:08:00.042512Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:08:00.042691Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:08:00.058825Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:08:00.061077Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:08:00.061274Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:08:00.061801Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:08:00.093604Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:08:00.095190Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:08:00.095361Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:08:00.095692Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:08:00.108446Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:08:00.109890Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:08:00.110089Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:08:00.110447Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:08:00.237500Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:08:00.239385Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:08:00.239555Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[32mPASSED[0m
tests/test_scene_manager.py::TestSceneDependencyAnalysis::test_analyze_scene_dependencies_multiple_characters [2m2025-07-30T08:08:01.008311Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:08:01.009093Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:08:01.009226Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:08:01.009503Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:08:01.121785Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:08:01.123498Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:08:01.123678Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:08:01.137714Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:08:01.139542Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:08:01.139716Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:08:01.140102Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:08:01.167251Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:08:01.168862Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:08:01.169068Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:08:01.169418Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:08:01.179469Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:08:01.180925Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:08:01.181123Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:08:01.181507Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:08:01.285148Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:08:01.287308Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:08:01.287466Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[32mPASSED[0m
tests/test_scene_manager.py::TestSceneDependencyAnalysis::test_analyze_scene_dependencies_for_single_scene [2m2025-07-30T08:08:02.050755Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:08:02.051587Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:08:02.051722Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:08:02.051983Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:08:02.170792Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:08:02.172492Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:08:02.172708Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:08:02.187659Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:08:02.189652Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:08:02.189986Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:08:02.190403Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:08:02.219326Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:08:02.220815Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:08:02.220995Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:08:02.221353Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:08:02.231931Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:08:02.233548Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:08:02.233716Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:08:02.234124Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:08:02.343333Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:08:02.344951Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:08:02.345128Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[32mPASSED[0m
tests/test_scene_manager.py::TestSceneReordering::test_update_scene_order_success [2m2025-07-30T08:08:03.110764Z[0m [[32m[1minfo     [0m] [1mMigration sequence is valid   [0m
[2m2025-07-30T08:08:03.111537Z[0m [[32m[1minfo     [0m] [1mApplying 5 pending migrations [0m
[2m2025-07-30T08:08:03.111703Z[0m [[32m[1minfo     [0m] [1mApplying Migration 1: Create initial database schema[0m
[2m2025-07-30T08:08:03.111971Z[0m [[32m[1minfo     [0m] [1mApplying initial schema migration[0m
[2m2025-07-30T08:08:03.220462Z[0m [[32m[1minfo     [0m] [1mInitial schema migration completed[0m
[2m2025-07-30T08:08:03.222515Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 1[0m
[2m2025-07-30T08:08:03.222754Z[0m [[32m[1minfo     [0m] [1mApplying Migration 2: Add sqlite-vec vector storage support to embeddings table[0m
[2m2025-07-30T08:08:03.238077Z[0m [[32m[1minfo     [0m] [1mVector storage migration applied successfully[0m
[2m2025-07-30T08:08:03.240164Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 2[0m
[2m2025-07-30T08:08:03.240324Z[0m [[32m[1minfo     [0m] [1mApplying Migration 3: Fix FTS table column naming to match base tables[0m
[2m2025-07-30T08:08:03.240705Z[0m [[32m[1minfo     [0m] [1mApplying FTS column naming fix migration[0m
[2m2025-07-30T08:08:03.277212Z[0m [[32m[1minfo     [0m] [1mFTS column naming fix migration applied successfully[0m
[2m2025-07-30T08:08:03.279427Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 3[0m
[2m2025-07-30T08:08:03.279686Z[0m [[32m[1minfo     [0m] [1mApplying Migration 4: Add scene dependencies table for logical ordering[0m
[2m2025-07-30T08:08:03.280152Z[0m [[32m[1minfo     [0m] [1mApplying scene dependencies migration[0m
[2m2025-07-30T08:08:03.290089Z[0m [[32m[1minfo     [0m] [1mScene dependencies migration applied successfully[0m
[2m2025-07-30T08:08:03.291738Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 4[0m
[2m2025-07-30T08:08:03.291922Z[0m [[32m[1minfo     [0m] [1mApplying Migration 0:         [0m
[2m2025-07-30T08:08:03.292305Z[0m [[32m[1minfo     [0m] [1mApplying Script Bible migration[0m
[2m2025-07-30T08:08:03.393280Z[0m [[32m[1minfo     [0m] [1mScript Bible migration applied successfully[0m
[2m2025-07-30T08:08:03.395375Z[0m [[32m[1minfo     [0m] [1mSuccessfully applied migration 5[0m
[2m2025-07-30T08:08:03.395551Z[0m [[32m[1minfo     [0m] [1mDatabase migration completed successfully[0m
[32mPASSED[0m
